import{m as F,a as g}from"./mixins-00a35343.js";import{m as U}from"./detailsAwardsModal-1f565c9b.js";import{m as R,a as H}from"./alertModal-064cb8ca.js";import{m as S,s as D}from"./multiselect-040cdaf8.js";import{r as m,o as l,h as v,i as I,b as e,j as B,g as y,t as b,a as u,w as c,F as P,e as N,l as O,f,n as k,k as _,m as V,T as L,v as M,p as Y}from"./index-a6b313c0.js";/* empty css                                                         */import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import"./main-a60f64cc.js";const E={components:{modalProgressYear:S,Multiselect:D,modalconfirmacion:R,modalalerta:H},mixins:[F],data:()=>({award:{awardeeName:"",awardName:"",year:"",month:"",contributionAwardee:"",institution:"",country:"",progressReport:"",researcherInvolved:null,comments:""},currentYear:new Date().getFullYear(),coauthor:!1,draft:!1,showModalProgress:!1,buttonDisable:!1,idResearcher:"",usuarios:[],researchers:[],errors:[],buttonText:"Save Award"}),created(){this.getProgressReport(),this.getUsuarios(),this.getUsuarios2();const t=new Date().getFullYear(),s=2e3,n=t+1;this.years=Array.from({length:n-s+1},(h,r)=>s+r),this.selectedYear=t,this.years.sort((h,r)=>r-h)},methods:{getUsuarios(){g.get("api/researchers").then(t=>{this.researchers=t.data}).catch(t=>console.log(t))},handleFormSubmit1(t){this.award.progressReport=t},getUsuarios2(){g.get("api/usuarios").then(t=>{this.usuarios=t.data.sort((s,n)=>s.name.localeCompare(n.name))}).catch(t=>console.log(t))},getProgressReport(){g.get("api/showProgressReport").then(t=>{this.award.progressReport=t.data}).catch(t=>console.log(t))},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Save draft",message:"¿Are you sure you want to save this award as a draft? this action cannot be undone.",okButton:"Save",cancelButton:"Return"})){var s="";this.award.researcherInvolved!==null&&this.award.researcherInvolved.length!==0&&this.award.researcherInvolved.forEach((r,a)=>{s+=r.name,a===this.award.researcherInvolved.length-1?s+=".":s+=", "});var n="";this.idResearcher!=""?n=this.idResearcher:n=this.userID;let h={idUsuario:n,status:"Draft",awardeeName:this.award.awardeeName,researcherInvolved:s,awardName:this.award.awardName,year:this.award.year,month:this.award.month,contributionAwardee:this.award.contributionAwardee,institution:this.award.institution,country:this.award.country,progressReport:this.award.progressReport,comments:this.award.comments};g.post("api/awards",h).then(r=>{this.toast.success("Draft saved successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(r=>{r.response?r.response.status===422?this.toast.warning(`Validation error: ${r.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):r.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${r.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):r.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${r.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}},onInput(t){const s=t.target;this.award.year=s.value.slice(0,4)},cerrarModal(){const t=this.$refs.closeBtn;this.$emit("recarga"),t.click()},capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)},async createAward(){this.errors=[];const t=["comments"];for(const a in this.award)!t.includes(a)&&(this.award[a]===""||this.award[a]===0||this.award[a]==null)&&this.errors.push(a);var s=await g.post("../api/verifyAward",this.award).then((function(a){return a.data}).bind(this)).catch(function(a){console.log(a)});s>0&&this.errors.push("duplicated");var n="";if(this.errors.length!=0&&(this.errors.forEach(a=>{a=="awardName"?n=n+`The field Award Name is required
`:a=="awardeeName"?n=n+`The field Awardee Name is required
`:a=="contributionAwardee"?n=n+`The field Contribution Awardee is required
`:a=="chapterTitle"?n=n+`The field Chapter Title is required
`:a=="progressReport"?n=n+`The field Progress Report is required
`:a=="duplicated"?n=n+`There is already a post with the same data, please try again.
`:n=n+"The field "+this.capitalizeFirstLetter(a)+` is required
`}),this.toast.warning(n,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Save Award",message:"¿Are you sure you want to save this award?.",okButton:"Save",cancelButton:"Return"})){var h="";this.idResearcher!=""?h=this.idResearcher:h=this.userID;var r="";this.award.researcherInvolved!==null&&this.award.researcherInvolved.length!==0&&this.award.researcherInvolved.forEach((p,$)=>{r+=p.name,$===this.award.researcherInvolved.length-1?r+=".":r+=", "});let i={status:"Finished",idUsuario:h,awardeeName:this.award.awardeeName,researcherInvolved:r,awardName:this.award.awardName,year:this.award.year,month:this.award.month,contributionAwardee:this.award.contributionAwardee,institution:this.award.institution,country:this.award.country,progressReport:this.award.progressReport,comments:this.award.comments};this.buttonDisable=!0,this.buttonText="Saving...",g.post("api/awards",i).then(p=>{this.toast.success("Award saved successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(p=>{p.response?p.response.status===422?this.toast.warning(`Validation error: ${p.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):p.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${p.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):p.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${p.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},q={name:"modal"},J={class:"modal-mask"},j={class:"modal-wrapper"},z={class:"modal-container"},G={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},X={for:""},W=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),K=[W],Q={key:0,class:"col-5 m-0"},Z={class:"fw-normal",style:{"font-size":"14px"}},x=e("option",{disabled:"",value:""},"Select a researcher",-1),ee=["value"],te={class:"modal-body"},se={class:"row"},oe={class:"col-md-6"},re=e("label",{for:""},"AC3E researcher involved:",-1),ae=e("label",{for:"",style:{color:"orange"}},"*",-1),ne={class:"col-md-3"},le=e("label",{for:""},"Year:",-1),ie=e("label",{for:"",style:{color:"orange"}},"*",-1),de=e("br",null,null,-1),ue=e("option",{disabled:"",value:""},"Select a year",-1),ce=["value"],he={class:"col-md-3"},me=e("label",{for:"selectMonth"},"Month:",-1),pe=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),we=e("br",null,null,-1),fe=e("option",{disabled:"",value:""},"Select a month",-1),be=e("option",{value:"January"},"January",-1),ge=e("option",{value:"February"},"February",-1),ve=e("option",{value:"March"},"March",-1),_e=e("option",{value:"April"},"April",-1),ye=e("option",{value:"May"},"May",-1),$e=e("option",{value:"June"},"June",-1),ke=e("option",{value:"July"},"July",-1),Ae=e("option",{value:"August"},"August",-1),Ce=e("option",{value:"September"},"September",-1),Be=e("option",{value:"October"},"October",-1),Oe=e("option",{value:"November"},"November",-1),Pe=e("option",{value:"December"},"December",-1),Ne=[fe,be,ge,ve,_e,ye,$e,ke,Ae,Ce,Be,Oe,Pe],Fe=e("br",null,null,-1),Re={class:"row"},He={class:"col-md-4"},Te=e("label",{for:""},"Awardee Name:",-1),Me=e("label",{for:"",style:{color:"orange"}},"*",-1),Se=e("br",null,null,-1),De={class:"col-md-4"},Ie=e("label",{for:""},"Award Name:",-1),Ve=e("label",{for:"",style:{color:"orange"}},"*",-1),Le=e("br",null,null,-1),Ue={class:"col-md-4"},Ye=e("label",{for:""},"Institution:",-1),Ee=e("label",{for:"",style:{color:"orange"}},"*",-1),qe=e("br",null,null,-1),Je=e("br",null,null,-1),je={class:"row"},ze={class:"col-md-3"},Ge=e("label",{for:""},"Country:",-1),Xe=e("label",{for:"",style:{color:"orange"}},"*",-1),We=e("br",null,null,-1),Ke={class:"col-md-6"},Qe=e("label",{for:""},"Contribution of the awardee:",-1),Ze=e("label",{for:"",style:{color:"orange"}},"*",-1),xe=e("br",null,null,-1),et={class:"col-md-3"},tt=e("label",{for:""},"Comments:",-1),st=e("br",null,null,-1),ot={class:"modal-footer"},rt={class:"form-check-label"},at=["disabled"],nt=["disabled"];function lt(t,s,n,h,r,a){const i=m("Multiselect"),p=m("modalfotoperfil"),$=m("modalBookAutor"),w=m("modalChapterAutor"),A=m("modalconfirmacion"),d=m("modalalerta"),C=m("modalProgressYear");return l(),v(L,{name:"modalcrear"},{default:I(()=>[e("div",q,[e("div",J,[e("div",j,[e("div",z,[e("div",G,[B(t.$slots,"header",{},()=>[y(" New Award ")]),e("label",X,[y("Progress year: "+b(t.award.progressReport)+"    ",1),e("a",{class:"btn",onClick:s[0]||(s[0]=o=>t.showModalProgress=!0)},K)]),t.is("Administrator")?(l(),u("label",Q,[y(" Researcher: "),e("label",Z,[c(e("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=o=>t.idResearcher=o)},[x,(l(!0),u(P,null,N(t.usuarios,o=>(l(),u("option",{key:o.id,value:o.id},b(o.name),9,ee))),128))],512),[[O,t.idResearcher]])])])):f("",!0),e("a",{class:"btn btn-closed",onClick:s[2]||(s[2]=o=>t.$emit("close")),ref:"closeBtn"},"X",512)]),e("div",te,[B(t.$slots,"body",{},()=>[e("div",se,[e("div",oe,[re,ae,k(i,{placeholder:"Select the participants",modelValue:t.award.researcherInvolved,"onUpdate:modelValue":s[3]||(s[3]=o=>t.award.researcherInvolved=o),searchable:!0,"close-on-select":!1,createTag:!0,options:t.researchers,mode:"tags",label:"name",trackBy:"id",object:!0},null,8,["modelValue","options"])]),e("div",ne,[le,ie,de,c(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":s[4]||(s[4]=o=>t.award.year=o)},[ue,(l(!0),u(P,null,N(t.years,o=>(l(),u("option",{key:o,value:o},b(o),9,ce))),128))],512),[[O,t.award.year]])]),e("div",he,[me,pe,we,c(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":s[5]||(s[5]=o=>t.award.month=o)},Ne,512),[[O,t.award.month]])])]),Fe,e("div",Re,[e("div",He,[Te,Me,Se,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>t.award.awardeeName=o)},null,512),[[_,t.award.awardeeName]])]),e("div",De,[Ie,Ve,Le,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[7]||(s[7]=o=>t.award.awardName=o)},null,512),[[_,t.award.awardName]])]),e("div",Ue,[Ye,Ee,qe,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[8]||(s[8]=o=>t.award.institution=o)},null,512),[[_,t.award.institution]])])]),Je,e("div",je,[e("div",ze,[Ge,Xe,We,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=o=>t.award.country=o)},null,512),[[_,t.award.country]])]),e("div",Ke,[Qe,Ze,xe,c(e("textarea",{class:"form-control","onUpdate:modelValue":s[10]||(s[10]=o=>t.award.contributionAwardee=o),style:{resize:"none"},cols:"30",rows:"5"},null,512),[[_,t.award.contributionAwardee]])]),e("div",et,[tt,st,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[11]||(s[11]=o=>t.award.comments=o)},null,512),[[_,t.award.comments]])])])])]),e("div",ot,[B(t.$slots,"footer",{},()=>[e("label",rt,[c(e("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":s[12]||(s[12]=o=>t.draft=o)},null,512),[[V,t.draft]]),y(" Save as a draft")]),t.draft==!1?(l(),u("a",{key:0,class:"btn btn-continue float-end",onClick:s[13]||(s[13]=o=>a.createAward()),disabled:t.buttonDisable},b(t.buttonText),9,at)):(l(),u("a",{key:1,class:"btn btn-continue float-end",onClick:s[14]||(s[14]=o=>a.guardarBorrador()),disabled:t.buttonDisable}," Save draft ",8,nt))])]),t.showFotoPerfil?(l(),v(p,{key:0,onClose:s[15]||(s[15]=o=>t.showFotoPerfil=!1)})):f("",!0),t.showModalBookAutor?(l(),v($,{key:1,onClose:s[16]||(s[16]=o=>t.showModalBookAutor=!1),onSubmit:a.handleFormSubmit1},null,8,["onSubmit"])):f("",!0),t.showModalChapterAutor?(l(),v(w,{key:2,onClose:s[17]||(s[17]=o=>t.showModalChapterAutor=!1),onSubmit:t.handleFormSubmit2},null,8,["onSubmit"])):f("",!0),k(A,{ref:"confirmation"},null,512),k(d,{ref:"alert"},null,512),t.showModalProgress?(l(),v(C,{key:3,progressYear:t.award.progressReport,onClose:s[18]||(s[18]=o=>t.showModalProgress=!1),onSubmit:a.handleFormSubmit1},null,8,["progressYear","onSubmit"])):f("",!0)])])])])]),_:3})}const it=T(E,[["render",lt]]),dt={components:{modalProgressYear:S,Multiselect:D,modalconfirmacion:R,modalalerta:H},mixins:[F],data:()=>({award:{awardeeName:"",awardName:"",year:"",contributionAwardee:"",institution:"",country:"",researcherInvolved:null,progressReport:""},currentYear:new Date().getFullYear(),coauthor:!1,draft:!1,showModalProgress:!1,id:"",buttonDisable:!1,researchers:[],usuarios:[],idResearcher:"",errors:[],buttonText:"Edit Award"}),props:{award1:Object},created(){if(this.id=this.award1.id,this.idResearcher=this.award1.idUsuario,this.award.awardeeName=this.award1.awardeeName,this.award.awardName=this.award1.awardName,this.award.year=this.award1.year,this.award.month=this.award1.month,this.award.contributionAwardee=this.award1.contributionAwardee,this.award.institution=this.award1.institution,this.award.country=this.award1.country,this.award.progressReport=this.award1.progressReport,this.award.comments=this.award1.comments,this.award1.researcherInvolved!=null){const h=this.award1.researcherInvolved.split(",");this.award.researcherInvolved=h.map((r,a)=>(r=r.trim(),r.endsWith(".")&&(r=r.slice(0,-1)),{value:r,name:r}))}const t=new Date().getFullYear(),s=2e3,n=t+1;this.years=Array.from({length:n-s+1},(h,r)=>s+r),this.selectedYear=t,this.years.sort((h,r)=>r-h),this.getUsuarios(),this.getUsuarios2()},methods:{getUsuarios2(){g.get("api/usuarios").then(t=>{this.usuarios=t.data.sort((s,n)=>s.name.localeCompare(n.name))}).catch(t=>console.log(t))},getUsuarios(){g.get("api/researchers").then(t=>{this.researchers=t.data}).catch(t=>console.log(t))},handleFormSubmit1(t){this.award.progressReport=t},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Edit draft",message:"¿Are you sure you want to edit this award as a draft? this action cannot be undone.",okButton:"Edit",cancelButton:"Return"})){var s="";this.award.researcherInvolved!==null&&this.award.researcherInvolved.length!==0&&this.award.researcherInvolved.forEach((r,a)=>{s+=r.name,a===this.award.researcherInvolved.length-1?s+=".":s+=", "});var n="";this.idResearcher!=""?n=this.idResearcher:n=this.userID;let h={idUsuario:n,status:"Draft",awardeeName:this.award.awardeeName,researcherInvolved:s,awardName:this.award.awardName,year:this.award.year,month:this.award.month,contributionAwardee:this.award.contributionAwardee,institution:this.award.institution,country:this.award.country,progressReport:this.award.progressReport,comments:this.award.comments};g.put(`api/awards/${this.id}`,h).then(r=>{this.toast.success("Draft edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(r=>{r.response?r.response.status===422?this.toast.warning(`Validation error: ${r.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):r.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${r.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):r.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${r.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}},onInput(t){const s=t.target;this.award.year=s.value.slice(0,4)},cerrarModal(){const t=this.$refs.closeBtn;this.$emit("recarga"),t.click()},capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)},async editAward(){this.errors=[];const t=["awardeeName","comments"];for(const i in this.award)!t.includes(i)&&(this.award[i]===""||this.award[i]===0||this.award[i]==null)&&this.errors.push(i);var s="";this.idResearcher!=""?s=this.idResearcher:s=this.userID;let n={idUsuario:s,id:this.id,awardeeName:this.award.awardeeName,awardName:this.award.awardName,year:this.award.year,contributionAwardee:this.award.contributionAwardee,institution:this.award.institution,country:this.award.country,comments:this.award.comments};var h=await g.post("../api/verifyAward",n).then((function(i){return i.data}).bind(this)).catch(function(i){console.log(i)});h>0&&this.errors.push("duplicated");var r="";if(this.errors.length!=0&&(this.errors.forEach(i=>{i=="awardName"?r=r+`The field Award Name is required
`:i=="contributionAwardee"?r=r+`The field Contribution Awardee is required
`:i=="chapterTitle"?r=r+`The field Chapter Title is required
`:i=="progressReport"?r=r+`The field Progress Report is required
`:i=="duplicated"?r=r+`There is already a post with the same data, please try again.
`:r=r+"The field "+this.capitalizeFirstLetter(i)+` is required
`}),this.toast.warning(r,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Edit Award",message:"¿Are you sure you want to Edit this award?.",okButton:"Edit",cancelButton:"Return"})){var a="";this.award.researcherInvolved!==null&&this.award.researcherInvolved.length!==0&&this.award.researcherInvolved.forEach((w,A)=>{a+=w.name,A===this.award.researcherInvolved.length-1?a+=".":a+=", "});var s="";this.idResearcher!=""?s=this.idResearcher:s=this.userID;let $={idUsuario:s,status:"Finished",awardeeName:this.award.awardeeName,researcherInvolved:a,awardName:this.award.awardName,year:this.award.year,month:this.award.month,contributionAwardee:this.award.contributionAwardee,institution:this.award.institution,country:this.award.country,progressReport:this.award.progressReport,comments:this.award.comments};this.buttonDisable=!0,this.buttonText="Editing...",g.put(`api/awards/${this.id}`,$).then(w=>{this.toast.success("Award edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(w=>{w.response?w.response.status===422?this.toast.warning(`Validation error: ${w.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):w.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${w.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):w.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${w.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},ut={name:"modal"},ct={class:"modal-mask"},ht={class:"modal-wrapper"},mt={class:"modal-container"},pt={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},wt={for:""},ft=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),bt=[ft],gt={key:0,class:"col-5 m-0"},vt={class:"fw-normal",style:{"font-size":"14px"}},_t=e("option",{disabled:"",value:""},"Select a researcher",-1),yt=["value"],$t={class:"modal-body"},kt={class:"row"},At={class:"col-md-6"},Ct=e("label",{for:""},"AC3E researcher involved:",-1),Bt=e("label",{for:"",style:{color:"orange"}},"*",-1),Ot={class:"col-md-3"},Pt=e("label",{for:""},"Year:",-1),Nt=e("label",{for:"",style:{color:"orange"}},"*",-1),Ft=e("br",null,null,-1),Rt=e("option",{disabled:"",value:null},"Select a year",-1),Ht=["value"],Tt={class:"col-md-3"},Mt=e("label",{for:"selectMonth"},"Month:",-1),St=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),Dt=e("br",null,null,-1),It=e("option",{disabled:"",value:null},"Select a month",-1),Vt=e("option",{value:"January"},"January",-1),Lt=e("option",{value:"February"},"February",-1),Ut=e("option",{value:"March"},"March",-1),Yt=e("option",{value:"April"},"April",-1),Et=e("option",{value:"May"},"May",-1),qt=e("option",{value:"June"},"June",-1),Jt=e("option",{value:"July"},"July",-1),jt=e("option",{value:"August"},"August",-1),zt=e("option",{value:"September"},"September",-1),Gt=e("option",{value:"October"},"October",-1),Xt=e("option",{value:"November"},"November",-1),Wt=e("option",{value:"December"},"December",-1),Kt=[It,Vt,Lt,Ut,Yt,Et,qt,Jt,jt,zt,Gt,Xt,Wt],Qt=e("br",null,null,-1),Zt={class:"row"},xt={class:"col-md-4"},es=e("label",{for:""},"Award Name:",-1),ts=e("label",{for:"",style:{color:"orange"}},"*",-1),ss=e("br",null,null,-1),os={class:"col-md-4"},rs=e("label",{for:""},"Institution:",-1),as=e("label",{for:"",style:{color:"orange"}},"*",-1),ns=e("br",null,null,-1),ls={class:"col-md-4"},is=e("label",{for:""},"Country:",-1),ds=e("label",{for:"",style:{color:"orange"}},"*",-1),us=e("br",null,null,-1),cs=e("br",null,null,-1),hs={class:"row"},ms={class:"col-md-6"},ps=e("label",{for:""},"Contribution of the awardee:",-1),ws=e("label",{for:"",style:{color:"orange"}},"*",-1),fs=e("br",null,null,-1),bs={class:"col-md-6"},gs=e("label",{for:""},"Comments:",-1),vs=e("br",null,null,-1),_s=e("br",null,null,-1),ys={class:"modal-footer"},$s={class:"form-check-label"},ks=["disabled"],As=["disabled"];function Cs(t,s,n,h,r,a){const i=m("Multiselect"),p=m("modalfotoperfil"),$=m("modalBookAutor"),w=m("modalChapterAutor"),A=m("modalconfirmacion"),d=m("modalalerta"),C=m("modalProgressYear");return l(),v(L,{name:"modalcrear"},{default:I(()=>[e("div",ut,[e("div",ct,[e("div",ht,[e("div",mt,[e("div",pt,[B(t.$slots,"header",{},()=>[y(" Edit Award ")]),e("label",wt,[y("Progress year: "+b(t.award.progressReport)+"    ",1),e("a",{class:"btn",onClick:s[0]||(s[0]=o=>t.showModalProgress=!0)},bt)]),t.is("Administrator")?(l(),u("label",gt,[y(" Researcher: "),e("label",vt,[c(e("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=o=>t.idResearcher=o)},[_t,(l(!0),u(P,null,N(t.usuarios,o=>(l(),u("option",{key:o.id,value:o.id},b(o.name),9,yt))),128))],512),[[O,t.idResearcher]])])])):f("",!0),e("a",{class:"btn btn-closed",onClick:s[2]||(s[2]=o=>t.$emit("close")),ref:"closeBtn"},"X",512)]),e("div",$t,[B(t.$slots,"body",{},()=>[e("div",kt,[e("div",At,[Ct,Bt,k(i,{placeholder:"Select the participants",modelValue:t.award.researcherInvolved,"onUpdate:modelValue":s[3]||(s[3]=o=>t.award.researcherInvolved=o),searchable:!0,"close-on-select":!1,createTag:!0,options:t.researchers,mode:"tags",label:"name",trackBy:"id",object:!0},null,8,["modelValue","options"])]),e("div",Ot,[Pt,Nt,Ft,c(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":s[4]||(s[4]=o=>t.award.year=o)},[Rt,(l(!0),u(P,null,N(t.years,o=>(l(),u("option",{key:o,value:o},b(o),9,Ht))),128))],512),[[O,t.award.year]])]),e("div",Tt,[Mt,St,Dt,c(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":s[5]||(s[5]=o=>t.award.month=o)},Kt,512),[[O,t.award.month]])])]),Qt,e("div",Zt,[e("div",xt,[es,ts,ss,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>t.award.awardName=o)},null,512),[[_,t.award.awardName]])]),e("div",os,[rs,as,ns,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[7]||(s[7]=o=>t.award.institution=o)},null,512),[[_,t.award.institution]])]),e("div",ls,[is,ds,us,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[8]||(s[8]=o=>t.award.country=o)},null,512),[[_,t.award.country]])])]),cs,e("div",hs,[e("div",ms,[ps,ws,fs,c(e("textarea",{class:"form-control","onUpdate:modelValue":s[9]||(s[9]=o=>t.award.contributionAwardee=o),style:{resize:"none"},cols:"30",rows:"5"},null,512),[[_,t.award.contributionAwardee]])]),e("div",bs,[gs,vs,c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=o=>t.award.comments=o)},null,512),[[_,t.award.comments]])])]),_s])]),e("div",ys,[B(t.$slots,"footer",{},()=>[e("label",$s,[c(e("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":s[11]||(s[11]=o=>t.draft=o)},null,512),[[V,t.draft]]),y(" Edit as a draft")]),t.draft==!1?(l(),u("a",{key:0,class:"btn btn-continue float-end",onClick:s[12]||(s[12]=o=>a.editAward()),disabled:t.buttonDisable},b(t.buttonText),9,ks)):(l(),u("a",{key:1,class:"btn btn-continue float-end",onClick:s[13]||(s[13]=o=>a.guardarBorrador()),disabled:t.buttonDisable}," Edit draft ",8,As))])]),t.showFotoPerfil?(l(),v(p,{key:0,onClose:s[14]||(s[14]=o=>t.showFotoPerfil=!1)})):f("",!0),t.showModalBookAutor?(l(),v($,{key:1,onClose:s[15]||(s[15]=o=>t.showModalBookAutor=!1),onSubmit:a.handleFormSubmit1},null,8,["onSubmit"])):f("",!0),t.showModalChapterAutor?(l(),v(w,{key:2,onClose:s[16]||(s[16]=o=>t.showModalChapterAutor=!1),onSubmit:t.handleFormSubmit2},null,8,["onSubmit"])):f("",!0),k(A,{ref:"confirmation"},null,512),k(d,{ref:"alert"},null,512),t.showModalProgress?(l(),v(C,{key:3,progressYear:t.award.progressReport,onClose:s[17]||(s[17]=o=>t.showModalProgress=!1),onSubmit:a.handleFormSubmit1},null,8,["progressYear","onSubmit"])):f("",!0)])])])])]),_:3})}const Bs=T(dt,[["render",Cs]]),Os={components:{modalver:U,modalcrear:it,modaleditar:Bs,modalconfirmacion:R,modalalerta:H},mixins:[F],data(){return{awards:null,award:null,showDetailsAward:!1,showNewAward:!1,showEditAward:!1,awardEdit:null,mostrarTabla:!1,mostrarCarga:!0,table:null}},created(){this.getAwards(this.userID)},methods:{verAward(t){this.award=t,this.showDetailsAward=!0},getAwards(t){g.get(`api/awards/${t}`).then(s=>{this.awards=s.data,this.table!=null&&(this.table.clear(),this.table.destroy()),this.crearTabla("#MyTableAward")}).catch(s=>console.log(s))},recargarTabla(t){this.mostrarCarga=!0,t=="General"?(this.awards=null,this.getAwards(this.userID)):this.crearTabla("#MyTableAward")},editAward(t){this.awardEdit=t,this.showEditAward=!0},async deleteAward(t){await this.$refs.confirmation.show({title:"Delete Award",message:"¿Are you sure you want to delete this Award?.",okButton:"Delete",cancelButton:"Return"})&&g.delete(`api/awards/${t}`).then(n=>{this.toast.success("Award successfully removed!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.recargarTabla("General")}).catch(n=>console.log(n))}}},Ps={class:"row mt-4 mx-4"},Ns={class:"col-12"},Fs={class:"card mb-4"},Rs={class:"row pb-0 p-4"},Hs={class:"col-12"},Ts={class:"d-flex justify-content-end"},Ms=e("i",{class:"fa-solid fa-rotate"},null,-1),Ss=[Ms],Ds={class:"card-body px-0 pt-0 pb-2",style:{"min-height":"400px"}},Is={class:"container"},Vs={class:"table-responsive p-0"},Ls={class:"loader-sm"},Us={class:"table align-items-center mb-0",id:"MyTableAward"},Ys=e("thead",null,[e("tr",{style:{color:"black"}},[e("th",{style:{"min-width":"16px"}}),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Status"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Awardee Name"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Award Name"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Year")])],-1),Es=e("td",null,null,-1),qs={class:"text-sm font-weight-bolder mb-0",style:{color:"black"}},Js={class:"align-middle text-end"},js={class:"d-flex px-3 py-1 justify-content-center align-items-center"},zs=["onClick"],Gs=e("i",{class:"fa fa-fw fa-edit"},null,-1),Xs=[Gs],Ws=["onClick"],Ks=e("i",{class:"fa-regular fa-eye"},null,-1),Qs=[Ks],Zs=["onClick"],xs=e("i",{class:"fa fa-fw fa-trash"},null,-1),eo=[xs],to={key:0,class:"text-sm font-weight-bolder mb-0",style:{color:"#878686"}},so={key:1,class:"text-sm font-weight-bolder mb-0",style:{color:"#28A745"}},oo={class:"text-sm mb-0"},ro={key:0,class:"text-sm mb-0"},ao={key:1,class:"text-sm mb-0 truncate-text"},no={key:0,class:"text-sm mb-0"},lo={key:1,class:"text-sm mb-0"},io=Y('<div class="row"><div class="col-3"><label style="font-weight:500;"> These buttons use the elements selected in the table, if none exist, it will select all the records. </label></div><div class="col-auto"><label title="To select a single record from the table, just do \r Click on the box in the first column to select \r several consecutive hold SHIFT, to select several \r non-consecutive hold CTRL."><span class="badge bg-dark-grey fs-10">?</span></label></div></div>',1);function uo(t,s,n,h,r,a){const i=m("modalconfirmacion"),p=m("modalalerta"),$=m("modalver"),w=m("modaleditar"),A=m("modalcrear");return l(),u("div",Ps,[e("div",Ns,[e("div",Fs,[e("div",Rs,[e("div",Hs,[e("div",Ts,[e("a",{class:"btn btn-spacing btn-continue",id:"show-modal1",onClick:s[0]||(s[0]=d=>r.showNewAward=!0)},"New Award"),y("   "),e("a",{class:"btn btn-spacing btn-search-blue",onClick:s[1]||(s[1]=d=>a.recargarTabla("General"))},Ss)])])]),e("div",Ds,[e("div",Is,[e("div",Vs,[c(e("div",Ls,null,512),[[M,r.mostrarCarga]]),c(e("table",Us,[Ys,e("tbody",null,[(l(!0),u(P,null,N(r.awards,d=>(l(),u("tr",{key:d.id},[Es,e("td",null,[e("p",qs,b(d.id),1)]),e("td",Js,[e("div",js,[e("a",{class:"btn btn-alert btn-xs",title:"Edit",onClick:C=>a.editAward(d)},Xs,8,zs),y("   "),e("a",{class:"btn btn-success btn-xs",title:"Details",onClick:C=>a.verAward(d)},Qs,8,Ws),y("   "),e("a",{class:"btn btn-closed btn-xs",title:"Delete",onClick:C=>a.deleteAward(d.id)},eo,8,Zs)])]),e("td",null,[d.status=="Draft"?(l(),u("p",to,b(d.status),1)):f("",!0),d.status=="Finished"?(l(),u("p",so,b(d.status),1)):f("",!0)]),e("td",null,[e("p",oo,b(d.usuario.name),1)]),e("td",null,[d.awardName==null?(l(),u("p",ro,"---")):(l(),u("p",ao,b(d.awardName),1))]),e("td",null,[d.year==null?(l(),u("p",no,"---")):(l(),u("p",lo,b(d.year),1))])]))),128))])],512),[[M,r.mostrarTabla]]),io])])])]),k(i,{ref:"confirmation"},null,512),k(p,{ref:"alert"},null,512),r.showDetailsAward?(l(),v($,{key:0,award1:r.award,onClose:s[2]||(s[2]=d=>r.showDetailsAward=!1)},null,8,["award1"])):f("",!0),r.showEditAward?(l(),v(w,{key:1,award1:r.awardEdit,onClose:s[3]||(s[3]=d=>r.showEditAward=!1),onRecarga:s[4]||(s[4]=d=>a.recargarTabla("General"))},null,8,["award1"])):f("",!0),r.showNewAward?(l(),v(A,{key:2,onClose:s[5]||(s[5]=d=>r.showNewAward=!1),onRecarga:s[6]||(s[6]=d=>a.recargarTabla("General"))})):f("",!0)])])}const vo=T(Os,[["render",uo]]);export{vo as default};
