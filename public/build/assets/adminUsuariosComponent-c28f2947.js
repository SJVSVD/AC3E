import{m as P,a as p}from"./mixins-00a35343.js";import{m as L,a as E}from"./alertModal-064cb8ca.js";import{r as f,o as r,h as v,i as F,b as s,j as _,g as m,w as d,k as g,a as l,F as w,e as $,t as h,l as T,m as U,f as R,n as k,T as V,v as q,p as D}from"./index-a6b313c0.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./main-a60f64cc.js";const S={components:{modalconfirmacion:L,modalalerta:E},mixins:[P],data:()=>({user:{name:"",email:"",password:"",confirmpassword:"",idRole:"",idResearchLine:""},selectedRoles:[],buttonDisable:!1,selected:[],selected2:[],marcados:!1,marcados2:!1,errors:[],roles:null,rolesUser:null,researchLines:null,permisos:null,buttonText:"Create User"}),created(){this.getRoles(),this.getResearchLines(),this.getUserRoles()},methods:{cerrarModal(){const e=this.$refs.closeBtn;this.$emit("recarga"),e.click()},getResearchLines(){p.get("api/researchLines").then(e=>{this.researchLines=e.data}).catch(e=>console.log(e))},getUserRoles(){p.get("api/rolesUser").then(e=>{this.rolesUser=e.data}).catch(e=>console.log(e))},getRoles(){p.get("api/roles").then(e=>{this.roles=e.data}).catch(e=>console.log(e))},marcarTodos(){this.marcados==!1?(this.roles.forEach(e=>{this.selected.push(e.id)}),this.marcados=!0):(this.selected=[],this.marcados=!1)},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},async crearUsuario(){this.errors=[];for(const t in this.user)(this.user[t]===""||this.user[t]===0)&&this.errors.push(t);this.user.password!=this.user.confirmpassword&&this.errors.push("contraseñas diferentes");var e="";if(this.errors.length!=0&&(this.errors.forEach(t=>{t=="name"?e=e+`The Name field is required
`:t=="email"?e=e+`The Email field is required
`:t=="contraseñas diferentes"?e=e+`Passwords do not match
`:t=="password"?e=e+`The Password field is required
`:t=="confirmpassword"?e=e+`The Confirm password field is required
`:t=="idRole"?e=e+`The Role user field is required
`:e=e+"The"+this.capitalizeFirstLetter(t)+`field is required
`}),this.toast.warning(e,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Create User",message:`¿Are you sure you want to create the user '${this.user.name}'?.`,okButton:"Create",cancelButton:"Return"})){let i={name:this.user.name,email:this.user.email,password:this.user.password,confirmpassword:this.user.confirmpassword,roles:this.selected,idRole:this.user.idRole,idResearchLine:this.user.idResearchLine};await p.post("api/usuarios",i).then(n=>{this.buttonDisable=!0,this.buttonText="Creating...",n.data=="email existente"?(this.toast.warning("There is already a user with the Email entered",{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.buttonDisable=!1,this.buttonText="Create User"):(this.toast.success("User created successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500))}).catch(n=>{n.response?n.response.status===422?this.toast.warning(`Validation error: ${n.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):n.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${n.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):n.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${n.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},x={name:"modal"},M={class:"modal-mask"},N={class:"modal-wrapper"},A={class:"modal-container"},j={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},z={class:"modal-body"},G={class:"row"},I={class:"col-md-3"},X=s("label",{for:"name"},"Name: ",-1),J=s("br",null,null,-1),K={class:"col-md-3"},Q=s("label",{for:"email"},"Email: ",-1),W=s("br",null,null,-1),Y={class:"col-md-3"},Z=s("label",{for:"password"},"Password: ",-1),ee=s("br",null,null,-1),se={class:"col-md-3"},te=s("label",{for:"confirm-password"}," Confirm Password: ",-1),oe=s("br",null,null,-1),re=s("br",null,null,-1),le=s("br",null,null,-1),ae={class:"row"},ie={class:"col-md-6"},ne=s("label",{for:""},"Role User:",-1),de=s("option",{disabled:"",value:""},"Select a role",-1),ue=["value"],ce={class:"col-md-6"},he=s("label",{for:""},"Research Line:",-1),me=s("option",{disabled:"",value:""},"Select a research line",-1),pe=["value"],fe=s("hr",{size:"3",class:"separador"},null,-1),be={class:"row"},ge={class:"col-md-12"},_e=s("label",{for:""},"Roles:",-1),ve={key:0,class:"form-check"},we={class:"form-check-label fw-bold"},$e={key:1,class:"form-check"},ke={class:"form-check-label fw-bold"},Ce={class:"form-check-label"},ye=["id","value"],Ue={class:"modal-footer"},Be=["disabled"];function Oe(e,t,i,n,u,c){const C=f("modalfotoperfil"),y=f("modalconfirmacion"),b=f("modalalerta");return r(),v(V,{name:"modalcrear"},{default:F(()=>[s("div",x,[s("div",M,[s("div",N,[s("div",A,[s("div",j,[_(e.$slots,"header",{},()=>[m(" New User ")]),s("a",{class:"btn btn-closed",onClick:t[0]||(t[0]=o=>e.$emit("close")),ref:"closeBtn"},"X",512)]),s("div",z,[_(e.$slots,"body",{},()=>[s("div",G,[s("div",I,[X,J,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=o=>e.user.name=o)},null,512),[[g,e.user.name]])]),s("div",K,[Q,W,d(s("input",{type:"email",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=o=>e.user.email=o)},null,512),[[g,e.user.email]])]),s("div",Y,[Z,ee,d(s("input",{type:"password",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=o=>e.user.password=o)},null,512),[[g,e.user.password]])]),s("div",se,[te,oe,d(s("input",{type:"password",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=o=>e.user.confirmpassword=o)},null,512),[[g,e.user.confirmpassword]]),re])]),le,s("div",ae,[s("div",ie,[ne,d(s("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=o=>e.user.idRole=o)},[de,(r(!0),l(w,null,$(e.rolesUser,o=>(r(),l("option",{key:o.id,value:o.id},h(o.name),9,ue))),128))],512),[[T,e.user.idRole]])]),s("div",ce,[he,d(s("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=o=>e.user.idResearchLine=o)},[me,(r(!0),l(w,null,$(e.researchLines,o=>(r(),l("option",{key:o.id,value:o.id},h(o.name),9,pe))),128))],512),[[T,e.user.idResearchLine]])])]),fe,s("div",be,[s("div",ge,[_e,e.marcados==!1?(r(),l("div",ve,[s("label",we,[d(s("input",{type:"checkbox",value:0,onChange:t[7]||(t[7]=o=>c.marcarTodos()),class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=o=>e.selected=o)},null,544),[[U,e.selected]]),m(" Check all ")])])):(r(),l("div",$e,[s("label",ke,[d(s("input",{type:"checkbox",value:0,onChange:t[9]||(t[9]=o=>c.marcarTodos()),class:"form-check-input","onUpdate:modelValue":t[10]||(t[10]=o=>e.selected=o)},null,544),[[U,e.selected]]),m(" Uncheck all ")])])),(r(!0),l(w,null,$(e.roles,o=>(r(),l("div",{key:o.id,class:"form-check"},[s("label",Ce,[d(s("input",{type:"checkbox",class:"form-check-input",id:o.id,value:o.id,"onUpdate:modelValue":t[11]||(t[11]=O=>e.selected=O)},null,8,ye),[[U,e.selected]]),m(" "+h(o.name),1)])]))),128))])])])]),s("div",Ue,[_(e.$slots,"footer",{},()=>[s("a",{class:"btn btn-continue float-end",onClick:t[12]||(t[12]=o=>c.crearUsuario()),disabled:e.buttonDisable},h(e.buttonText),9,Be)])]),e.showFotoPerfil?(r(),v(C,{key:0,onClose:t[13]||(t[13]=o=>e.showFotoPerfil=!1)})):R("",!0),k(y,{ref:"confirmation"},null,512),k(b,{ref:"alert"},null,512)])])])])]),_:3})}const Re=H(S,[["render",Oe]]);document.head.querySelector('meta[name="roles"]');const Te={components:{modalconfirmacion:L,modalalerta:E},mixins:[P],data:()=>({buttonText:"Edit User",buttonDisable:!1,user:{name:"",email:"",password:"",confirmpassword:"",idRole:"",idResearchLine:""},selected:[],marcados:!1,selected2:[],marcados2:!1,id:"",errors:[],roles:"",rolesUsuario:null,rolesUser:null,researchLines:null,revision:!1,revision2:!1,cambiarContraseña:!1}),props:{usuario:Object},created(){this.user.name=this.usuario.name,this.user.email=this.usuario.email,this.id=this.usuario.id,this.user.idResearchLine=this.usuario.idResearchLine,this.user.idRole=this.usuario.idRole,this.getRoles(),this.getResearchLines(),this.getUserRoles()},methods:{getResearchLines(){p.get("api/researchLines").then(e=>{this.researchLines=e.data}).catch(e=>console.log(e))},getUserRoles(){p.get("api/rolesUser").then(e=>{this.rolesUser=e.data}).catch(e=>console.log(e))},cerrarModal(){const e=this.$refs.closeBtn;this.$emit("recarga"),e.click()},async getRoles(){await p.get("api/roles").then(e=>{this.roles=e.data}).catch(e=>console.log(e)),this.getRolesUsuario(this.id)},async getRolesUsuario(e){await p.get(`api/roles/${e}`).then(t=>{this.rolesUsuario=t.data}).catch(t=>console.log(t)),this.compararRoles()},compararRoles(){this.revision==!1&&this.roles.forEach(e=>{this.rolesUsuario.forEach(t=>{e.name==t.name&&this.selected.push(e.id)})}),this.revision=!0},marcarTodos(){this.marcados==!1?(this.roles.forEach(e=>{this.selected.push(e.id)}),this.marcados=!0):(this.selected=[],this.marcados=!1)},async editarUsuario(){this.errors=[];for(const i in this.user)(this.user[i]===""||this.user[i]===0)&&((i=="password"||i=="confirmpassword")&&this.cambiarContraseña==!1||this.errors.push(i));this.user.password!=this.user.confirmpassword&&this.errors.push("contraseñas diferentes");var e="";if(this.errors.length!=0&&(this.errors.forEach(i=>{i=="name"?e=e+`The Name field is required
`:i=="email"?e=e+`The Email field is required
`:i=="contraseñas diferentes"?e=e+`Passwords do not match
`:i=="password"?e=e+`The Password field is required
`:i=="confirmpassword"?e=e+`The Confirm password field is required
`:i=="idRole"?e=e+`The Role user field is required
`:e=e+"The"+this.capitalizeFirstLetter(i)+`field is required
`}),this.toast.warning(e,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Edit User",message:`¿Are you sure you want to edit the user '${this.user.name}'?.`,okButton:"Edit",cancelButton:"Return"})){let n={name:this.user.name,email:this.user.email,password:this.user.password,confirmpassword:this.user.confirmpassword,roles:this.selected,idRole:this.user.idRole,idResearchLine:this.user.idResearchLine};var t=this.id;p.post(`api/usuarios/updateUser/${t}`,n).then(u=>{console.log(u),this.buttonText="Editando...",this.buttonDisable=!0,u.data=="email existente"?(this.toast.warning("There is already a user with the Email entered",{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.buttonDisable=!1,this.buttonText="Edit User"):(this.toast.success("User edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500))}).catch(u=>{u.response.status==422&&(this.errors=u.response.data.errors,this.toast.warning("There is an invalid value.",{position:"top-right",closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}))})}}}},Pe={name:"modal"},Le={class:"modal-mask"},Ee={class:"modal-wrapper"},He={class:"modal-container"},Fe={class:"modal-header fw-bold",style:{color:"#444444"}},Ve={class:"modal-body"},qe={class:"row"},De={class:"col-3"},Se=s("label",{for:"name"},"Name: ",-1),xe=s("br",null,null,-1),Me={class:"col-3"},Ne=s("label",{for:"email"},"Email: ",-1),Ae=s("br",null,null,-1),je={class:"col-3"},ze=s("label",{for:"password"},"Password: ",-1),Ge=s("br",null,null,-1),Ie=["disabled"],Xe={class:"col-3"},Je=s("label",{for:"confirm-password"}," Confirm Password: ",-1),Ke=s("br",null,null,-1),Qe=["disabled"],We=s("br",null,null,-1),Ye={class:"form-check pt-2"},Ze={class:"form-check-label"},es=s("br",null,null,-1),ss={class:"row"},ts={class:"col-6"},os=s("label",{for:""},"Role User:",-1),rs=s("option",{disabled:"",value:""},"Select a role",-1),ls=["value"],as={class:"col-6"},is=s("label",{for:""},"Research Line:",-1),ns=s("option",{disabled:"",value:""},"Select a research line",-1),ds=["value"],us=s("hr",{size:"3",class:"separador"},null,-1),cs={class:"row"},hs={class:"col-12"},ms=s("label",{for:""},"Roles:",-1),ps={key:0,class:"form-check"},fs={class:"form-check-label fw-bold"},bs={key:1,class:"form-check"},gs={class:"form-check-label fw-bold"},_s={class:"form-check-label"},vs=["id","value"],ws={class:"modal-footer"},$s=["disabled"];function ks(e,t,i,n,u,c){const C=f("modalfotoperfil"),y=f("modalconfirmacion"),b=f("modalalerta");return r(),v(V,{name:"modaleditar"},{default:F(()=>[s("div",Pe,[s("div",Le,[s("div",Ee,[s("div",He,[s("div",Fe,[_(e.$slots,"header",{},()=>[m(" Edit User ")]),s("a",{class:"btn btn-closed",onClick:t[0]||(t[0]=o=>e.$emit("close")),ref:"closeBtn"},"X",512)]),s("div",Ve,[_(e.$slots,"body",{},()=>[s("div",qe,[s("div",De,[Se,xe,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=o=>e.user.name=o)},null,512),[[g,e.user.name]])]),s("div",Me,[Ne,Ae,d(s("input",{type:"email",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=o=>e.user.email=o)},null,512),[[g,e.user.email]])]),s("div",je,[ze,Ge,d(s("input",{type:"password",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=o=>e.user.password=o),disabled:e.cambiarContraseña==!1},null,8,Ie),[[g,e.user.password]])]),s("div",Xe,[Je,Ke,d(s("input",{type:"password",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=o=>e.user.confirmpassword=o),disabled:e.cambiarContraseña==!1},null,8,Qe),[[g,e.user.confirmpassword]]),We]),s("div",Ye,[s("label",Ze,[d(s("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=o=>e.cambiarContraseña=o),onChange:t[6]||(t[6]=o=>(e.user.password="",e.user.confirmpassword=""))},null,544),[[U,e.cambiarContraseña]]),m(" Update Password ")])])]),es,s("div",ss,[s("div",ts,[os,d(s("select",{class:"form-select","onUpdate:modelValue":t[7]||(t[7]=o=>e.user.idRole=o)},[rs,(r(!0),l(w,null,$(e.rolesUser,o=>(r(),l("option",{key:o.id,value:o.id},h(o.name),9,ls))),128))],512),[[T,e.user.idRole]])]),s("div",as,[is,d(s("select",{class:"form-select","onUpdate:modelValue":t[8]||(t[8]=o=>e.user.idResearchLine=o)},[ns,(r(!0),l(w,null,$(e.researchLines,o=>(r(),l("option",{key:o.id,value:o.id},h(o.name),9,ds))),128))],512),[[T,e.user.idResearchLine]])])]),us,s("div",cs,[s("div",hs,[ms,e.marcados==!1?(r(),l("div",ps,[s("label",fs,[d(s("input",{type:"checkbox",value:0,onChange:t[9]||(t[9]=o=>c.marcarTodos()),class:"form-check-input","onUpdate:modelValue":t[10]||(t[10]=o=>e.selected=o)},null,544),[[U,e.selected]]),m(" Check all ")])])):(r(),l("div",bs,[s("label",gs,[d(s("input",{type:"checkbox",value:0,onChange:t[11]||(t[11]=o=>c.marcarTodos()),class:"form-check-input","onUpdate:modelValue":t[12]||(t[12]=o=>e.selected=o)},null,544),[[U,e.selected]]),m(" Uncheck all ")])])),(r(!0),l(w,null,$(e.roles,o=>(r(),l("div",{key:o.id,class:"form-check"},[s("label",_s,[d(s("input",{type:"checkbox",class:"form-check-input",id:o.id,value:o.id,"onUpdate:modelValue":t[13]||(t[13]=O=>e.selected=O)},null,8,vs),[[U,e.selected]]),m(" "+h(o.name),1)])]))),128))])])])]),s("div",ws,[_(e.$slots,"footer",{},()=>[s("a",{class:"btn btn-continue float-end",onClick:t[14]||(t[14]=o=>c.editarUsuario()),disabled:e.buttonDisable},h(e.buttonText),9,$s)])])])]),e.showFotoPerfil?(r(),v(C,{key:0,onClose:t[15]||(t[15]=o=>e.showFotoPerfil=!1)})):R("",!0),k(y,{ref:"confirmation"},null,512),k(b,{ref:"alert"},null,512)])])]),_:3})}const Cs=H(Te,[["render",ks]]),ys={components:{modalconfirmacion:L,modalalerta:E},mixins:[P],data:()=>({buttonText:"Save Changes",buttonDisable:!1,id:"",edits:{progressReport:""},errors:[]}),methods:{cerrarModal(){this.$refs.closeBtn.click()},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},async editProgress(){this.errors=[];for(const t in this.edits)(this.edits[t]===""||this.edits[t]===null)&&this.errors.push(t);var e="";if(this.errors.length!=0&&(this.errors.forEach(t=>{t=="progressReport"?e=e+`The field Progress report is required
`:e=e+"The field "+this.capitalizeFirstLetter(t)+` is required
`}),this.toast.warning(e,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Edit progress report",message:"Are you sure you want to edit progress report year?.",okButton:"Save",cancelButton:"Return"})){let i={value:this.edits.progressReport};this.id,p.post("api/editProgressReport",i).then(n=>{this.buttonText="Editing...",this.buttonDisable=!0,this.toast.success("Progress report edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(n=>{n.response.status==422&&(this.errors=n.response.data.errors,this.toast.warning("Existe un valor inválido.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}))})}}}},Us={name:"modal"},Bs={class:"modal-mask"},Os={class:"modal-wrapper"},Rs={class:"modal-container-xs"},Ts={class:"modal-header fw-bold",style:{color:"#444444"}},Ps={class:"modal-body"},Ls={class:"row"},Es={class:"col-12"},Hs={class:"form-group"},Fs=s("label",{for:""},"Progress report: ",-1),Vs=s("br",null,null,-1),qs={class:"modal-footer"},Ds=["disabled"];function Ss(e,t,i,n,u,c){const C=f("modalconfirmacion"),y=f("modalalerta");return r(),v(V,{name:"modaleditar"},{default:F(()=>[s("div",Us,[s("div",Bs,[s("div",Os,[s("div",Rs,[s("div",Ts,[_(e.$slots,"header",{},()=>[m(" Edit progress report ")]),s("a",{class:"btn btn-closed",onClick:t[0]||(t[0]=b=>e.$emit("close")),ref:"closeBtn"},"X",512)]),s("div",Ps,[_(e.$slots,"body",{},()=>[s("div",Ls,[s("div",Es,[s("div",Hs,[Fs,Vs,d(s("input",{type:"number",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=b=>e.edits.progressReport=b)},null,512),[[g,e.edits.progressReport]])])])]),s("div",qs,[_(e.$slots,"footer",{},()=>[s("a",{class:"btn btn-continue float-end",onClick:t[2]||(t[2]=b=>c.editProgress()),disabled:e.buttonDisable},h(e.buttonText),9,Ds)])])])])])]),k(C,{ref:"confirmation"},null,512),k(y,{ref:"alert"},null,512)])])]),_:3})}const xs=H(ys,[["render",Ss]]),Ms={components:{modalcrear:Re,modaleditar:Cs,modalconfirmacion:L,modalalerta:E,modalprogress:xs},mixins:[P],data(){return{usuarios:null,showCrearUsuario:!1,showEditarUsuario:!1,showEditarProgress:!1,usuarioeditar:null,mostrarTabla:!1,mostrarCarga:!0,permisos:null,table:null}},created(){this.getUsuarios()},methods:{recargarTabla(e){this.mostrarCarga=!0,e=="General"?(this.usuarios=null,this.getUsuarios()):(this.table.destroy(),this.crearTabla("#MyTableUsuarios"))},cambiarEstado(e){p.get(`api/cambiarEstadoUsuario/${e}`).then(t=>{this.toast.success("User has been successfully updated!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.recargarTabla("General")}).catch(t=>console.log(t))},getUsuarios(){p.get("api/usuarios").then(e=>{this.usuarios=e.data,this.table!=null&&(this.table.clear(),this.table.destroy()),this.crearTabla("#MyTableUsuarios")}).catch(e=>console.log(e))},recargarTabla(e){this.mostrarCarga=!0,e=="General"?(this.usuarios=null,this.getUsuarios()):this.crearTabla("#MyTableUsuarios")},usuarioEditar(e){this.usuarioeditar=e,this.showEditarUsuario=!0},async deleteUsuario(e,t){await this.$refs.confirmation.show({title:"Delete User",message:`¿Are you sure you want to delete the user? '${t}'?.`,okButton:"Delete",cancelButton:"Return"})&&p.delete(`api/usuarios/${e}`).then(n=>{this.toast.success("User deleted successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.recargarTabla("General")}).catch(n=>console.log(n))}}},Ns={class:"row mt-4 mx-4"},As={class:"col-12"},js={class:"card mb-4"},zs={class:"row pb-0 p-4"},Gs={class:"col-12"},Is={class:"d-flex justify-content-end"},Xs=s("i",{class:"fa-solid fa-rotate"},null,-1),Js=[Xs],Ks={class:"card-body px-0 pt-0 pb-2",style:{"min-height":"400px"}},Qs={class:"container"},Ws={class:"table-responsive p-0"},Ys={class:"loader-sm"},Zs={class:"table align-items-center mb-0",id:"MyTableUsuarios"},et=s("thead",null,[s("tr",{style:{color:"black"}},[s("th",{style:{"min-width":"16px"}}),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"Status"),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"User Role"),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"Research Line"),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"Name"),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"Email"),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"Roles"),s("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions")])],-1),st=s("td",null,null,-1),tt={class:"text-sm font-weight-bolder mb-0",style:{color:"black"}},ot={key:0,class:"text-sm font-weight-bolder mb-0",style:{color:"#28A745"}},rt={key:1,class:"text-sm font-weight-bolder mb-0",style:{color:"#B80F0A"}},lt={class:"text-sm mb-0"},at={class:"text-sm mb-0"},it={class:"text-sm mb-0"},nt={key:0,class:"text-sm mb-0"},dt={key:1,class:"text-sm mb-0"},ut={key:0},ct={key:1},ht={class:"align-middle text-end"},mt={class:"d-flex px-3 py-1 justify-content-center align-items-center"},pt=["onClick"],ft=s("i",{class:"fa fa-fw fa-edit"},null,-1),bt=[ft],gt=["onClick"],_t=s("i",{class:"fa fa-fw fa-trash"},null,-1),vt=[_t],wt=["onClick"],$t=s("i",{class:"fa-solid fa-toggle-on"},null,-1),kt=[$t],Ct=["onClick"],yt=s("i",{class:"fa-solid fa-toggle-off"},null,-1),Ut=[yt],Bt=D('<div class="row"><div class="col-3"><label style="font-weight:500;">These buttons use the elements selected in the table, if none exist, it will select all the records. </label></div><div class="col-auto"><label title="To select a single record from the table, just do \r Click on the box in the first column to select \r several consecutive hold SHIFT, to select several \r non-consecutive hold CTRL."><span class="badge bg-dark-grey fs-10">?</span></label></div></div>',1);function Ot(e,t,i,n,u,c){const C=f("modalconfirmacion"),y=f("modalalerta"),b=f("modaleditar"),o=f("modalcrear"),O=f("modalprogress");return r(),l("div",Ns,[s("div",As,[s("div",js,[s("div",zs,[s("div",Gs,[s("div",Is,[s("a",{class:"btn btn-spacing btn-purple",id:"show-modal1",onClick:t[0]||(t[0]=a=>u.showEditarProgress=!0)},"Update year"),m("   "),s("a",{class:"btn btn-spacing btn-continue",id:"show-modal1",onClick:t[1]||(t[1]=a=>u.showCrearUsuario=!0)},"New"),m("   "),s("a",{class:"btn btn-spacing btn-search-blue",onClick:t[2]||(t[2]=a=>c.recargarTabla("General"))},Js)])])]),s("div",Ks,[s("div",Qs,[s("div",Ws,[d(s("div",Ys,null,512),[[q,u.mostrarCarga]]),d(s("table",Zs,[et,s("tbody",null,[(r(!0),l(w,null,$(u.usuarios,a=>(r(),l("tr",{key:a.id},[st,s("td",null,[s("p",tt,h(a.id),1)]),s("td",null,[a.estado==!0?(r(),l("p",ot,"Active")):(r(),l("p",rt,"Inactive"))]),s("td",null,[s("p",lt,h(a.role_user.name),1)]),s("td",null,[s("p",at,h(a.research_line.name),1)]),s("td",null,[s("p",it,h(a.name),1)]),s("td",null,[a.email!=null?(r(),l("p",nt,h(a.email),1)):(r(),l("p",dt,"---"))]),s("td",null,[a.roles==""?(r(),l("div",ut,"---")):(r(),l("div",ct,[(r(!0),l(w,null,$(a.roles,B=>(r(),l("p",{key:B.id,class:"text-sm mb-0"},h(B.name),1))),128))]))]),s("td",ht,[s("div",mt,[s("a",{class:"btn btn-alert btn-xs",title:"Editar",onClick:B=>c.usuarioEditar(a)},bt,8,pt),m("   "),s("a",{class:"btn btn-closed btn-xs",title:"Eliminar",onClick:B=>c.deleteUsuario(a.id,a.name)},vt,8,gt),m("   "),a.estado==!0?(r(),l("a",{key:0,onClick:B=>c.cambiarEstado(a.id),class:"btn btn-continue btn-xs"},kt,8,wt)):(r(),l("a",{key:1,class:"btn btn-secondary btn-xs",onClick:B=>c.cambiarEstado(a.id)},Ut,8,Ct))])])]))),128))])],512),[[q,u.mostrarTabla]]),Bt])])])]),k(C,{ref:"confirmation"},null,512),k(y,{ref:"alert"},null,512),u.showEditarUsuario?(r(),v(b,{key:0,usuario:u.usuarioeditar,onClose:t[3]||(t[3]=a=>u.showEditarUsuario=!1),onRecarga:t[4]||(t[4]=a=>c.recargarTabla("General"))},null,8,["usuario"])):R("",!0),u.showCrearUsuario?(r(),v(o,{key:1,onClose:t[5]||(t[5]=a=>u.showCrearUsuario=!1),onRecarga:t[6]||(t[6]=a=>c.recargarTabla("General"))})):R("",!0),u.showEditarProgress?(r(),v(O,{key:2,onClose:t[7]||(t[7]=a=>u.showEditarProgress=!1)})):R("",!0)])])}const Ht=H(Ms,[["render",Ot]]);export{Ht as default};
