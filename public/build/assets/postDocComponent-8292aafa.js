import{m as T,a as v}from"./mixins-00a35343.js";import{m as A}from"./detailsPostDocModal-ef5370a4.js";import{m as S,a as Y}from"./alertModal-064cb8ca.js";import{m as F,s as E}from"./multiselect-040cdaf8.js";import{r as $,o as c,h as O,i as V,b as e,j as C,g as w,t as b,a as d,w as p,F as k,e as B,l as _,f as y,k as D,n as P,m as H,T as U,v as R,p as q}from"./index-a6b313c0.js";/* empty css                                                         */import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./main-a60f64cc.js";const L={components:{modalProgressYear:F,Multiselect:E,modalconfirmacion:S,modalalerta:Y},mixins:[T],data:()=>({postDoc:{nameOfPostdoc:"",identification:"",passport:"",run:"",gender:"",researchTopic:"",personalEmail:"",supervisorName:null,resourcesProvided:null,fundingSource:null,startYear:"",startMonth:"",endMonth:"",endingYear:"",institutionName:"",comments:"",progressReport:""},options3:["Basal Financing Program Funding","Other sources"],options2:["Equipment","Information","Infrastructure","Other"],draft:!1,showModalProgress:!1,researchers:[],usuarios:[],idResearcher:"",buttonDisable:!1,errors:[],buttonText:"Save fellow"}),mounted(){this.getUsuarios(),this.getProgressReport(),this.getUsuarios2();const o=new Date().getFullYear(),t=2e3,h=o+1;this.years=Array.from({length:h-t+1},(n,r)=>t+r),this.selectedYear=o,this.years.sort((n,r)=>r-n)},methods:{handleFormSubmit1(o){this.postDoc.progressReport=o},getProgressReport(){v.get("api/showProgressReport").then(o=>{this.postDoc.progressReport=o.data}).catch(o=>console.log(o))},getUsuarios2(){v.get("api/usuarios").then(o=>{this.usuarios=o.data.sort((t,h)=>t.name.localeCompare(h.name))}).catch(o=>console.log(o))},getUsuarios(){v.get("api/researchers").then(o=>{this.researchers=o.data}).catch(o=>console.log(o))},checkRut(){if(this.postDoc.run!=""){this.postDoc.run.replace(".","");var o=this.postDoc.run.replace(".","");o=o.replace("-","");var t=o.slice(0,-1),h=o.slice(-1).toUpperCase();this.postDoc.run=t+"-"+h}},validateInput(){this.postDoc.run=this.postDoc.run.replace(/[^0-9Kk\-]/g,"").replace(/(\-)\-+/g,"$1")},isNumberOrDash(o){const t=o.which?o.which:o.keyCode;(t===45&&this.postDoc.run.indexOf("-")!==-1||t>31&&t<48||t>57&&t<75||t>75&&t<107||t>107&&t!==109)&&o.preventDefault()},onInput2(o){const t=o.target;this.postDoc.endingYear=t.value.slice(0,4)},onInput1(o){const t=o.target;this.postDoc.startYear=t.value.slice(0,4)},calculateYears(){const t=new Date().getFullYear()-20;this.years=Array.from({length:21},(h,n)=>t+n)},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Save draft",message:"¿Are you sure you want to save this Postdoctoral fellow as a draft? this action cannot be undone.",okButton:"Save",cancelButton:"Return"})){var t="";this.postDoc.identification=="run"?t=this.formatoRut(this.postDoc.run):t=this.postDoc.passport;var h="";this.postDoc.supervisorName!==null&&this.postDoc.supervisorName.length!==0&&this.postDoc.supervisorName.forEach((i,f)=>{h+=i.name,f===this.postDoc.supervisorName.length-1?h+=".":h+=", "});var n="";this.postDoc.resourcesProvided!==null&&this.postDoc.resourcesProvided.length!==0&&this.postDoc.resourcesProvided.forEach((i,f)=>{n+=i.name,f===this.postDoc.resourcesProvided.length-1?n+=".":n+=", "});var r="";this.postDoc.fundingSource!==null&&this.postDoc.fundingSource.length!==0&&this.postDoc.fundingSource.forEach((i,f)=>{r+=i.name,f===this.postDoc.fundingSource.length-1?r+=".":r+=", "});var l="";this.idResearcher!=""?l=this.idResearcher:l=this.userID;let m={idUsuario:l,status:"Draft",nameOfPostdoc:this.postDoc.nameOfPostdoc,identification:this.postDoc.identification,runOrPassport:t,gender:this.postDoc.gender,personalEmail:this.postDoc.personalEmail,researchTopic:this.postDoc.researchTopic,supervisorName:h,resourcesProvided:n,fundingSource:r,startYear:this.postDoc.startYear,startMonth:this.postDoc.startMonth,endMonth:this.postDoc.endMonth,endingYear:this.postDoc.endingYear,institutionName:this.postDoc.institutionName,comments:this.postDoc.comments,progressReport:this.postDoc.progressReport};v.post("api/postDoc",m).then(i=>{this.toast.success("Draft saved successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(i=>{i.response?i.response.status===422?this.toast.warning(`Validation error: ${i.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):i.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${i.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):i.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${i.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}},cerrarModal(){const o=this.$refs.closeBtn;this.$emit("recarga"),o.click()},capitalizeFirstLetter(o){return o.charAt(0).toUpperCase()+o.slice(1)},async createPostDoc(){this.errors=[];const o=["comments","institutionName"];for(const u in this.postDoc)(this.postDoc[u]===""||this.postDoc[u]===0||this.postDoc[u]==null||this.postDoc[u]==[])&&(this.postDoc.identification==""&&u=="run"||this.postDoc.identification==""&&u=="passport"||this.postDoc.identification=="run"&&u=="passport"||this.postDoc.identification=="passport"&&u=="run"||o.includes(u)||this.errors.push(u));if(this.postDoc.identification=="run"&&this.postDoc.run!=""){var t=this.validarRut(this.postDoc.run);t==!1&&this.errors.push("invalidRut")}var h=await v.post("../api/verifyPostdoc",this.postDoc).then((function(u){return u.data}).bind(this)).catch(function(u){console.log(u)});h>0&&this.errors.push("duplicated");var n="";if(this.errors.length!=0&&(this.errors.forEach(u=>{u=="nameOfPostdoc"?n=n+`The field Name of postdoc is required
`:u=="researchTopic"?n=n+`The field Research topic is required
`:u=="supervisorName"?n=n+`The field Supervisor name is required
`:u=="personalEmail"?n=n+`The field Personal Email is required
`:u=="resourcesProvided"?n=n+`The field Resources provided is required
`:u=="fundingSource"?n=n+`The field Funding source is required
`:u=="invalidRut"?n=n+`The entered Run is invalid
`:u=="startYear"?n=n+`The field Start year is required
`:u=="startMonth"?n=n+`The field Start month is required
`:u=="endingYear"?n=n+`The field Ending year is required
`:u=="endMonth"?n=n+`The field Ending month is required
`:u=="institutionName"?n=n+`The field Institution where it was inserted is required
`:u=="personalEmail"?n=n+`The field Personal Email is required
`:u=="duplicated"?n=n+`There is already a post with the same data, please try again.
`:n=n+"The field "+this.capitalizeFirstLetter(u)+` is required
`}),this.toast.warning(n,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Save Postdoctoral fellow",message:"¿Are you sure you want to save this Postdoctoral fellow?.",okButton:"Save",cancelButton:"Return"})){var r="";this.postDoc.identification=="run"?r=this.formatoRut(this.postDoc.run):r=this.postDoc.passport;var l="";this.postDoc.supervisorName!==null&&this.postDoc.supervisorName.length!==0&&this.postDoc.supervisorName.forEach((a,g)=>{l+=a.name,g===this.postDoc.supervisorName.length-1?l+=".":l+=", "});var m="";this.postDoc.resourcesProvided!==null&&this.postDoc.resourcesProvided.length!==0&&this.postDoc.resourcesProvided.forEach((a,g)=>{m+=a.name,g===this.postDoc.resourcesProvided.length-1?m+=".":m+=", "});var i="";this.postDoc.fundingSource!==null&&this.postDoc.fundingSource.length!==0&&this.postDoc.fundingSource.forEach((a,g)=>{i+=a.name,g===this.postDoc.fundingSource.length-1?i+=".":i+=", "});var f="";this.idResearcher!=""?f=this.idResearcher:f=this.userID;let s={status:"Finished",idUsuario:f,nameOfPostdoc:this.postDoc.nameOfPostdoc,identification:this.postDoc.identification,runOrPassport:r,gender:this.postDoc.gender,personalEmail:this.postDoc.personalEmail,researchTopic:this.postDoc.researchTopic,supervisorName:l,resourcesProvided:m,fundingSource:i,startYear:this.postDoc.startYear,endingYear:this.postDoc.endingYear,startMonth:this.postDoc.startMonth,endMonth:this.postDoc.endMonth,institutionName:this.postDoc.institutionName,comments:this.postDoc.comments,progressReport:this.postDoc.progressReport};v.post("api/postDoc",s).then(a=>{this.toast.success("Postdoctoral fellow saved successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(a=>{a.response?a.response.status===422?this.toast.warning(`Validation error: ${a.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):a.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${a.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):a.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${a.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},I={name:"modal"},J={class:"modal-mask"},j={class:"modal-wrapper"},G={class:"modal-container"},z={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},K={for:""},W=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),X=[W],Q={key:0,class:"col-5 m-0"},Z={class:"fw-normal",style:{"font-size":"14px"}},x=e("option",{disabled:"",value:""},"Select a researcher",-1),ee=["value"],oe={class:"modal-body"},te={class:"row"},se={class:"col-md-6"},re=e("label",{for:""},"Personal email:",-1),ne=e("label",{for:"",style:{color:"orange"}},"*",-1),ie=e("br",null,null,-1),le={class:"col-md-6"},ae=e("label",{for:""},"Research topic:",-1),ce=e("label",{for:"",style:{color:"orange"}},"*",-1),ue=e("br",null,null,-1),de=e("br",null,null,-1),he={class:"row"},pe={class:"col-md-3"},fe=e("label",{for:""},"Name of postdoc fellow:",-1),me=e("label",{for:"",style:{color:"orange"}},"*",-1),ge=e("br",null,null,-1),be={class:"col-md-3"},_e=e("label",{for:""},"Gender: ",-1),De=e("label",{for:"",style:{color:"orange"}},"*",-1),ve=e("br",null,null,-1),$e=e("option",{disabled:"",value:""},"Select a Gender",-1),ye=e("option",{value:"Male"},"Male",-1),Pe=e("option",{value:"Female"},"Female",-1),we=e("option",{value:"Non binary"},"Non binary",-1),Oe=e("option",{value:"Other"},"Other",-1),ke=[$e,ye,Pe,we,Oe],Be={class:"col-md-3"},Ce=e("label",{for:""},"Identification: ",-1),Me=e("label",{for:"",style:{color:"orange"}},"*",-1),Te=e("br",null,null,-1),Se=e("option",{disabled:"",value:""},"Select One",-1),Ye=e("option",{value:"run"},"Run",-1),Ne=e("option",{value:"passport"},"Passport",-1),Re=[Se,Ye,Ne],Fe={key:0,class:"col-md-3"},Ee=e("label",{for:""},"Run: ",-1),Ve=e("label",{for:"",style:{color:"orange"}},"*",-1),He=e("br",null,null,-1),Ue={key:1,class:"col-md-3"},Ae=e("label",{for:""},"Passport: ",-1),qe=e("label",{for:"",style:{color:"orange"}},"*",-1),Le=e("br",null,null,-1),Ie=e("br",null,null,-1),Je={class:"row"},je={class:"col-md-3"},Ge=e("label",{for:""},"Start year: ",-1),ze=e("label",{for:"",style:{color:"orange"}},"*",-1),Ke=e("br",null,null,-1),We=e("option",{disabled:"",value:""},"Select a year",-1),Xe=["value"],Qe={class:"col-md-3"},Ze=e("label",{for:"selectMonth"},"Start month:",-1),xe=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),eo=e("br",null,null,-1),oo=e("option",{disabled:"",value:""},"Select a month",-1),to=e("option",{value:"January"},"January",-1),so=e("option",{value:"February"},"February",-1),ro=e("option",{value:"March"},"March",-1),no=e("option",{value:"April"},"April",-1),io=e("option",{value:"May"},"May",-1),lo=e("option",{value:"June"},"June",-1),ao=e("option",{value:"July"},"July",-1),co=e("option",{value:"August"},"August",-1),uo=e("option",{value:"September"},"September",-1),ho=e("option",{value:"October"},"October",-1),po=e("option",{value:"November"},"November",-1),fo=e("option",{value:"December"},"December",-1),mo=[oo,to,so,ro,no,io,lo,ao,co,uo,ho,po,fo],go={class:"col-md-3"},bo=e("label",{for:""},"Ending year: ",-1),_o=e("label",{for:"",style:{color:"orange"}},"*",-1),Do=e("br",null,null,-1),vo=e("option",{disabled:"",value:""},"Select a year",-1),$o=["value"],yo={class:"col-md-3"},Po=e("label",{for:"selectMonth"},"Ending month:",-1),wo=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),Oo=e("br",null,null,-1),ko=e("option",{disabled:"",value:""},"Select a month",-1),Bo=e("option",{value:"January"},"January",-1),Co=e("option",{value:"February"},"February",-1),Mo=e("option",{value:"March"},"March",-1),To=e("option",{value:"April"},"April",-1),So=e("option",{value:"May"},"May",-1),Yo=e("option",{value:"June"},"June",-1),No=e("option",{value:"July"},"July",-1),Ro=e("option",{value:"August"},"August",-1),Fo=e("option",{value:"September"},"September",-1),Eo=e("option",{value:"October"},"October",-1),Vo=e("option",{value:"November"},"November",-1),Ho=e("option",{value:"December"},"December",-1),Uo=[ko,Bo,Co,Mo,To,So,Yo,No,Ro,Fo,Eo,Vo,Ho],Ao=e("br",null,null,-1),qo={class:"row"},Lo={class:"col-md-6"},Io=e("label",{for:""},"Supervisor name:",-1),Jo=e("label",{for:"",style:{color:"orange"}},"*",-1),jo={class:"col-md-6"},Go=e("label",{for:""},"Resources provided by the center:",-1),zo=e("label",{for:"",style:{color:"orange"}},"*",-1),Ko=e("br",null,null,-1),Wo={class:"row"},Xo={class:"col-md-6"},Qo=e("label",{for:""},"Institution where it was inserted:",-1),Zo=e("br",null,null,-1),xo={class:"col-md-6"},et=e("label",{for:""},"Funding source:",-1),ot=e("label",{for:"",style:{color:"orange"}},"*",-1),tt=e("br",null,null,-1),st={class:"row"},rt={class:"col-md-6"},nt=e("label",{for:""},"Comments:",-1),it=e("br",null,null,-1),lt={class:"modal-footer"},at={class:"form-check-label"},ct=["disabled"],ut=["disabled"];function dt(o,t,h,n,r,l){const m=$("Multiselect"),i=$("modalconfirmacion"),f=$("modalalerta"),u=$("modalProgressYear");return c(),O(U,{name:"modalcrear"},{default:V(()=>[e("div",I,[e("div",J,[e("div",j,[e("div",G,[e("div",z,[C(o.$slots,"header",{},()=>[w(" New Postdoctoral fellow ")]),e("label",K,[w("Progress year: "+b(o.postDoc.progressReport)+"    ",1),e("a",{class:"btn",onClick:t[0]||(t[0]=s=>o.showModalProgress=!0)},X)]),o.is("Administrator")?(c(),d("label",Q,[w(" Researcher: "),e("label",Z,[p(e("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=s=>o.idResearcher=s)},[x,(c(!0),d(k,null,B(o.usuarios,s=>(c(),d("option",{key:s.id,value:s.id},b(s.name),9,ee))),128))],512),[[_,o.idResearcher]])])])):y("",!0),e("a",{class:"btn btn-closed",onClick:t[2]||(t[2]=s=>o.$emit("close")),ref:"closeBtn"},"X",512)]),e("div",oe,[C(o.$slots,"body",{},()=>[e("div",te,[e("div",se,[re,ne,ie,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>o.postDoc.personalEmail=s)},null,512),[[D,o.postDoc.personalEmail]])]),e("div",le,[ae,ce,ue,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=s=>o.postDoc.researchTopic=s)},null,512),[[D,o.postDoc.researchTopic]])])]),de,e("div",he,[e("div",pe,[fe,me,ge,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=s=>o.postDoc.nameOfPostdoc=s)},null,512),[[D,o.postDoc.nameOfPostdoc]])]),e("div",be,[_e,De,ve,p(e("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=s=>o.postDoc.gender=s)},ke,512),[[_,o.postDoc.gender]])]),e("div",Be,[Ce,Me,Te,p(e("select",{class:"form-select",onChange:t[7]||(t[7]=s=>{o.postDoc.run="",o.postDoc.passport=""}),"onUpdate:modelValue":t[8]||(t[8]=s=>o.postDoc.identification=s)},Re,544),[[_,o.postDoc.identification]])]),o.postDoc.identification=="run"?(c(),d("div",Fe,[Ee,Ve,He,p(e("input",{type:"text",class:"form-control",onInput:t[9]||(t[9]=(...s)=>l.validateInput&&l.validateInput(...s)),onKeypress:t[10]||(t[10]=(...s)=>l.isNumberOrDash&&l.isNumberOrDash(...s)),onKeyup:t[11]||(t[11]=s=>l.checkRut()),"onUpdate:modelValue":t[12]||(t[12]=s=>o.postDoc.run=s)},null,544),[[D,o.postDoc.run]])])):y("",!0),o.postDoc.identification=="passport"?(c(),d("div",Ue,[Ae,qe,Le,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=s=>o.postDoc.passport=s)},null,512),[[D,o.postDoc.passport]])])):y("",!0)]),Ie,e("div",Je,[e("div",je,[Ge,ze,Ke,p(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":t[14]||(t[14]=s=>o.postDoc.startYear=s)},[We,(c(!0),d(k,null,B(o.years,s=>(c(),d("option",{key:s,value:s},b(s),9,Xe))),128))],512),[[_,o.postDoc.startYear]])]),e("div",Qe,[Ze,xe,eo,p(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":t[15]||(t[15]=s=>o.postDoc.startMonth=s)},mo,512),[[_,o.postDoc.startMonth]])]),e("div",go,[bo,_o,Do,p(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":t[16]||(t[16]=s=>o.postDoc.endingYear=s)},[vo,(c(!0),d(k,null,B(o.years,s=>(c(),d("option",{key:s,value:s},b(s),9,$o))),128))],512),[[_,o.postDoc.endingYear]])]),e("div",yo,[Po,wo,Oo,p(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":t[17]||(t[17]=s=>o.postDoc.endMonth=s)},Uo,512),[[_,o.postDoc.endMonth]])])]),Ao,e("div",qo,[e("div",Lo,[Io,Jo,P(m,{placeholder:"Select the options",modelValue:o.postDoc.supervisorName,"onUpdate:modelValue":t[18]||(t[18]=s=>o.postDoc.supervisorName=s),searchable:!0,"close-on-select":!1,createTag:!0,options:o.researchers,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])]),e("div",jo,[Go,zo,P(m,{placeholder:"Select the options",modelValue:o.postDoc.resourcesProvided,"onUpdate:modelValue":t[19]||(t[19]=s=>o.postDoc.resourcesProvided=s),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:o.options2,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])]),Ko,e("div",Wo,[e("div",Xo,[Qo,Zo,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[20]||(t[20]=s=>o.postDoc.institutionName=s)},null,512),[[D,o.postDoc.institutionName]])]),e("div",xo,[et,ot,P(m,{placeholder:"Select the options",modelValue:o.postDoc.fundingSource,"onUpdate:modelValue":t[21]||(t[21]=s=>o.postDoc.fundingSource=s),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:o.options3,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])]),tt,e("div",st,[e("div",rt,[nt,it,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[22]||(t[22]=s=>o.postDoc.comments=s)},null,512),[[D,o.postDoc.comments]])])])])]),e("div",lt,[C(o.$slots,"footer",{},()=>[e("label",at,[p(e("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":t[23]||(t[23]=s=>o.draft=s)},null,512),[[H,o.draft]]),w(" Save as a draft")]),o.draft==!1?(c(),d("a",{key:0,class:"btn btn-continue float-end",onClick:t[24]||(t[24]=s=>l.createPostDoc()),disabled:o.buttonDisable},b(o.buttonText),9,ct)):(c(),d("a",{key:1,class:"btn btn-continue float-end",onClick:t[25]||(t[25]=s=>l.guardarBorrador()),disabled:o.buttonDisable}," Save draft ",8,ut))])]),P(i,{ref:"confirmation"},null,512),P(f,{ref:"alert"},null,512),o.showModalProgress?(c(),O(u,{key:0,progressYear:o.postDoc.progressReport,onClose:t[26]||(t[26]=s=>o.showModalProgress=!1),onSubmit:l.handleFormSubmit1},null,8,["progressYear","onSubmit"])):y("",!0)])])])])]),_:3})}const ht=N(L,[["render",dt]]),pt={components:{modalProgressYear:F,Multiselect:E,modalconfirmacion:S,modalalerta:Y},mixins:[T],data:()=>({postDoc:{nameOfPostdoc:"",identification:"",passport:"",run:"",gender:"",researchTopic:"",personalEmail:"",supervisorName:null,resourcesProvided:null,fundingSource:null,startYear:"",startMonth:"",endMonth:"",endingYear:"",institutionName:"",comments:"",progressReport:""},options3:["Basal Financing Program Funding","Other sources"],options2:["Equipment","Information","Infrastructure","Other"],id:"",draft:!1,showModalProgress:!1,researchers:[],usuarios:[],idResearcher:"",buttonDisable:!1,errors:[],buttonText:"Edit fellow"}),mounted(){this.getUsuarios(),this.getUsuarios2()},props:{postDoc1:Object},created(){if(this.id=this.postDoc1.id,this.idResearcher=this.postDoc1.idUsuario,this.postDoc.nameOfPostdoc=this.postDoc1.nameOfPostdoc,this.postDoc.identification=this.postDoc1.identification,this.postDoc1.identification=="run"?this.postDoc.run=this.postDoc1.runOrPassport:this.postDoc.passport=this.postDoc1.runOrPassport,this.postDoc.personalEmail=this.postDoc1.personalEmail,this.postDoc.gender=this.postDoc1.gender,this.postDoc.researchTopic=this.postDoc1.researchTopic,this.postDoc.startYear=this.postDoc1.startYear,this.postDoc.endingYear=this.postDoc1.endingYear,this.postDoc.startMonth=this.postDoc1.startMonth,this.postDoc.endMonth=this.postDoc1.endMonth,this.postDoc.institutionName=this.postDoc1.institutionName,this.postDoc.comments=this.postDoc1.comments,this.postDoc.progressReport=this.postDoc1.progressReport,this.postDoc1.supervisorName!=null){const n=this.postDoc1.supervisorName.split(",");this.postDoc.supervisorName=n.map((r,l)=>(r=r.trim(),r.endsWith(".")&&(r=r.slice(0,-1)),{value:r,name:r}))}if(this.postDoc1.fundingSource!=null){const n=this.postDoc1.fundingSource.split(",");this.postDoc.fundingSource=n.map((r,l)=>(r=r.trim(),r.endsWith(".")&&(r=r.slice(0,-1)),{value:r,name:r}))}if(this.postDoc1.resourcesProvided!=null){const n=this.postDoc1.resourcesProvided.split(",");this.postDoc.resourcesProvided=n.map((r,l)=>(r=r.trim(),r.endsWith(".")&&(r=r.slice(0,-1)),{value:r,name:r}))}const o=new Date().getFullYear(),t=2e3,h=o+1;this.years=Array.from({length:h-t+1},(n,r)=>t+r),this.selectedYear=o,this.years.sort((n,r)=>r-n)},methods:{handleFormSubmit1(o){this.postDoc.progressReport=o},getUsuarios(){v.get("api/researchers").then(o=>{this.researchers=o.data}).catch(o=>console.log(o))},getUsuarios2(){v.get("api/usuarios").then(o=>{this.usuarios=o.data.sort((t,h)=>t.name.localeCompare(h.name))}).catch(o=>console.log(o))},checkRut(){if(this.postDoc.run!=""){this.postDoc.run.replace(".","");var o=this.postDoc.run.replace(".","");o=o.replace("-","");var t=o.slice(0,-1),h=o.slice(-1).toUpperCase();this.postDoc.run=t+"-"+h}},validateInput(){this.postDoc.run=this.postDoc.run.replace(/[^0-9Kk\-]/g,"").replace(/(\-)\-+/g,"$1")},isNumberOrDash(o){const t=o.which?o.which:o.keyCode;(t===45&&this.postDoc.run.indexOf("-")!==-1||t>31&&t<48||t>57&&t<75||t>75&&t<107||t>107&&t!==109)&&o.preventDefault()},onInput2(o){const t=o.target;this.postDoc.endingYear=t.value.slice(0,4)},onInput1(o){const t=o.target;this.postDoc.startYear=t.value.slice(0,4)},calculateYears(){const t=new Date().getFullYear()-20;this.years=Array.from({length:21},(h,n)=>t+n)},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Edit draft",message:"¿Are you sure you want to edit this Postdoctoral fellow as a draft? this action cannot be undone.",okButton:"Edit",cancelButton:"Return"})){var t="";this.postDoc.identification=="run"?t=this.formatoRut(this.postDoc.run):t=this.postDoc.passport;var h="";this.postDoc.supervisorName!==null&&this.postDoc.supervisorName.length!==0&&this.postDoc.supervisorName.forEach((i,f)=>{h+=i.name,f===this.postDoc.supervisorName.length-1?h+=".":h+=", "});var n="";this.postDoc.resourcesProvided!==null&&this.postDoc.resourcesProvided.length!==0&&this.postDoc.resourcesProvided.forEach((i,f)=>{n+=i.name,f===this.postDoc.resourcesProvided.length-1?n+=".":n+=", "});var r="";this.postDoc.fundingSource!==null&&this.postDoc.fundingSource.length!==0&&this.postDoc.fundingSource.forEach((i,f)=>{r+=i.name,f===this.postDoc.fundingSource.length-1?r+=".":r+=", "});var l="";this.idResearcher!=""?l=this.idResearcher:l=this.userID;let m={idUsuario:l,status:"Draft",nameOfPostdoc:this.postDoc.nameOfPostdoc,identification:this.postDoc.identification,runOrPassport:t,gender:this.postDoc.gender,researchTopic:this.postDoc.researchTopic,personalEmail:this.postDoc.personalEmail,supervisorName:h,resourcesProvided:n,fundingSource:r,startYear:this.postDoc.startYear,endingYear:this.postDoc.endingYear,startMonth:this.postDoc.startMonth,endMonth:this.postDoc.endMonth,institutionName:this.postDoc.institutionName,comments:this.postDoc.comments,progressReport:this.postDoc.progressReport};v.put(`api/postDoc/${this.id}`,m).then(i=>{this.toast.success("Draft edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(i=>{i.response?i.response.status===422?this.toast.warning(`Validation error: ${i.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):i.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${i.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):i.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${i.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}},cerrarModal(){const o=this.$refs.closeBtn;this.$emit("recarga"),o.click()},capitalizeFirstLetter(o){return o.charAt(0).toUpperCase()+o.slice(1)},async createPostDoc(){this.errors=[];const o=["institutionName","comments"];for(const s in this.postDoc)(this.postDoc[s]===""||this.postDoc[s]===0||this.postDoc[s]==null||this.postDoc[s]==[])&&(this.postDoc.identification==""&&s=="run"||this.postDoc.identification==""&&s=="passport"||this.postDoc.identification=="run"&&s=="passport"||this.postDoc.identification=="passport"&&s=="run"||o.includes(s)||this.errors.push(s));if(this.postDoc.identification=="run"&&this.postDoc.run!=""){var t=this.validarRut(this.postDoc.run);t==!1&&this.errors.push("invalidRut")}let h={id:this.id,nameOfPostdoc:this.postDoc.nameOfPostdoc,identification:this.postDoc.identification,runOrPassport:l,gender:this.postDoc.gender,personalEmail:this.postDoc.personalEmail,researchTopic:this.postDoc.researchTopic,supervisorName:m,resourcesProvided:i,fundingSource:f,startYear:this.postDoc.startYear,endingYear:this.postDoc.endingYear,startMonth:this.postDoc.startMonth,endMonth:this.postDoc.endMonth,institutionName:this.postDoc.institutionName,comments:this.postDoc.comments,progressReport:this.postDoc.progressReport};var n=await v.post("../api/verifyPostdoc",h).then((function(s){return s.data}).bind(this)).catch(function(s){console.log(s)});n>0&&this.errors.push("duplicated");var r="";if(this.errors.length!=0&&(this.errors.forEach(s=>{s=="nameOfPostdoc"?r=r+`The field Name of postdoc is required
`:s=="researchTopic"?r=r+`The field Research topic is required
`:s=="supervisorName"?r=r+`The field Supervisor name is required
`:s=="personalEmail"?r=r+`The field Personal email is required
`:s=="resourcesProvided"?r=r+`The field Resources provided is required
`:s=="invalidRut"?r=r+`The entered Run is invalid
`:s=="fundingSource"?r=r+`The field Funding source is required
`:s=="startYear"?r=r+`The field Start year is required
`:s=="startMonth"?r=r+`The field Start month is required
`:s=="endingYear"?r=r+`The field Ending year is required
`:s=="endMonth"?r=r+`The field Ending month is required
`:s=="institutionName"?r=r+`The field Institution where it was inserted is required
`:s=="duplicated"?r=r+`There is already a post with the same data, please try again.
`:r=r+"The field "+this.capitalizeFirstLetter(s)+` is required
`}),this.toast.warning(r,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Edit Postdoctoral fellow",message:"¿Are you sure you want to edit this Postdoctoral fellow?.",okButton:"Edit",cancelButton:"Return"})){var l="";this.postDoc.identification=="run"?l=this.formatoRut(this.postDoc.run):l=this.postDoc.passport;var m="";this.postDoc.supervisorName!==null&&this.postDoc.supervisorName.length!==0&&this.postDoc.supervisorName.forEach((g,M)=>{m+=g.name,M===this.postDoc.supervisorName.length-1?m+=".":m+=", "});var i="";this.postDoc.resourcesProvided!==null&&this.postDoc.resourcesProvided.length!==0&&this.postDoc.resourcesProvided.forEach((g,M)=>{i+=g.name,M===this.postDoc.resourcesProvided.length-1?i+=".":i+=", "});var f="";this.postDoc.fundingSource!==null&&this.postDoc.fundingSource.length!==0&&this.postDoc.fundingSource.forEach((g,M)=>{f+=g.name,M===this.postDoc.fundingSource.length-1?f+=".":f+=", "});var u="";this.idResearcher!=""?u=this.idResearcher:u=this.userID;let a={idUsuario:u,status:"Finished",nameOfPostdoc:this.postDoc.nameOfPostdoc,identification:this.postDoc.identification,runOrPassport:l,gender:this.postDoc.gender,personalEmail:this.postDoc.personalEmail,researchTopic:this.postDoc.researchTopic,supervisorName:m,resourcesProvided:i,fundingSource:f,startYear:this.postDoc.startYear,endingYear:this.postDoc.endingYear,startMonth:this.postDoc.startMonth,endMonth:this.postDoc.endMonth,institutionName:this.postDoc.institutionName,comments:this.postDoc.comments,progressReport:this.postDoc.progressReport};v.put(`api/postDoc/${this.id}`,a).then(g=>{this.toast.success("Postdoctoral fellow edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(g=>{g.response?g.response.status===422?this.toast.warning(`Validation error: ${g.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):g.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${g.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):g.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${g.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},ft={name:"modal"},mt={class:"modal-mask"},gt={class:"modal-wrapper"},bt={class:"modal-container"},_t={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},Dt={for:""},vt=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),$t=[vt],yt={key:0,class:"col-5 m-0"},Pt={class:"fw-normal",style:{"font-size":"14px"}},wt=e("option",{disabled:"",value:""},"Select a researcher",-1),Ot=["value"],kt={class:"modal-body"},Bt={class:"row"},Ct={class:"col-md-6"},Mt=e("label",{for:""},"Personal email:",-1),Tt=e("label",{for:"",style:{color:"orange"}},"*",-1),St=e("br",null,null,-1),Yt={class:"col-md-6"},Nt=e("label",{for:""},"Research topic:",-1),Rt=e("label",{for:"",style:{color:"orange"}},"*",-1),Ft=e("br",null,null,-1),Et=e("br",null,null,-1),Vt={class:"row"},Ht={class:"col-md-3"},Ut=e("label",{for:""},"Name of postdoc fellow:",-1),At=e("label",{for:"",style:{color:"orange"}},"*",-1),qt=e("br",null,null,-1),Lt={class:"col-md-3"},It=e("label",{for:""},"Gender: ",-1),Jt=e("label",{for:"",style:{color:"orange"}},"*",-1),jt=e("br",null,null,-1),Gt=e("option",{disabled:"",value:null},"Select a Gender",-1),zt=e("option",{value:"Male"},"Male",-1),Kt=e("option",{value:"Female"},"Female",-1),Wt=e("option",{value:"Non binary"},"Non binary",-1),Xt=e("option",{value:"Other"},"Other",-1),Qt=[Gt,zt,Kt,Wt,Xt],Zt={class:"col-md-3"},xt=e("label",{for:""},"Identification: ",-1),es=e("label",{for:"",style:{color:"orange"}},"*",-1),os=e("br",null,null,-1),ts=e("option",{disabled:"",value:null},"Select One",-1),ss=e("option",{value:"run"},"Run",-1),rs=e("option",{value:"passport"},"Passport",-1),ns=[ts,ss,rs],is={key:0,class:"col-md-3"},ls=e("label",{for:""},"Run: ",-1),as=e("label",{for:"",style:{color:"orange"}},"*",-1),cs=e("br",null,null,-1),us={key:1,class:"col-md-3"},ds=e("label",{for:""},"Passport: ",-1),hs=e("label",{for:"",style:{color:"orange"}},"*",-1),ps=e("br",null,null,-1),fs=e("br",null,null,-1),ms={class:"row"},gs={class:"col-md-3"},bs=e("label",{for:""},"Start year: ",-1),_s=e("label",{for:"",style:{color:"orange"}},"*",-1),Ds=e("br",null,null,-1),vs=e("option",{disabled:"",value:null},"Select a year",-1),$s=["value"],ys={class:"col-md-3"},Ps=e("label",{for:"selectMonth"},"Start month:",-1),ws=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),Os=e("br",null,null,-1),ks=e("option",{disabled:"",value:null},"Select a month",-1),Bs=e("option",{value:"January"},"January",-1),Cs=e("option",{value:"February"},"February",-1),Ms=e("option",{value:"March"},"March",-1),Ts=e("option",{value:"April"},"April",-1),Ss=e("option",{value:"May"},"May",-1),Ys=e("option",{value:"June"},"June",-1),Ns=e("option",{value:"July"},"July",-1),Rs=e("option",{value:"August"},"August",-1),Fs=e("option",{value:"September"},"September",-1),Es=e("option",{value:"October"},"October",-1),Vs=e("option",{value:"November"},"November",-1),Hs=e("option",{value:"December"},"December",-1),Us=[ks,Bs,Cs,Ms,Ts,Ss,Ys,Ns,Rs,Fs,Es,Vs,Hs],As={class:"col-md-3"},qs=e("label",{for:""},"Ending year: ",-1),Ls=e("label",{for:"",style:{color:"orange"}},"*",-1),Is=e("br",null,null,-1),Js=e("option",{disabled:"",value:null},"Select a year",-1),js=["value"],Gs={class:"col-md-3"},zs=e("label",{for:"selectMonth"},"End month:",-1),Ks=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),Ws=e("br",null,null,-1),Xs=e("option",{disabled:"",value:null},"Select a month",-1),Qs=e("option",{value:"January"},"January",-1),Zs=e("option",{value:"February"},"February",-1),xs=e("option",{value:"March"},"March",-1),er=e("option",{value:"April"},"April",-1),or=e("option",{value:"May"},"May",-1),tr=e("option",{value:"June"},"June",-1),sr=e("option",{value:"July"},"July",-1),rr=e("option",{value:"August"},"August",-1),nr=e("option",{value:"September"},"September",-1),ir=e("option",{value:"October"},"October",-1),lr=e("option",{value:"November"},"November",-1),ar=e("option",{value:"December"},"December",-1),cr=[Xs,Qs,Zs,xs,er,or,tr,sr,rr,nr,ir,lr,ar],ur=e("br",null,null,-1),dr={class:"row"},hr={class:"col-md-6"},pr=e("label",{for:""},"Supervisor name:",-1),fr=e("label",{for:"",style:{color:"orange"}},"*",-1),mr={class:"col-md-6"},gr=e("label",{for:""},"Resources provided by the center:",-1),br=e("label",{for:"",style:{color:"orange"}},"*",-1),_r=e("br",null,null,-1),Dr={class:"row"},vr={class:"col-md-6"},$r=e("label",{for:""},"Institution where it was inserted:",-1),yr=e("br",null,null,-1),Pr={class:"col-md-6"},wr=e("label",{for:""},"Funding source:",-1),Or=e("label",{for:"",style:{color:"orange"}},"*",-1),kr=e("br",null,null,-1),Br={class:"row"},Cr={class:"col-md-6"},Mr=e("label",{for:""},"Comments:",-1),Tr=e("br",null,null,-1),Sr={class:"modal-footer"},Yr={class:"form-check-label"},Nr=["disabled"],Rr=["disabled"];function Fr(o,t,h,n,r,l){const m=$("Multiselect"),i=$("modalconfirmacion"),f=$("modalalerta"),u=$("modalProgressYear");return c(),O(U,{name:"modalcrear"},{default:V(()=>[e("div",ft,[e("div",mt,[e("div",gt,[e("div",bt,[e("div",_t,[C(o.$slots,"header",{},()=>[w(" Edit Postdoctoral fellow ")]),e("label",Dt,[w("Progress year: "+b(o.postDoc.progressReport)+"    ",1),e("a",{class:"btn",onClick:t[0]||(t[0]=s=>o.showModalProgress=!0)},$t)]),o.is("Administrator")?(c(),d("label",yt,[w(" Researcher: "),e("label",Pt,[p(e("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=s=>o.idResearcher=s)},[wt,(c(!0),d(k,null,B(o.usuarios,s=>(c(),d("option",{key:s.id,value:s.id},b(s.name),9,Ot))),128))],512),[[_,o.idResearcher]])])])):y("",!0),e("a",{class:"btn btn-closed",onClick:t[2]||(t[2]=s=>o.$emit("close")),ref:"closeBtn"},"X",512)]),e("div",kt,[C(o.$slots,"body",{},()=>[e("div",Bt,[e("div",Ct,[Mt,Tt,St,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>o.postDoc.personalEmail=s)},null,512),[[D,o.postDoc.personalEmail]])]),e("div",Yt,[Nt,Rt,Ft,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=s=>o.postDoc.researchTopic=s)},null,512),[[D,o.postDoc.researchTopic]])])]),Et,e("div",Vt,[e("div",Ht,[Ut,At,qt,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=s=>o.postDoc.nameOfPostdoc=s)},null,512),[[D,o.postDoc.nameOfPostdoc]])]),e("div",Lt,[It,Jt,jt,p(e("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=s=>o.postDoc.gender=s)},Qt,512),[[_,o.postDoc.gender]])]),e("div",Zt,[xt,es,os,p(e("select",{class:"form-select",onChange:t[7]||(t[7]=s=>{o.postDoc.run="",o.postDoc.passport=""}),"onUpdate:modelValue":t[8]||(t[8]=s=>o.postDoc.identification=s)},ns,544),[[_,o.postDoc.identification]])]),o.postDoc.identification=="run"?(c(),d("div",is,[ls,as,cs,p(e("input",{type:"text",class:"form-control",onInput:t[9]||(t[9]=(...s)=>l.validateInput&&l.validateInput(...s)),onKeypress:t[10]||(t[10]=(...s)=>l.isNumberOrDash&&l.isNumberOrDash(...s)),onKeyup:t[11]||(t[11]=s=>l.checkRut()),"onUpdate:modelValue":t[12]||(t[12]=s=>o.postDoc.run=s)},null,544),[[D,o.postDoc.run]])])):y("",!0),o.postDoc.identification=="passport"?(c(),d("div",us,[ds,hs,ps,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=s=>o.postDoc.passport=s)},null,512),[[D,o.postDoc.passport]])])):y("",!0)]),fs,e("div",ms,[e("div",gs,[bs,_s,Ds,p(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":t[14]||(t[14]=s=>o.postDoc.startYear=s)},[vs,(c(!0),d(k,null,B(o.years,s=>(c(),d("option",{key:s,value:s},b(s),9,$s))),128))],512),[[_,o.postDoc.startYear]])]),e("div",ys,[Ps,ws,Os,p(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":t[15]||(t[15]=s=>o.postDoc.startMonth=s)},Us,512),[[_,o.postDoc.startMonth]])]),e("div",As,[qs,Ls,Is,p(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":t[16]||(t[16]=s=>o.postDoc.endingYear=s)},[Js,(c(!0),d(k,null,B(o.years,s=>(c(),d("option",{key:s,value:s},b(s),9,js))),128))],512),[[_,o.postDoc.endingYear]])]),e("div",Gs,[zs,Ks,Ws,p(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":t[17]||(t[17]=s=>o.postDoc.endMonth=s)},cr,512),[[_,o.postDoc.endMonth]])])]),ur,e("div",dr,[e("div",hr,[pr,fr,P(m,{placeholder:"Select the options",modelValue:o.postDoc.supervisorName,"onUpdate:modelValue":t[18]||(t[18]=s=>o.postDoc.supervisorName=s),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:o.researchers,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])]),e("div",mr,[gr,br,P(m,{placeholder:"Select the options",modelValue:o.postDoc.resourcesProvided,"onUpdate:modelValue":t[19]||(t[19]=s=>o.postDoc.resourcesProvided=s),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:o.options2,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])]),_r,e("div",Dr,[e("div",vr,[$r,yr,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[20]||(t[20]=s=>o.postDoc.institutionName=s)},null,512),[[D,o.postDoc.institutionName]])]),e("div",Pr,[wr,Or,P(m,{placeholder:"Select the options",modelValue:o.postDoc.fundingSource,"onUpdate:modelValue":t[21]||(t[21]=s=>o.postDoc.fundingSource=s),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:o.options3,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])]),kr,e("div",Br,[e("div",Cr,[Mr,Tr,p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[22]||(t[22]=s=>o.postDoc.comments=s)},null,512),[[D,o.postDoc.comments]])])])])]),e("div",Sr,[C(o.$slots,"footer",{},()=>[e("label",Yr,[p(e("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":t[23]||(t[23]=s=>o.draft=s)},null,512),[[H,o.draft]]),w(" Edit as a draft")]),o.draft==!1?(c(),d("a",{key:0,class:"btn btn-continue float-end",onClick:t[24]||(t[24]=s=>l.createPostDoc()),disabled:o.buttonDisable},b(o.buttonText),9,Nr)):(c(),d("a",{key:1,class:"btn btn-continue float-end",onClick:t[25]||(t[25]=s=>l.guardarBorrador()),disabled:o.buttonDisable}," Edit draft ",8,Rr))])]),P(i,{ref:"confirmation"},null,512),P(f,{ref:"alert"},null,512),o.showModalProgress?(c(),O(u,{key:0,progressYear:o.postDoc.progressReport,onClose:t[26]||(t[26]=s=>o.showModalProgress=!1),onSubmit:l.handleFormSubmit1},null,8,["progressYear","onSubmit"])):y("",!0)])])])])]),_:3})}const Er=N(pt,[["render",Fr]]),Vr={components:{modalver:A,modalcrear:ht,modaleditar:Er,modalconfirmacion:S,modalalerta:Y},mixins:[T],data(){return{postDocs:null,postDoc:null,showDetailsPostDoc:!1,showNewPostDoc:!1,showEditPostDoc:!1,postDocEdit:null,mostrarTabla:!1,mostrarCarga:!0,table:null}},created(){this.getPostDoc(this.userID)},methods:{verPostDoc(o){this.postDoc=o,this.showDetailsPostDoc=!0},getPostDoc(o){v.get(`api/postDoc/${o}`).then(t=>{this.postDocs=t.data,this.table!=null&&(this.table.clear(),this.table.destroy()),this.crearTabla("#myTablePostDoc")}).catch(t=>console.log(t))},recargarTabla(o){this.mostrarCarga=!0,o=="General"?(this.postDocs=null,this.getPostDoc(this.userID)):this.crearTabla("#myTablePostDoc")},editPostDoc(o){this.postDocEdit=o,this.showEditPostDoc=!0},async deletePostDoc(o){await this.$refs.confirmation.show({title:"Delete Postdoctoral fellow",message:"¿Are you sure you want to delete this Postdoctoral fellow?.",okButton:"Delete",cancelButton:"Return"})&&v.delete(`api/postDoc/${o}`).then(h=>{this.toast.success("Postdoctoral fellow successfully removed!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.recargarTabla("General")}).catch(h=>console.log(h))}}},Hr={class:"row mt-4 mx-4"},Ur={class:"col-12"},Ar={class:"card mb-4"},qr={class:"row pb-0 p-4"},Lr={class:"col-12"},Ir={class:"d-flex justify-content-end"},Jr=e("i",{class:"fa-solid fa-rotate"},null,-1),jr=[Jr],Gr={class:"card-body px-0 pt-0 pb-2",style:{"min-height":"400px"}},zr={class:"container"},Kr={class:"table-responsive p-0"},Wr={class:"loader-sm"},Xr={class:"table align-items-center mb-0",id:"myTablePostDoc"},Qr=e("thead",null,[e("tr",{style:{color:"black"}},[e("th",{style:{"min-width":"16px"}}),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Status"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"User"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Name of Postdoc"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Supervisor Name"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Research Topic"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Start Year"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Ending Year")])],-1),Zr=e("td",null,null,-1),xr={class:"text-sm font-weight-bolder mb-0",style:{color:"black"}},en={class:"align-middle text-end"},on={class:"d-flex px-3 py-1 justify-content-center align-items-center"},tn=["onClick"],sn=e("i",{class:"fa fa-fw fa-edit"},null,-1),rn=[sn],nn=["onClick"],ln=e("i",{class:"fa-regular fa-eye"},null,-1),an=[ln],cn=["onClick"],un=e("i",{class:"fa fa-fw fa-trash"},null,-1),dn=[un],hn={key:0,class:"text-sm font-weight-bolder mb-0",style:{color:"#878686"}},pn={key:1,class:"text-sm font-weight-bolder mb-0",style:{color:"#28A745"}},fn={class:"text-sm mb-0"},mn={key:0,class:"text-sm mb-0"},gn={key:1,class:"text-sm mb-0"},bn={key:0,class:"text-sm mb-0"},_n={key:1,class:"text-sm mb-0"},Dn={key:0,class:"text-sm mb-0"},vn={key:1,class:"text-sm mb-0 truncate-text"},$n={key:0,class:"text-sm mb-0"},yn={key:1,class:"text-sm mb-0"},Pn={key:0,class:"text-sm mb-0"},wn={key:1,class:"text-sm mb-0"},On=q('<div class="row"><div class="col-3"><label style="font-weight:500;"> These buttons use the elements selected in the table, if none exist, it will select all the records. </label></div><div class="col-auto"><label title="To select a single record from the table, just do \r Click on the box in the first column to select \r several consecutive hold SHIFT, to select several \r non-consecutive hold CTRL."><span class="badge bg-dark-grey fs-10">?</span></label></div></div>',1);function kn(o,t,h,n,r,l){const m=$("modalconfirmacion"),i=$("modalalerta"),f=$("modalver"),u=$("modaleditar"),s=$("modalcrear");return c(),d("div",Hr,[e("div",Ur,[e("div",Ar,[e("div",qr,[e("div",Lr,[e("div",Ir,[e("a",{class:"btn btn-spacing btn-continue",id:"show-modal1",onClick:t[0]||(t[0]=a=>r.showNewPostDoc=!0)},"New Fellow"),w("   "),e("a",{class:"btn btn-spacing btn-search-blue",onClick:t[1]||(t[1]=a=>l.recargarTabla("General"))},jr)])])]),e("div",Gr,[e("div",zr,[e("div",Kr,[p(e("div",Wr,null,512),[[R,r.mostrarCarga]]),p(e("table",Xr,[Qr,e("tbody",null,[(c(!0),d(k,null,B(r.postDocs,a=>(c(),d("tr",{key:a.id},[Zr,e("td",null,[e("p",xr,b(a.id),1)]),e("td",en,[e("div",on,[e("a",{class:"btn btn-alert btn-xs",title:"Edit",onClick:g=>l.editPostDoc(a)},rn,8,tn),w("   "),e("a",{class:"btn btn-success btn-xs",title:"Details",onClick:g=>l.verPostDoc(a)},an,8,nn),w("   "),e("a",{class:"btn btn-closed btn-xs",title:"Delete",onClick:g=>l.deletePostDoc(a.id)},dn,8,cn)])]),e("td",null,[a.status=="Draft"?(c(),d("p",hn,b(a.status),1)):y("",!0),a.status=="Finished"?(c(),d("p",pn,b(a.status),1)):y("",!0)]),e("td",null,[e("p",fn,b(a.usuario.name),1)]),e("td",null,[a.nameOfPostdoc==null?(c(),d("p",mn,"---")):(c(),d("p",gn,b(a.nameOfPostdoc),1))]),e("td",null,[a.supervisorName==null?(c(),d("p",bn,"---")):(c(),d("p",_n,b(a.supervisorName),1))]),e("td",null,[a.researchTopic==null?(c(),d("p",Dn,"---")):(c(),d("p",vn,b(a.researchTopic),1))]),e("td",null,[a.startYear==null?(c(),d("p",$n,"---")):(c(),d("p",yn,b(a.startYear),1))]),e("td",null,[a.endingYear==null?(c(),d("p",Pn,"---")):(c(),d("p",wn,b(a.endingYear),1))])]))),128))])],512),[[R,r.mostrarTabla]]),On])])])]),P(m,{ref:"confirmation"},null,512),P(i,{ref:"alert"},null,512),r.showDetailsPostDoc?(c(),O(f,{key:0,postDoc1:r.postDoc,onClose:t[2]||(t[2]=a=>r.showDetailsPostDoc=!1)},null,8,["postDoc1"])):y("",!0),r.showEditPostDoc?(c(),O(u,{key:1,postDoc1:r.postDocEdit,onClose:t[3]||(t[3]=a=>r.showEditPostDoc=!1),onRecarga:t[4]||(t[4]=a=>l.recargarTabla("General"))},null,8,["postDoc1"])):y("",!0),r.showNewPostDoc?(c(),O(s,{key:2,onClose:t[5]||(t[5]=a=>r.showNewPostDoc=!1),onRecarga:t[6]||(t[6]=a=>l.recargarTabla("General"))})):y("",!0)])])}const Fn=N(Vr,[["render",kn]]);export{Fn as default};
