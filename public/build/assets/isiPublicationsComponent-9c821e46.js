import{m as D,a as f}from"./mixins-00a35343.js";import{m as A}from"./detailsIsiPublicationModal-d748b46c.js";import{m as T,s as V}from"./multiselect-040cdaf8.js";import{m as F,a as I}from"./alertModal-064cb8ca.js";import{r as P,o as c,h as k,i as N,b as e,j as w,g as b,t as m,a as h,w as u,F as B,e as C,l as O,f as y,n as $,k as p,m as g,T as U,v as H,p as L}from"./index-a6b313c0.js";/* empty css                                                         */import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import"./main-a60f64cc.js";let M=document.head.querySelector('meta[name="user"]');const j={components:{modalProgressYear:T,Multiselect:V,modalconfirmacion:F,modalalerta:I,modalProgressYear:T},mixins:[D],data:()=>({isiPublication:{authors:"",articleTitle:"",journalName:"",doi:"",volume:"",firstPage:"",lastPage:"",yearPublished:"",month:"",keywords:"",fundings:null,researcherInvolved:null,mainResearchers:!1,associativeResearchers:!1,postDoc:!1,thesisStudents:!1,nationalExternalResearchers:!1,internationalExternalResearchers:!1,comments:"",progressReport:""},options1:["Basal Financing Program Funding","Other sources"],showModalProgress:!1,currentYear:new Date().getFullYear(),coauthor:!1,draft:!1,buttonDisable:!1,idResearcher:"",researchers:[],usuarios:[],errors:[],years:[],buttonText:"Send Publication"}),mounted(){this.getUsuarios(),this.getUsuarios2();const s=new Date().getFullYear(),t=2e3,o=s+1;this.years=Array.from({length:o-t+1},(n,r)=>t+r),this.selectedYear=s,this.years.sort((n,r)=>r-n)},created(){this.getProgressReport();var s=JSON.parse(M.content).idRole;s=="1"?this.isiPublication.associativeResearchers=!0:s=="2"?this.isiPublication.postDoc=!0:s=="3"&&(this.isiPublication.mainResearchers=!0)},methods:{handleFormSubmit1(s){this.isiPublication.progressReport=s},getUsuarios2(){f.get("api/researchers").then(s=>{this.researchers=s.data}).catch(s=>console.log(s))},getUsuarios(){f.get("api/usuarios").then(s=>{this.usuarios=s.data.sort((t,o)=>t.name.localeCompare(o.name))}).catch(s=>console.log(s))},getProgressReport(){f.get("api/showProgressReport").then(s=>{this.isiPublication.progressReport=s.data}).catch(s=>console.log(s))},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Save draft",message:"¿Are you sure you want to save this publication as a draft? this action cannot be undone.",okButton:"Save",cancelButton:"Return"})){var t="";this.isiPublication.fundings!==null&&this.isiPublication.fundings.length!==0&&this.isiPublication.fundings.forEach((a,l)=>{t+=a.name,l===this.isiPublication.fundings.length-1?t+=".":t+=", "});var o="";this.idResearcher!=""?o=this.idResearcher:o=this.userID;var n="";this.isiPublication.researcherInvolved!==null&&this.isiPublication.researcherInvolved.length!==0&&this.isiPublication.researcherInvolved.forEach((a,l)=>{n+=a.name,l===this.isiPublication.researcherInvolved.length-1?n+=".":n+=", "});let r={status:"Draft",idUsuario:o,researcherInvolved:n,authors:this.isiPublication.authors,articleTitle:this.isiPublication.articleTitle,journalName:this.isiPublication.journalName,doi:this.isiPublication.doi,volume:this.isiPublication.volume,firstPage:this.isiPublication.firstPage,keywords:this.isiPublication.keywords,lastPage:this.isiPublication.lastPage,yearPublished:this.isiPublication.yearPublished,month:this.isiPublication.month,funding:t,mainResearchers:this.isiPublication.mainResearchers,associativeResearchers:this.isiPublication.associativeResearchers,postDoc:this.isiPublication.postDoc,thesisStudents:this.isiPublication.thesisStudents,nationalExternalResearchers:this.isiPublication.nationalExternalResearchers,internationalExternalResearchers:this.isiPublication.internationalExternalResearchers,progressReport:this.isiPublication.progressReport,comments:this.isiPublication.comments};f.post("api/isiPublications",r).then(a=>{this.toast.success("Draft saved successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(a=>{a.response?a.response.status===422?this.toast.warning(`Validation error: ${a.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):a.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${a.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):a.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${a.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}},useDOI(){const s=encodeURIComponent(this.isiPublication.doi);f.post("api/useDoi",{doi:s}).then(t=>{console.log(t.data.Data);var o=t.data.Data[0];if(t.data.QueryResult.RecordsFound==0)this.toast.warning("No records found with the entered DOI.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1});else{this.toast.success("A record with the entered doi has been found!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1});var n="";o.Author.Authors.forEach((a,l)=>{l!==0&&(n+="; "),n+=a}),n+=".",console.log(o),this.isiPublication.authors=n,this.isiPublication.articleTitle=o.Title.Title[0],this.isiPublication.journalName=o.Source.SourceTitle[0],this.isiPublication.volume=o.Source.Volume[0],o.Keyword.Keywords&&o.Keyword.Keywords.length>0?this.isiPublication.keywords=o.Keyword.Keywords.join(", "):this.isiPublication.keywords="";let r=o.Source.Pages[0].split("-");this.isiPublication.firstPage=r[0],this.isiPublication.lastPage=r[1],this.isiPublication.yearPublished=o.Source["Published.BiblioYear"][0]}}).catch(t=>{console.error(t)})},onInput(s){const t=s.target;this.isiPublication.yearPublished=t.value.slice(0,4)},cerrarModal(){const s=this.$refs.closeBtn;this.$emit("recarga"),s.click()},capitalizeFirstLetter(s){return s.charAt(0).toUpperCase()+s.slice(1)},async crearPublicacion(){this.errors=[];const s=["mainResearchers","associativeResearchers","postDoc","thesisStudents","nationalExternalResearchers","internationalExternalResearchers","sendingDate","acceptanceDate","progressReport","comments","volume","firstPage","lastPage","keywords"];for(const l in this.isiPublication)!s.includes(l)&&(this.isiPublication[l]===""||this.isiPublication[l]===0||this.isiPublication[l]==null)&&(l==="coauthor"&&this.coauthor===!1||this.errors.push(l));var t=await f.post("../api/verifyIsi",this.isiPublication).then((function(l){return l.data}).bind(this)).catch(function(l){console.log(l)});t>0&&this.errors.push("duplicated");var o="";if(this.errors.length!=0&&(this.errors.forEach(l=>{l=="articleTitle"?o=o+`The field Article Title is required
`:l=="journalName"?o=o+`The field Journal Name is required
`:l=="firstPage"?o=o+`The field First Page is required
`:l=="lastPage"?o=o+`The field Last Page is required
`:l=="yearPublished"?o=o+`The field Year Published is required
`:l=="duplicated"?o=o+`There is already a post with the same data, please try again.
`:o=o+"The field "+this.capitalizeFirstLetter(l)+` is required
`}),this.toast.warning(o,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Send Publication",message:"¿Are you sure you want to send this publication?.",okButton:"Send",cancelButton:"Return"})){var n="";this.isiPublication.fundings.forEach((d,v)=>{n+=d.name,v===this.isiPublication.fundings.length-1?n+=".":n+=", "});var r="";this.idResearcher!=""?r=this.idResearcher:r=this.userID;var a="";this.isiPublication.researcherInvolved!==null&&this.isiPublication.researcherInvolved.length!==0&&this.isiPublication.researcherInvolved.forEach((d,v)=>{a+=d.name,v===this.isiPublication.researcherInvolved.length-1?a+=".":a+=", "});let _={status:"Finished",researcherInvolved:a,idUsuario:r,authors:this.isiPublication.authors,articleTitle:this.isiPublication.articleTitle,journalName:this.isiPublication.journalName,doi:this.isiPublication.doi,volume:this.isiPublication.volume,keywords:this.isiPublication.keywords,firstPage:this.isiPublication.firstPage,lastPage:this.isiPublication.lastPage,yearPublished:this.isiPublication.yearPublished,month:this.isiPublication.month,funding:n,mainResearchers:this.isiPublication.mainResearchers,associativeResearchers:this.isiPublication.associativeResearchers,postDoc:this.isiPublication.postDoc,thesisStudents:this.isiPublication.thesisStudents,nationalExternalResearchers:this.isiPublication.nationalExternalResearchers,internationalExternalResearchers:this.isiPublication.internationalExternalResearchers,sendingDate:this.isiPublication.sendingDate,acceptanceDate:this.isiPublication.acceptanceDate,progressReport:this.isiPublication.progressReport,comments:this.isiPublication.comments};console.log(_),f.post("api/isiPublications",_).then(d=>{this.buttonDisable=!0,this.buttonText="Sending...",this.toast.success("Publication send successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(d=>{d.response?d.response.status===422?this.toast.warning(`Validation error: ${d.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):d.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${d.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):d.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${d.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},x={name:"modal"},Y={class:"modal-mask"},q={class:"modal-wrapper"},J={class:"modal-container"},K={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},z={for:""},G=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),Q=[G],W={key:0,class:"col-5 m-0"},X={class:"fw-normal",style:{"font-size":"14px"}},Z=e("option",{disabled:"",value:""},"Select a researcher",-1),ee=["value"],se={class:"modal-body"},te={class:"row"},ie={class:"col-md-6"},oe=e("label",{for:""},"AC3E researcher involved:",-1),le=e("label",{for:"",style:{color:"orange"}},"*",-1),ae={class:"col-md-6"},ne=e("label",{for:""},"Author(s): ",-1),re=e("label",{for:"",style:{color:"orange"}},"*",-1),ce=e("label",{title:"The format for this field should be as follows: 'Last Name, Initial of First Name; Last Name, Initial of First Name; ...'",style:{color:"#0A95FF"}},[e("i",{class:"fa-solid fa-circle-info"})],-1),ue=e("br",null,null,-1),de=e("br",null,null,-1),he={class:"row"},be={class:"col-md-5"},me=e("label",{for:""},"Digital Object Identifier (DOI):",-1),pe=e("label",{for:"",style:{color:"orange"}},"*",-1),fe=e("br",null,null,-1),Pe={class:"col-md-1 pt-2"},ge=e("br",null,null,-1),_e=e("i",{class:"fa-solid fa-magnifying-glass"},null,-1),ve=[_e],ye={class:"col-md-3"},$e=e("label",{for:""},"Year Published:",-1),ke=e("label",{for:"",style:{color:"orange"}},"*",-1),we=e("br",null,null,-1),Oe=e("option",{disabled:"",value:""},"Select a year",-1),Re=["value"],Be={class:"col-md-3"},Ce=e("label",{for:"selectMonth"},"Month:",-1),Te=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),De=e("br",null,null,-1),Fe=e("option",{disabled:"",value:""},"Select a month",-1),Ie=e("option",{value:"January"},"January",-1),Se=e("option",{value:"February"},"February",-1),Ee=e("option",{value:"March"},"March",-1),He=e("option",{value:"April"},"April",-1),Ve=e("option",{value:"May"},"May",-1),Ne=e("option",{value:"June"},"June",-1),Ue=e("option",{value:"July"},"July",-1),Ae=e("option",{value:"August"},"August",-1),Le=e("option",{value:"September"},"September",-1),Me=e("option",{value:"October"},"October",-1),je=e("option",{value:"November"},"November",-1),xe=e("option",{value:"December"},"December",-1),Ye=[Fe,Ie,Se,Ee,He,Ve,Ne,Ue,Ae,Le,Me,je,xe],qe=e("br",null,null,-1),Je={class:"row"},Ke={class:"col-md-6"},ze=e("label",{for:""},"Article Title:",-1),Ge=e("label",{for:"",style:{color:"orange"}},"*",-1),Qe=e("br",null,null,-1),We={class:"col-md-6"},Xe=e("label",{for:""},"Journal Name:",-1),Ze=e("label",{for:"",style:{color:"orange"}},"*",-1),es=e("br",null,null,-1),ss=e("br",null,null,-1),ts={class:"row"},is={class:"col-md-4"},os=e("label",{for:""},"Volume:",-1),ls=e("br",null,null,-1),as={class:"col-md-4"},ns=e("label",{for:""},"First Page:",-1),rs=e("br",null,null,-1),cs={class:"col-md-4"},us=e("label",{for:""},"Last Page:",-1),ds=e("br",null,null,-1),hs=e("br",null,null,-1),bs={class:"row"},ms={class:"col-md-6"},ps=e("label",{for:""},"Fundings: ",-1),fs=e("label",{for:"",style:{color:"orange"}},"*",-1),Ps=e("br",null,null,-1),gs={class:"col-md-6"},_s=e("label",{for:""},"Comments:",-1),vs=e("br",null,null,-1),ys=e("hr",{size:"3",class:"separador"},null,-1),$s={class:"row"},ks=e("div",{class:"text-uppercase pb-2"},"Participations:",-1),ws={class:"col-md-4"},Os={class:"form-check pt-2"},Rs={class:"form-check-label"},Bs={class:"col-md-4"},Cs={class:"form-check pt-2"},Ts={class:"form-check-label"},Ds={class:"col-md-4"},Fs={class:"form-check pt-2"},Is={class:"form-check-label"},Ss={class:"row"},Es={class:"col-md-4"},Hs={class:"form-check pt-2"},Vs={class:"form-check-label"},Ns={class:"col-md-4"},Us={class:"form-check pt-2"},As={class:"form-check-label"},Ls={class:"col-md-4"},Ms={class:"form-check pt-2"},js={class:"form-check-label"},xs={class:"modal-footer"},Ys={class:"form-check-label"},qs=["disabled"],Js=["disabled"];function Ks(s,t,o,n,r,a){const l=P("Multiselect"),_=P("modalProgressYear"),d=P("modalfotoperfil"),v=P("modalconfirmacion"),R=P("modalalerta");return c(),k(U,{name:"modalcrear"},{default:N(()=>[e("div",x,[e("div",Y,[e("div",q,[e("div",J,[e("div",K,[w(s.$slots,"header",{},()=>[b(" New Publication ")]),e("label",z,[b("Progress year: "+m(s.isiPublication.progressReport)+"    ",1),e("a",{class:"btn",onClick:t[0]||(t[0]=i=>s.showModalProgress=!0)},Q)]),s.is("Administrator")?(c(),h("label",W,[b(" Researcher: "),e("label",X,[u(e("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=i=>s.idResearcher=i)},[Z,(c(!0),h(B,null,C(s.usuarios,i=>(c(),h("option",{key:i.id,value:i.id},m(i.name),9,ee))),128))],512),[[O,s.idResearcher]])])])):y("",!0),e("a",{class:"btn btn-closed",onClick:t[2]||(t[2]=i=>s.$emit("close")),ref:"closeBtn"},"X",512)]),e("div",se,[w(s.$slots,"body",{},()=>[e("div",te,[e("div",ie,[oe,le,$(l,{placeholder:"Select the participants",modelValue:s.isiPublication.researcherInvolved,"onUpdate:modelValue":t[3]||(t[3]=i=>s.isiPublication.researcherInvolved=i),searchable:!0,"close-on-select":!1,createTag:!0,options:s.researchers,mode:"tags",label:"name",trackBy:"id",object:!0},null,8,["modelValue","options"])]),e("div",ae,[ne,re,ce,ue,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=i=>s.isiPublication.authors=i)},null,512),[[p,s.isiPublication.authors]])])]),de,e("div",he,[e("div",be,[me,pe,fe,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=i=>s.isiPublication.doi=i)},null,512),[[p,s.isiPublication.doi]])]),e("div",Pe,[ge,e("a",{class:"btn btn-search-blue",onClick:t[6]||(t[6]=i=>a.useDOI())},ve)]),e("div",ye,[$e,ke,we,u(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":t[7]||(t[7]=i=>s.isiPublication.yearPublished=i)},[Oe,(c(!0),h(B,null,C(s.years,i=>(c(),h("option",{key:i,value:i},m(i),9,Re))),128))],512),[[O,s.isiPublication.yearPublished]])]),e("div",Be,[Ce,Te,De,u(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":t[8]||(t[8]=i=>s.isiPublication.month=i)},Ye,512),[[O,s.isiPublication.month]])])]),qe,e("div",Je,[e("div",Ke,[ze,Ge,Qe,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=i=>s.isiPublication.articleTitle=i)},null,512),[[p,s.isiPublication.articleTitle]])]),e("div",We,[Xe,Ze,es,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=i=>s.isiPublication.journalName=i)},null,512),[[p,s.isiPublication.journalName]])])]),ss,e("div",ts,[e("div",is,[os,ls,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=i=>s.isiPublication.volume=i)},null,512),[[p,s.isiPublication.volume]])]),e("div",as,[ns,rs,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=i=>s.isiPublication.firstPage=i)},null,512),[[p,s.isiPublication.firstPage]])]),e("div",cs,[us,ds,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=i=>s.isiPublication.lastPage=i)},null,512),[[p,s.isiPublication.lastPage]])])]),hs,e("div",bs,[e("div",ms,[ps,fs,Ps,e("div",null,[$(l,{placeholder:"Select the options",modelValue:s.isiPublication.fundings,"onUpdate:modelValue":t[14]||(t[14]=i=>s.isiPublication.fundings=i),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:s.options1,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])]),e("div",gs,[_s,vs,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=i=>s.isiPublication.comments=i)},null,512),[[p,s.isiPublication.comments]])])]),ys,e("div",$s,[ks,e("div",ws,[e("div",Os,[e("label",Rs,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[16]||(t[16]=i=>s.isiPublication.mainResearchers=i)},null,512),[[g,s.isiPublication.mainResearchers]]),b(" Main researchers")])])]),e("div",Bs,[e("div",Cs,[e("label",Ts,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[17]||(t[17]=i=>s.isiPublication.associativeResearchers=i)},null,512),[[g,s.isiPublication.associativeResearchers]]),b(" Associative researchers")])])]),e("div",Ds,[e("div",Fs,[e("label",Is,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[18]||(t[18]=i=>s.isiPublication.postDoc=i)},null,512),[[g,s.isiPublication.postDoc]]),b(" Post doc")])])])]),e("div",Ss,[e("div",Es,[e("div",Hs,[e("label",Vs,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[19]||(t[19]=i=>s.isiPublication.thesisStudents=i)},null,512),[[g,s.isiPublication.thesisStudents]]),b(" Thesis students ")])])]),e("div",Ns,[e("div",Us,[e("label",As,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[20]||(t[20]=i=>s.isiPublication.nationalExternalResearchers=i)},null,512),[[g,s.isiPublication.nationalExternalResearchers]]),b(" National external researchers ")])])]),e("div",Ls,[e("div",Ms,[e("label",js,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[21]||(t[21]=i=>s.isiPublication.internationalExternalResearchers=i)},null,512),[[g,s.isiPublication.internationalExternalResearchers]]),b(" Inter. external researchers ")])])])])])]),e("div",xs,[w(s.$slots,"footer",{},()=>[e("label",Ys,[u(e("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":t[22]||(t[22]=i=>s.draft=i)},null,512),[[g,s.draft]]),b(" Save as a draft")]),s.draft==!1?(c(),h("a",{key:0,class:"btn btn-continue float-end",onClick:t[23]||(t[23]=i=>a.crearPublicacion()),disabled:s.buttonDisable},m(s.buttonText),9,qs)):(c(),h("a",{key:1,class:"btn btn-continue float-end",onClick:t[24]||(t[24]=i=>a.guardarBorrador()),disabled:s.buttonDisable}," Save draft ",8,Js))])]),s.showModalProgress?(c(),k(_,{key:0,progressYear:s.isiPublication.progressReport,onClose:t[25]||(t[25]=i=>s.showModalProgress=!1),onSubmit:a.handleFormSubmit1},null,8,["progressYear","onSubmit"])):y("",!0),s.showFotoPerfil?(c(),k(d,{key:1,onClose:t[26]||(t[26]=i=>s.showFotoPerfil=!1)})):y("",!0),$(v,{ref:"confirmation"},null,512),$(R,{ref:"alert"},null,512)])])])])]),_:3})}const zs=S(j,[["render",Ks]]),Gs={components:{modalProgressYear:T,modalconfirmacion:F,modalalerta:I,Multiselect:V},mixins:[D],data:()=>({isiPublication:{authors:"",articleTitle:"",journalName:"",doi:"",volume:"",firstPage:"",lastPage:"",keywords:"",researcherInvolved:null,fundings:null,mainResearchers:!1,associativeResearchers:!1,postDoc:!1,thesisStudents:!1,nationalExternalResearchers:!1,internationalExternalResearchers:!1,yearPublished:"",month:"",comments:"",progressReport:""},options1:["Basal Financing Program Funding","Other sources"],id:null,draft:!1,idResearcher:"",showModalProgress:!1,currentYear:new Date().getFullYear(),buttonDisable:!1,researchers:[],usuarios:[],errors:[],buttonText:"Edit Publication"}),props:{isiPublication1:Object},mounted(){this.getUsuarios2(),this.getUsuarios();const s=new Date().getFullYear(),t=2e3,o=s+1;this.years=Array.from({length:o-t+1},(n,r)=>t+r),this.selectedYear=s,this.years.sort((n,r)=>r-n)},created(){if(this.id=this.isiPublication1.id,this.idResearcher=this.isiPublication1.idUsuario,this.isiPublication.authors=this.isiPublication1.authors,this.isiPublication.articleTitle=this.isiPublication1.articleTitle,this.isiPublication.journalName=this.isiPublication1.journalName,this.isiPublication.doi=this.isiPublication1.doi,this.isiPublication.volume=this.isiPublication1.volume,this.isiPublication.firstPage=this.isiPublication1.firstPage,this.isiPublication.lastPage=this.isiPublication1.lastPage,this.isiPublication.yearPublished=this.isiPublication1.yearPublished,this.isiPublication.month=this.isiPublication1.month,this.isiPublication.keywords=this.isiPublication1.keywords,this.isiPublication1.funding!=null){const s=this.isiPublication1.funding.split(",");this.isiPublication.fundings=s.map((t,o)=>(t=t.trim(),t.endsWith(".")&&(t=t.slice(0,-1)),{value:t,name:t}))}if(this.isiPublication1.researcherInvolved!=null){const s=this.isiPublication1.researcherInvolved.split(",");this.isiPublication.researcherInvolved=s.map((t,o)=>(t=t.trim(),t.endsWith(".")&&(t=t.slice(0,-1)),{value:t,name:t}))}this.isiPublication.comments=this.isiPublication1.comments,this.isiPublication1.mainResearchers==1&&(this.isiPublication.mainResearchers=!0),this.isiPublication1.associativeResearchers==1&&(this.isiPublication.associativeResearchers=!0),this.isiPublication1.postDoc==1&&(this.isiPublication.postDoc=!0),this.isiPublication1.thesisStudents==1&&(this.isiPublication.thesisStudents=!0),this.isiPublication1.nationalExternalResearchers==1&&(this.isiPublication.nationalExternalResearchers=!0),this.isiPublication1.internationalExternalResearchers==1&&(this.isiPublication.internationalExternalResearchers=!0),this.isiPublication.progressReport=this.isiPublication1.progressReport},methods:{getUsuarios(){f.get("api/usuarios").then(s=>{this.usuarios=s.data.sort((t,o)=>t.name.localeCompare(o.name))}).catch(s=>console.log(s))},getUsuarios2(){f.get("api/researchers").then(s=>{this.researchers=s.data}).catch(s=>console.log(s))},handleFormSubmit1(s){this.isiPublication.progressReport=s},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Edit draft",message:"¿Are you sure you want to edit this publication as a draft? this action cannot be undone.",okButton:"Edit",cancelButton:"Return"})){var t="";this.isiPublication.fundings!==null&&this.isiPublication.fundings.length!==0&&this.isiPublication.fundings.forEach((a,l)=>{t+=a.name,l===this.isiPublication.fundings.length-1?t+=".":t+=", "});var o="";this.idResearcher!=""?o=this.idResearcher:o=this.userID;var n="";this.isiPublication.researcherInvolved!==null&&this.isiPublication.researcherInvolved.length!==0&&this.isiPublication.researcherInvolved.forEach((a,l)=>{n+=a.name,l===this.isiPublication.researcherInvolved.length-1?n+=".":n+=", "});let r={status:"Draft",idUsuario:o,researcherInvolved:n,authors:this.isiPublication.authors,articleTitle:this.isiPublication.articleTitle,journalName:this.isiPublication.journalName,doi:this.isiPublication.doi,volume:this.isiPublication.volume,keywords:this.isiPublication.keywords,firstPage:this.isiPublication.firstPage,lastPage:this.isiPublication.lastPage,yearPublished:this.isiPublication.yearPublished,month:this.isiPublication.month,funding:t,mainResearchers:this.isiPublication.mainResearchers,associativeResearchers:this.isiPublication.associativeResearchers,postDoc:this.isiPublication.postDoc,thesisStudents:this.isiPublication.thesisStudents,nationalExternalResearchers:this.isiPublication.nationalExternalResearchers,internationalExternalResearchers:this.isiPublication.internationalExternalResearchers,comments:this.isiPublication.comments};f.put(`api/isiPublications/${this.id}`,r).then(a=>{this.toast.success("Draft edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(a=>{a.response?a.response.status===422?this.toast.warning(`Validation error: ${a.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):a.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${a.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):a.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${a.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}},useDOI(){const s=encodeURIComponent(this.isiPublication.doi);f.post("api/useDoi",{doi:s}).then(t=>{console.log(t.data.Data);var o=t.data.Data[0];if(t.data.QueryResult.RecordsFound==0)this.toast.warning("No records found with the entered DOI.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1});else{var n="";o.Author.Authors.forEach((a,l)=>{l!==0&&(n+="; "),n+=a}),n+=".",this.isiPublication.authors=n,this.isiPublication.articleTitle=o.Title.Title[0],this.isiPublication.journalName=o.Source.SourceTitle[0],this.isiPublication.volume=o.Source.Volume[0],o.Keyword.Keywords&&o.Keyword.Keywords.length>0?this.isiPublication.keywords=o.Keyword.Keywords.join(", "):this.isiPublication.keywords="";let r=o.Source.Pages[0].split("-");this.isiPublication.firstPage=r[0],this.isiPublication.lastPage=r[1],this.isiPublication.yearPublished=o.Source["Published.BiblioYear"][0]}}).catch(t=>{console.error(t)})},onInput(s){const t=s.target;this.isiPublication.yearPublished=t.value.slice(0,4)},cerrarModal(){const s=this.$refs.closeBtn;this.$emit("recarga"),s.click()},capitalizeFirstLetter(s){return s.charAt(0).toUpperCase()+s.slice(1)},async editarPublicacion(){this.errors=[];const s=["mainResearchers","associativeResearchers","postDoc","thesisStudents","nationalExternalResearchers","internationalExternalResearchers","sendingDate","acceptanceDate","progressReport","comments","volume","firstPage","lastPage","keywords"];for(const l in this.isiPublication)!s.includes(l)&&(this.isiPublication[l]===""||this.isiPublication[l]===0||this.isiPublication[l]==null)&&(l==="coauthor"&&this.coauthor===!1||this.errors.push(l));let t={id:this.id,authors:this.isiPublication.authors,articleTitle:this.isiPublication.articleTitle,journalName:this.isiPublication.journalName,doi:this.isiPublication.doi,volume:this.isiPublication.volume,firstPage:this.isiPublication.firstPage,lastPage:this.isiPublication.lastPage,yearPublished:this.isiPublication.yearPublished,month:this.isiPublication.month,funding:r,mainResearchers:this.isiPublication.mainResearchers,associativeResearchers:this.isiPublication.associativeResearchers,postDoc:this.isiPublication.postDoc,thesisStudents:this.isiPublication.thesisStudents,nationalExternalResearchers:this.isiPublication.nationalExternalResearchers,internationalExternalResearchers:this.isiPublication.internationalExternalResearchers,comments:this.isiPublication.comments};var o=await f.post("../api/verifyIsi",t).then((function(l){return l.data}).bind(this)).catch(function(l){console.log(l)});o>0&&this.errors.push("duplicated");var n="";if(this.errors.length!=0&&(this.errors.forEach(l=>{l=="articleTitle"?n=n+`The field Article Title is required
`:l=="journalName"?n=n+`The field Journal Name is required
`:l=="firstPage"?n=n+`The field First Page is required
`:l=="lastPage"?n=n+`The field Last Page is required
`:l=="yearPublished"?n=n+`The field Year Published is required
`:l=="duplicated"?n=n+`There is already a post with the same data, please try again.
`:n=n+"The field "+this.capitalizeFirstLetter(l)+` is required
`}),this.toast.warning(n,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Edit Publication",message:"¿Are you sure you want to edit this publication?.",okButton:"Send",cancelButton:"Return"})){var r="";this.isiPublication.fundings!==null&&this.isiPublication.fundings.length!==0&&this.isiPublication.fundings.forEach((d,v)=>{r+=d.name,v===this.isiPublication.fundings.length-1?r+=".":r+=", "});var a="";this.idResearcher!=""?a=this.idResearcher:a=this.userID;let _={status:"Finished",idUsuario:a,authors:this.isiPublication.authors,articleTitle:this.isiPublication.articleTitle,journalName:this.isiPublication.journalName,doi:this.isiPublication.doi,volume:this.isiPublication.volume,keywords:this.isiPublication.keywords,firstPage:this.isiPublication.firstPage,lastPage:this.isiPublication.lastPage,yearPublished:this.isiPublication.yearPublished,funding:r,mainResearchers:this.isiPublication.mainResearchers,associativeResearchers:this.isiPublication.associativeResearchers,postDoc:this.isiPublication.postDoc,thesisStudents:this.isiPublication.thesisStudents,nationalExternalResearchers:this.isiPublication.nationalExternalResearchers,internationalExternalResearchers:this.isiPublication.internationalExternalResearchers,comments:this.isiPublication.comments};f.put(`api/isiPublications/${this.id}`,_).then(d=>{this.buttonDisable=!0,this.buttonText="Sending...",this.toast.success("Publication edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(d=>{d.response?d.response.status===422?this.toast.warning(`Validation error: ${d.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):d.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${d.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):d.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${d.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},Qs={name:"modal"},Ws={class:"modal-mask"},Xs={class:"modal-wrapper"},Zs={class:"modal-container"},et={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},st={for:""},tt=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),it=[tt],ot={key:0,class:"col-5 m-0"},lt={class:"fw-normal",style:{"font-size":"14px"}},at=e("option",{disabled:"",value:""},"Select a researcher",-1),nt=["value"],rt={class:"modal-body"},ct={class:"row"},ut={class:"col-md-6"},dt=e("label",{for:""},"AC3E researcher involved:",-1),ht=e("label",{for:"",style:{color:"orange"}},"*",-1),bt={class:"col-md-6"},mt=e("label",{for:""},"Author(s): ",-1),pt=e("label",{for:"",style:{color:"orange"}},"*",-1),ft=e("label",{title:"The format for this field should be as follows: 'Last Name, Initial of First Name; Last Name, Initial of First Name; ...'",style:{color:"#0A95FF"}},[e("i",{class:"fa-solid fa-circle-info"})],-1),Pt=e("br",null,null,-1),gt=e("br",null,null,-1),_t={class:"row"},vt={class:"col-md-5"},yt=e("label",{for:""},"Digital Object Identifier (DOI):",-1),$t=e("label",{for:"",style:{color:"orange"}},"*",-1),kt=e("br",null,null,-1),wt={class:"col-md-1 pt-2"},Ot=e("br",null,null,-1),Rt=e("i",{class:"fa-solid fa-magnifying-glass"},null,-1),Bt=[Rt],Ct={class:"col-md-3"},Tt=e("label",{for:""},"Year Published:",-1),Dt=e("label",{for:"",style:{color:"orange"}},"*",-1),Ft=e("br",null,null,-1),It=e("option",{disabled:"",value:null},"Select a year",-1),St=["value"],Et={class:"col-md-3"},Ht=e("label",{for:"selectMonth"},"Month:",-1),Vt=e("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),Nt=e("br",null,null,-1),Ut=e("option",{disabled:"",value:null},"Select a month",-1),At=e("option",{value:"January"},"January",-1),Lt=e("option",{value:"February"},"February",-1),Mt=e("option",{value:"March"},"March",-1),jt=e("option",{value:"April"},"April",-1),xt=e("option",{value:"May"},"May",-1),Yt=e("option",{value:"June"},"June",-1),qt=e("option",{value:"July"},"July",-1),Jt=e("option",{value:"August"},"August",-1),Kt=e("option",{value:"September"},"September",-1),zt=e("option",{value:"October"},"October",-1),Gt=e("option",{value:"November"},"November",-1),Qt=e("option",{value:"December"},"December",-1),Wt=[Ut,At,Lt,Mt,jt,xt,Yt,qt,Jt,Kt,zt,Gt,Qt],Xt=e("br",null,null,-1),Zt={class:"row"},ei={class:"col-md-6"},si=e("label",{for:""},"Article Title:",-1),ti=e("label",{for:"",style:{color:"orange"}},"*",-1),ii=e("br",null,null,-1),oi={class:"col-md-6"},li=e("label",{for:""},"Journal Name:",-1),ai=e("label",{for:"",style:{color:"orange"}},"*",-1),ni=e("br",null,null,-1),ri=e("br",null,null,-1),ci={class:"row"},ui={class:"col-md-4"},di=e("label",{for:""},"Volume:",-1),hi=e("label",{for:"",style:{color:"orange"}},"*",-1),bi=e("br",null,null,-1),mi={class:"col-md-4"},pi=e("label",{for:""},"First Page:",-1),fi=e("label",{for:"",style:{color:"orange"}},"*",-1),Pi=e("br",null,null,-1),gi={class:"col-md-4"},_i=e("label",{for:""},"Last Page:",-1),vi=e("label",{for:"",style:{color:"orange"}},"*",-1),yi=e("br",null,null,-1),$i=e("br",null,null,-1),ki={class:"row"},wi={class:"col-md-6"},Oi=e("label",{for:""},"Fundings: ",-1),Ri=e("label",{for:"",style:{color:"orange"}},"*",-1),Bi=e("br",null,null,-1),Ci={class:"col-md-6"},Ti=e("label",{for:""},"Comments:",-1),Di=e("br",null,null,-1),Fi=e("hr",{size:"3",class:"separador"},null,-1),Ii={class:"row"},Si=e("div",{class:"text-uppercase pb-2"},"Participations:",-1),Ei={class:"col-md-4"},Hi={class:"form-check pt-2"},Vi={class:"form-check-label"},Ni={class:"col-md-4"},Ui={class:"form-check pt-2"},Ai={class:"form-check-label"},Li={class:"col-md-4"},Mi={class:"form-check pt-2"},ji={class:"form-check-label"},xi={class:"row"},Yi={class:"col-md-4"},qi={class:"form-check pt-2"},Ji={class:"form-check-label"},Ki={class:"col-md-4"},zi={class:"form-check pt-2"},Gi={class:"form-check-label"},Qi={class:"col-md-4"},Wi={class:"form-check pt-2"},Xi={class:"form-check-label"},Zi={class:"modal-footer"},eo={class:"form-check-label"},so=["disabled"],to=["disabled"];function io(s,t,o,n,r,a){const l=P("Multiselect"),_=P("modalfotoperfil"),d=P("modalconfirmacion"),v=P("modalalerta"),R=P("modalProgressYear");return c(),k(U,{name:"modalcrear"},{default:N(()=>[e("div",Qs,[e("div",Ws,[e("div",Xs,[e("div",Zs,[e("div",et,[w(s.$slots,"header",{},()=>[b(" Edit Publication ")]),e("label",st,[b("Progress year: "+m(s.isiPublication.progressReport)+"    ",1),e("a",{class:"btn",onClick:t[0]||(t[0]=i=>s.showModalProgress=!0)},it)]),s.is("Administrator")?(c(),h("label",ot,[b(" Researcher: "),e("label",lt,[u(e("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=i=>s.idResearcher=i)},[at,(c(!0),h(B,null,C(s.usuarios,i=>(c(),h("option",{key:i.id,value:i.id},m(i.name),9,nt))),128))],512),[[O,s.idResearcher]])])])):y("",!0),e("a",{class:"btn btn-closed",onClick:t[2]||(t[2]=i=>s.$emit("close")),ref:"closeBtn"},"X",512)]),e("div",rt,[w(s.$slots,"body",{},()=>[e("div",ct,[e("div",ut,[dt,ht,$(l,{placeholder:"Select the participants",modelValue:s.isiPublication.researcherInvolved,"onUpdate:modelValue":t[3]||(t[3]=i=>s.isiPublication.researcherInvolved=i),searchable:!0,"close-on-select":!1,createTag:!0,options:s.researchers,mode:"tags",label:"name",trackBy:"id",object:!0},null,8,["modelValue","options"])]),e("div",bt,[mt,pt,ft,Pt,u(e("input",{title:"First Name and Last Name.",type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=i=>s.isiPublication.authors=i)},null,512),[[p,s.isiPublication.authors]])])]),gt,e("div",_t,[e("div",vt,[yt,$t,kt,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=i=>s.isiPublication.doi=i)},null,512),[[p,s.isiPublication.doi]])]),e("div",wt,[Ot,e("a",{class:"btn btn-search-blue",onClick:t[6]||(t[6]=i=>a.useDOI())},Bt)]),e("div",Ct,[Tt,Dt,Ft,u(e("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":t[7]||(t[7]=i=>s.isiPublication.yearPublished=i)},[It,(c(!0),h(B,null,C(s.years,i=>(c(),h("option",{key:i,value:i},m(i),9,St))),128))],512),[[O,s.isiPublication.yearPublished]])]),e("div",Et,[Ht,Vt,Nt,u(e("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":t[8]||(t[8]=i=>s.isiPublication.month=i)},Wt,512),[[O,s.isiPublication.month]])])]),Xt,e("div",Zt,[e("div",ei,[si,ti,ii,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=i=>s.isiPublication.articleTitle=i)},null,512),[[p,s.isiPublication.articleTitle]])]),e("div",oi,[li,ai,ni,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=i=>s.isiPublication.journalName=i)},null,512),[[p,s.isiPublication.journalName]])])]),ri,e("div",ci,[e("div",ui,[di,hi,bi,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=i=>s.isiPublication.volume=i)},null,512),[[p,s.isiPublication.volume]])]),e("div",mi,[pi,fi,Pi,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=i=>s.isiPublication.firstPage=i)},null,512),[[p,s.isiPublication.firstPage]])]),e("div",gi,[_i,vi,yi,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=i=>s.isiPublication.lastPage=i)},null,512),[[p,s.isiPublication.lastPage]])])]),$i,e("div",ki,[e("div",wi,[Oi,Ri,Bi,e("div",null,[$(l,{placeholder:"Select the options",modelValue:s.isiPublication.fundings,"onUpdate:modelValue":t[14]||(t[14]=i=>s.isiPublication.fundings=i),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:s.options1,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])]),e("div",Ci,[Ti,Di,u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=i=>s.isiPublication.comments=i)},null,512),[[p,s.isiPublication.comments]])])]),Fi,e("div",Ii,[Si,e("div",Ei,[e("div",Hi,[e("label",Vi,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[16]||(t[16]=i=>s.isiPublication.mainResearchers=i)},null,512),[[g,s.isiPublication.mainResearchers]]),b(" Main researchers")])])]),e("div",Ni,[e("div",Ui,[e("label",Ai,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[17]||(t[17]=i=>s.isiPublication.associativeResearchers=i)},null,512),[[g,s.isiPublication.associativeResearchers]]),b(" Associative researchers")])])]),e("div",Li,[e("div",Mi,[e("label",ji,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[18]||(t[18]=i=>s.isiPublication.postDoc=i)},null,512),[[g,s.isiPublication.postDoc]]),b(" Post doc")])])])]),e("div",xi,[e("div",Yi,[e("div",qi,[e("label",Ji,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[19]||(t[19]=i=>s.isiPublication.thesisStudents=i)},null,512),[[g,s.isiPublication.thesisStudents]]),b(" Thesis students ")])])]),e("div",Ki,[e("div",zi,[e("label",Gi,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[20]||(t[20]=i=>s.isiPublication.nationalExternalResearchers=i)},null,512),[[g,s.isiPublication.nationalExternalResearchers]]),b(" National external researchers ")])])]),e("div",Qi,[e("div",Wi,[e("label",Xi,[u(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[21]||(t[21]=i=>s.isiPublication.internationalExternalResearchers=i)},null,512),[[g,s.isiPublication.internationalExternalResearchers]]),b(" Inter. external researchers ")])])])])])]),e("div",Zi,[w(s.$slots,"footer",{},()=>[e("label",eo,[u(e("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":t[22]||(t[22]=i=>s.draft=i)},null,512),[[g,s.draft]]),b(" Edit as a draft")]),s.draft==!1?(c(),h("a",{key:0,class:"btn btn-continue float-end",onClick:t[23]||(t[23]=i=>a.editarPublicacion()),disabled:s.buttonDisable},m(s.buttonText),9,so)):(c(),h("a",{key:1,class:"btn btn-continue float-end",onClick:t[24]||(t[24]=i=>a.guardarBorrador()),disabled:s.buttonDisable}," Edit draft ",8,to))])]),s.showFotoPerfil?(c(),k(_,{key:0,onClose:t[25]||(t[25]=i=>s.showFotoPerfil=!1)})):y("",!0),$(d,{ref:"confirmation"},null,512),$(v,{ref:"alert"},null,512),s.showModalProgress?(c(),k(R,{key:1,progressYear:s.isiPublication.progressReport,onClose:t[26]||(t[26]=i=>s.showModalProgress=!1),onSubmit:a.handleFormSubmit1},null,8,["progressYear","onSubmit"])):y("",!0)])])])])]),_:3})}const oo=S(Gs,[["render",io]]),lo={components:{modalcrear:zs,modaleditar:oo,modalver:A,modalconfirmacion:F,modalalerta:I},mixins:[D],data(){return{isiPublications:null,isiPublication:null,showNewIsiPublication:!1,showEditIsiPublication:!1,showDetailsIsi:!1,isiPublicationEdit:null,mostrarTabla:!1,mostrarCarga:!0,table:null}},created(){this.getIsiPublications(this.userID)},methods:{verIsiPublication(s){this.isiPublication=s,this.showDetailsIsi=!0},getIsiPublications(s){f.get(`api/isiPublications/${s}`).then(t=>{this.isiPublications=t.data,this.isiPublicationsAux=t.data,this.table!=null&&(this.table.clear(),this.table.destroy()),this.crearTabla("#MyTableIsiPublications")}).catch(t=>console.log(t))},recargarTabla(s){this.mostrarCarga=!0,s=="General"?(this.isiPublications=null,this.getIsiPublications(this.userID)):this.crearTabla("#MyTableIsiPublications")},editIsiPublication(s){this.isiPublicationEdit=s,this.showEditIsiPublication=!0},async deletePublication(s){await this.$refs.confirmation.show({title:"Delete Publication",message:"¿Are you sure you want to delete this Publication?.",okButton:"Delete",cancelButton:"Return"})&&f.delete(`api/isiPublications/${s}`).then(o=>{this.toast.success("Publication successfully removed!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.recargarTabla("General")}).catch(o=>console.log(o))}}},ao={class:"row mt-4 mx-4"},no={class:"col-12"},ro={class:"card mb-4"},co={class:"row pb-0 p-4"},uo={class:"col-12"},ho={class:"d-flex justify-content-end"},bo=e("i",{class:"fa-solid fa-rotate"},null,-1),mo=[bo],po={class:"card-body px-0 pt-0 pb-2",style:{"min-height":"400px"}},fo={class:"container"},Po={class:"table-responsive p-0"},go={class:"loader-sm"},_o={class:"table align-items-center mb-0",id:"MyTableIsiPublications"},vo=e("thead",null,[e("tr",{style:{color:"black"}},[e("th",{style:{"min-width":"16px"}}),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Status"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"User"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Author(s)"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Doi"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Article Title"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Journal Name"),e("th",{class:"text-uppercase text-xs font-weight-bolder"},"Year Published")])],-1),yo=e("td",null,null,-1),$o={class:"text-sm font-weight-bolder mb-0",style:{color:"black"}},ko={class:"align-middle text-end"},wo={class:"d-flex px-3 py-1 justify-content-center align-items-center"},Oo=["onClick"],Ro=e("i",{class:"fa fa-fw fa-edit"},null,-1),Bo=[Ro],Co=["onClick"],To=e("i",{class:"fa-regular fa-eye"},null,-1),Do=[To],Fo=["onClick"],Io=e("i",{class:"fa fa-fw fa-trash"},null,-1),So=[Io],Eo={key:0,class:"text-sm font-weight-bolder mb-0",style:{color:"#878686"}},Ho={key:1,class:"text-sm font-weight-bolder mb-0",style:{color:"#28A745"}},Vo={class:"text-sm mb-0"},No={key:0,class:"text-sm mb-0"},Uo={key:1,class:"text-sm mb-0 truncate-text"},Ao={key:0,class:"text-sm mb-0"},Lo={key:1,class:"text-sm mb-0"},Mo={key:0,class:"text-sm mb-0"},jo={key:1,class:"text-sm mb-0 truncate-text"},xo={key:0,class:"text-sm mb-0"},Yo={key:1,class:"text-sm mb-0"},qo={key:0,class:"text-sm mb-0"},Jo={key:1,class:"text-sm mb-0"},Ko=L('<div class="row"><div class="col-3"><label style="font-weight:500;"> These buttons use the elements selected in the table, if none exist, it will select all the records. </label></div><div class="col-auto"><label title="To select a single record from the table, just do \r Click on the box in the first column to select \r several consecutive hold SHIFT, to select several \r non-consecutive hold CTRL."><span class="badge bg-dark-grey fs-10">?</span></label></div></div>',1);function zo(s,t,o,n,r,a){const l=P("modalconfirmacion"),_=P("modalalerta"),d=P("modalver"),v=P("modaleditar"),R=P("modalcrear");return c(),h("div",ao,[e("div",no,[e("div",ro,[e("div",co,[e("div",uo,[e("div",ho,[e("a",{class:"btn btn-spacing btn-continue",id:"show-modal1",onClick:t[0]||(t[0]=i=>r.showNewIsiPublication=!0)},"New Publication"),b("   "),e("a",{class:"btn btn-spacing btn-search-blue",onClick:t[1]||(t[1]=i=>a.recargarTabla("General"))},mo)])])]),e("div",po,[e("div",fo,[e("div",Po,[u(e("div",go,null,512),[[H,r.mostrarCarga]]),u(e("table",_o,[vo,e("tbody",null,[(c(!0),h(B,null,C(r.isiPublications,i=>(c(),h("tr",{key:i.id},[yo,e("td",null,[e("p",$o,m(i.id),1)]),e("td",ko,[e("div",wo,[e("a",{class:"btn btn-alert btn-xs",title:"Edit",onClick:E=>a.editIsiPublication(i)},Bo,8,Oo),b("   "),e("a",{class:"btn btn-success btn-xs",title:"Details",onClick:E=>a.verIsiPublication(i)},Do,8,Co),b("   "),e("a",{class:"btn btn-closed btn-xs",title:"Delete",onClick:E=>a.deletePublication(i.id)},So,8,Fo)])]),e("td",null,[i.status=="Draft"?(c(),h("p",Eo,m(i.status),1)):y("",!0),i.status=="Finished"?(c(),h("p",Ho,m(i.status),1)):y("",!0)]),e("td",null,[e("p",Vo,m(i.usuario.name),1)]),e("td",null,[i.authors==null?(c(),h("p",No,"---")):(c(),h("p",Uo,m(i.authors),1))]),e("td",null,[i.doi==null?(c(),h("p",Ao,"---")):(c(),h("p",Lo,m(i.doi),1))]),e("td",null,[i.articleTitle==null?(c(),h("p",Mo,"---")):(c(),h("p",jo,m(i.articleTitle),1))]),e("td",null,[i.journalName==null?(c(),h("p",xo,"---")):(c(),h("p",Yo,m(i.journalName),1))]),e("td",null,[i.yearPublished==null?(c(),h("p",qo,"---")):(c(),h("p",Jo,m(i.yearPublished),1))])]))),128))])],512),[[H,r.mostrarTabla]]),Ko])])])]),$(l,{ref:"confirmation"},null,512),$(_,{ref:"alert"},null,512),r.showDetailsIsi?(c(),k(d,{key:0,isiPublication1:r.isiPublication,onClose:t[2]||(t[2]=i=>r.showDetailsIsi=!1)},null,8,["isiPublication1"])):y("",!0),r.showEditIsiPublication?(c(),k(v,{key:1,isiPublication1:r.isiPublicationEdit,onClose:t[3]||(t[3]=i=>r.showEditIsiPublication=!1),onRecarga:t[4]||(t[4]=i=>a.recargarTabla("General"))},null,8,["isiPublication1"])):y("",!0),r.showNewIsiPublication?(c(),k(R,{key:2,onClose:t[5]||(t[5]=i=>r.showNewIsiPublication=!1),onRecarga:t[6]||(t[6]=i=>a.recargarTabla("General"))})):y("",!0)])])}const il=S(lo,[["render",zo]]);export{il as default};
