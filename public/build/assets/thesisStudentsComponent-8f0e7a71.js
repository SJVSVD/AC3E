import{m as I,a as M}from"./mixins-00a35343.js";import{m as Z}from"./detalleThesisModal-4b63e0ac.js";import{m as N,a as F}from"./alertModal-064cb8ca.js";import{r as $,o as n,h as k,i as U,b as t,j as C,g as y,w as c,k as E,a as r,F as P,e as A,t as p,l as T,n as O,T as V,f as b,m as L,v as H,p as x}from"./index-a6b313c0.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import{m as Y,s as j}from"./multiselect-040cdaf8.js";/* empty css                                                         */import"./main-a60f64cc.js";const tt={components:{modalconfirmacion:N,modalalerta:F},mixins:[I],data:()=>({buttonText1:"New",buttonDisable:!1,autor:{name:"",institution:"",editing:!1},errors:[]}),methods:{capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},newAutor(){this.errors=[];for(const s in this.autor)(this.autor[s]===""||this.autor[s]===0)&&this.errors.push(s);var e="";if(this.errors.length!=0&&(this.errors.forEach(s=>{e=e+"The field "+this.capitalizeFirstLetter(s)+` is required
`}),this.toast.warning(e,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0){const s=this.$refs.closeBtn;this.$emit("submit",this.autor),s.click()}}}},et={name:"modal"},st={class:"modal-mask"},ot={class:"modal-wrapper"},it={class:"modal-container-xs"},nt={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},rt={class:"modal-body"},lt={class:"form-group"},at=t("label",{for:"name"},"Name: ",-1),dt=t("br",null,null,-1),ut={class:"form-group"},ht=t("label",{for:"institutionSelect"},"Institution:",-1),ct=t("br",null,null,-1),mt=t("option",{value:""},"Select Institution",-1),ft=["value"],pt={class:"modal-footer"},_t=["disabled"];function bt(e,s,u,_,d,i){const g=$("modalconfirmacion"),w=$("modalalerta");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",et,[t("div",st,[t("div",ot,[t("div",it,[t("div",nt,[C(e.$slots,"header",{},()=>[y(" New Tutor ")]),t("a",{class:"btn btn-closed",onClick:s[0]||(s[0]=l=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",rt,[C(e.$slots,"body",{},()=>[t("div",lt,[at,dt,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=l=>e.autor.name=l)},null,512),[[E,e.autor.name]])]),t("div",ut,[ht,ct,c(t("select",{id:"institutionSelect",class:"form-select","onUpdate:modelValue":s[2]||(s[2]=l=>e.autor.institution=l)},[mt,(n(!0),r(P,null,A(e.universities,l=>(n(),r("option",{value:l.name},p(l.name),9,ft))),256))],512),[[T,e.autor.institution]])])])]),t("div",pt,[C(e.$slots,"footer",{},()=>[t("button",{class:"btn btn-continue float-end",onClick:s[3]||(s[3]=l=>i.newAutor()),disabled:e.buttonDisable},p(e.buttonText1),9,_t)])]),O(g,{ref:"confirmation"},null,512),O(w,{ref:"alert"},null,512)])])])])]),_:3})}const J=R(tt,[["render",bt]]),vt={components:{modalconfirmacion:N,modalalerta:F},mixins:[I],data:()=>({buttonText1:"New",buttonDisable:!1,coautor:{name:"",institution:"",editing:!1},errors:[]}),methods:{capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},newCoautor(){this.errors=[];for(const s in this.coautor)(this.coautor[s]===""||this.coautor[s]===0)&&this.errors.push(s);var e="";if(this.errors.length!=0&&(this.errors.forEach(s=>{e=e+"The field "+this.capitalizeFirstLetter(s)+` is required
`}),this.toast.warning(e,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0){const s=this.$refs.closeBtn;this.$emit("submit",this.coautor),s.click()}}}},St={name:"modal"},gt={class:"modal-mask"},$t={class:"modal-wrapper"},yt={class:"modal-container-xs"},wt={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},Tt={class:"modal-body"},kt={class:"form-group"},Ct=t("label",{for:"name"},"Name: ",-1),Et=t("br",null,null,-1),Ot={class:"form-group"},Dt=t("label",{for:"institutionSelect"},"Institution:",-1),Mt=t("br",null,null,-1),Pt=t("option",{value:""},"Select Institution",-1),At=["value"],Bt={class:"modal-footer"},It=["disabled"];function Nt(e,s,u,_,d,i){const g=$("modalconfirmacion"),w=$("modalalerta");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",St,[t("div",gt,[t("div",$t,[t("div",yt,[t("div",wt,[C(e.$slots,"header",{},()=>[y(" New Coautor ")]),t("a",{class:"btn btn-closed",onClick:s[0]||(s[0]=l=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",Tt,[C(e.$slots,"body",{},()=>[t("div",kt,[Ct,Et,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=l=>e.coautor.name=l)},null,512),[[E,e.coautor.name]])]),t("div",Ot,[Dt,Mt,c(t("select",{id:"institutionSelect",class:"form-select","onUpdate:modelValue":s[2]||(s[2]=l=>e.coautor.institution=l)},[Pt,(n(!0),r(P,null,A(e.universities,l=>(n(),r("option",{value:l.name},p(l.name),9,At))),256))],512),[[T,e.coautor.institution]])])])]),t("div",Bt,[C(e.$slots,"footer",{},()=>[t("button",{class:"btn btn-continue float-end",onClick:s[3]||(s[3]=l=>i.newCoautor()),disabled:e.buttonDisable},p(e.buttonText1),9,It)])]),O(g,{ref:"confirmation"},null,512),O(w,{ref:"alert"},null,512)])])])])]),_:3})}const z=R(vt,[["render",Nt]]),Ft={components:{modalconfirmacion:N,modalalerta:F},mixins:[I],data:()=>({buttonText1:"Crear",buttonDisable:!1,other:{name:"",institution:""},errors:[]}),methods:{capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},newOther(){this.errors=[];for(const s in this.other)(this.other[s]===""||this.other[s]===0)&&this.errors.push(s);var e="";if(this.errors.length!=0&&(this.errors.forEach(s=>{e=e+"The field "+this.capitalizeFirstLetter(s)+` is required
`}),this.toast.warning(e,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0){const s=this.$refs.closeBtn;this.$emit("submit",this.other),s.click()}}}},Rt={name:"modal"},Ut={class:"modal-mask"},Vt={class:"modal-wrapper"},qt={class:"modal-container-xs"},Ht={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},Lt={class:"modal-body"},Yt={class:"form-group"},jt=t("label",{for:"name"},"Name: ",-1),Jt=t("br",null,null,-1),zt={class:"form-group"},Gt=t("label",{for:"institutionSelect"},"Institution:",-1),Xt=t("br",null,null,-1),Kt=t("option",{value:""},"Select Institution",-1),Wt=["value"],Qt={class:"modal-footer"},Zt=["disabled"];function xt(e,s,u,_,d,i){const g=$("modalconfirmacion"),w=$("modalalerta");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",Rt,[t("div",Ut,[t("div",Vt,[t("div",qt,[t("div",Ht,[C(e.$slots,"header",{},()=>[y(" New Other ")]),t("a",{class:"btn btn-closed",onClick:s[0]||(s[0]=l=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",Lt,[C(e.$slots,"body",{},()=>[t("div",Yt,[jt,Jt,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=l=>e.other.name=l)},null,512),[[E,e.other.name]])]),t("div",zt,[Gt,Xt,c(t("select",{id:"institutionSelect",class:"form-select","onUpdate:modelValue":s[2]||(s[2]=l=>e.other.institution=l)},[Kt,(n(!0),r(P,null,A(e.universities,l=>(n(),r("option",{value:l.name},p(l.name),9,Wt))),256))],512),[[T,e.other.institution]])])])]),t("div",Qt,[C(e.$slots,"footer",{},()=>[t("button",{class:"btn btn-continue float-end",onClick:s[3]||(s[3]=l=>i.newOther()),disabled:e.buttonDisable},p(e.buttonText1),9,Zt)])]),O(g,{ref:"confirmation"},null,512),O(w,{ref:"alert"},null,512)])])])])]),_:3})}const G=R(Ft,[["render",xt]]),te={components:{modalconfirmacion:N,modalalerta:F},mixins:[I],data:()=>({buttonText1:"Edit",buttonDisable:!1,errors:[]}),props:{tutors1:Object},methods:{eliminarDetalle(e){this.tutors1.splice(e,1)},confirmarDetalle(e){this.tutors1[e].editing=!1},editarDetalle(e){this.tutors1[e].editing=!0},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},editTutor(){this.tutors1.forEach(s=>{s.editing=!1}),this.$refs.closeBtn.click()}}},ee={name:"modal"},se={class:"modal-mask"},oe={class:"modal-wrapper"},ie={class:"modal-container-s"},ne={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},re={class:"modal-body"},le={class:"row"},ae={id:"tableDesign",class:"table align-items-center mb-0"},de=t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Name"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Institution"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions")])],-1),ue={key:0},he=t("td",{colspan:"10"}," No information available. ",-1),ce=[he],me={class:"text-sm mb-0"},fe={key:0},pe={class:"text-sm mb-0"},_e=["onUpdate:modelValue"],be={key:1},ve={class:"text-sm mb-0"},Se={key:2},ge={class:"text-sm mb-0"},$e=["onUpdate:modelValue"],ye=t("option",{value:""},"Select Institution",-1),we=["value"],Te={key:3},ke={class:"text-sm mb-0"},Ce={class:"text-sm mb-0"},Ee=["onClick"],Oe=t("i",{class:"fa fa-fw fa-edit"},null,-1),De=[Oe],Me=["onClick"],Pe=t("i",{class:"fa-solid fa-check"},null,-1),Ae=[Pe],Be=["onClick"],Ie=t("i",{class:"fa fa-fw fa-trash"},null,-1),Ne=[Ie],Fe={class:"modal-footer"},Re=["disabled"];function Ue(e,s,u,_,d,i){const g=$("modalconfirmacion"),w=$("modalalerta");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",ee,[t("div",se,[t("div",oe,[t("div",ie,[t("div",ne,[C(e.$slots,"header",{},()=>[y(" Edit tutors ")]),t("a",{class:"btn btn-closed",onClick:s[0]||(s[0]=l=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",re,[C(e.$slots,"body",{},()=>[t("div",le,[t("table",ae,[de,t("tbody",null,[u.tutors1.length==0?(n(),r("tr",ue,ce)):(n(!0),r(P,{key:1},A(u.tutors1,(l,S)=>(n(),r("tr",{key:S},[t("td",null,[t("p",me,p(S+1),1)]),l.editing?(n(),r("td",fe,[t("p",pe,[c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":m=>l.name=m},null,8,_e),[[E,l.name]])])])):(n(),r("td",be,[t("p",ve,p(l.name),1)])),l.editing?(n(),r("td",Se,[t("p",ge,[c(t("select",{class:"form-select","onUpdate:modelValue":m=>l.institution=m},[ye,(n(!0),r(P,null,A(e.universities,m=>(n(),r("option",{value:m.name},p(m.name),9,we))),256))],8,$e),[[T,l.institution]])])])):(n(),r("td",Te,[t("p",ke,p(l.institution),1)])),t("td",null,[t("p",Ce,[l.editing?(n(),r("a",{key:1,class:"btn btn-search-blue btn-xs",title:"Confirm",onClick:m=>i.confirmarDetalle(S)},Ae,8,Me)):(n(),r("a",{key:0,class:"btn btn-alert btn-xs",title:"Edit",onClick:m=>i.editarDetalle(S)},De,8,Ee)),y("   "),t("a",{class:"btn btn-closed btn-xs",title:"Delete",onClick:m=>i.eliminarDetalle(S)},Ne,8,Be)])])]))),128))])])])])]),t("div",Fe,[C(e.$slots,"footer",{},()=>[t("button",{class:"btn btn-continue float-end",onClick:s[1]||(s[1]=l=>i.editTutor()),disabled:e.buttonDisable},p(e.buttonText1),9,Re)])]),O(g,{ref:"confirmation"},null,512),O(w,{ref:"alert"},null,512)])])])])]),_:3})}const X=R(te,[["render",Ue]]),Ve={components:{modalconfirmacion:N,modalalerta:F},mixins:[I],data:()=>({buttonText1:"Edit",buttonDisable:!1,errors:[]}),props:{cotutors1:Object},methods:{eliminarDetalle(e){this.cotutors1.splice(e,1)},confirmarDetalle(e){this.cotutors1[e].editing=!1},editarDetalle(e){this.cotutors1[e].editing=!0},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},editCotutor(){this.cotutors1.forEach(s=>{s.editing=!1}),this.$refs.closeBtn.click()}}},qe={name:"modal"},He={class:"modal-mask"},Le={class:"modal-wrapper"},Ye={class:"modal-container-s"},je={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},Je={class:"modal-body"},ze={class:"row"},Ge={id:"tableDesign",class:"table align-items-center mb-0"},Xe=t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Name"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Institution"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions")])],-1),Ke={key:0},We=t("td",{colspan:"10"}," No information available. ",-1),Qe=[We],Ze={class:"text-sm mb-0"},xe={key:0},ts={class:"text-sm mb-0"},es=["onUpdate:modelValue"],ss={key:1},os={class:"text-sm mb-0"},is={key:2},ns={class:"text-sm mb-0"},rs=["onUpdate:modelValue"],ls=t("option",{value:""},"Select Institution",-1),as=["value"],ds={key:3},us={class:"text-sm mb-0"},hs={class:"text-sm mb-0"},cs=["onClick"],ms=t("i",{class:"fa fa-fw fa-edit"},null,-1),fs=[ms],ps=["onClick"],_s=t("i",{class:"fa-solid fa-check"},null,-1),bs=[_s],vs=["onClick"],Ss=t("i",{class:"fa fa-fw fa-trash"},null,-1),gs=[Ss],$s={class:"modal-footer"},ys=["disabled"];function ws(e,s,u,_,d,i){const g=$("modalconfirmacion"),w=$("modalalerta");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",qe,[t("div",He,[t("div",Le,[t("div",Ye,[t("div",je,[C(e.$slots,"header",{},()=>[y(" Edit cotutors ")]),t("a",{class:"btn btn-closed",onClick:s[0]||(s[0]=l=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",Je,[C(e.$slots,"body",{},()=>[t("div",ze,[t("table",Ge,[Xe,t("tbody",null,[u.cotutors1.length==0?(n(),r("tr",Ke,Qe)):(n(!0),r(P,{key:1},A(u.cotutors1,(l,S)=>(n(),r("tr",{key:S},[t("td",null,[t("p",Ze,p(S+1),1)]),l.editing?(n(),r("td",xe,[t("p",ts,[c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":m=>l.name=m},null,8,es),[[E,l.name]])])])):(n(),r("td",ss,[t("p",os,p(l.name),1)])),l.editing?(n(),r("td",is,[t("p",ns,[c(t("select",{class:"form-select","onUpdate:modelValue":m=>l.institution=m},[ls,(n(!0),r(P,null,A(e.universities,m=>(n(),r("option",{value:m.name},p(m.name),9,as))),256))],8,rs),[[T,l.institution]])])])):(n(),r("td",ds,[t("p",us,p(l.institution),1)])),t("td",null,[t("p",hs,[l.editing?(n(),r("a",{key:1,class:"btn btn-search-blue btn-xs",title:"Confirm",onClick:m=>i.confirmarDetalle(S)},bs,8,ps)):(n(),r("a",{key:0,class:"btn btn-alert btn-xs",title:"Edit",onClick:m=>i.editarDetalle(S)},fs,8,cs)),y("   "),t("a",{class:"btn btn-closed btn-xs",title:"Delete",onClick:m=>i.eliminarDetalle(S)},gs,8,vs)])])]))),128))])])])])]),t("div",$s,[C(e.$slots,"footer",{},()=>[t("button",{class:"btn btn-continue float-end",onClick:s[1]||(s[1]=l=>i.editCotutor()),disabled:e.buttonDisable},p(e.buttonText1),9,ys)])]),O(g,{ref:"confirmation"},null,512),O(w,{ref:"alert"},null,512)])])])])]),_:3})}const K=R(Ve,[["render",ws]]),Ts={components:{modalconfirmacion:N,modalalerta:F},mixins:[I],data:()=>({buttonText1:"Edit",buttonDisable:!1,errors:[]}),props:{others1:Object},methods:{eliminarDetalle(e){this.others1.splice(e,1)},confirmarDetalle(e){this.others1[e].editing=!1},editarDetalle(e){this.others1[e].editing=!0},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},editCotutor(){this.others1.forEach(s=>{s.editing=!1}),this.$refs.closeBtn.click()}}},ks={name:"modal"},Cs={class:"modal-mask"},Es={class:"modal-wrapper"},Os={class:"modal-container-s"},Ds={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},Ms={class:"modal-body"},Ps={class:"row"},As={id:"tableDesign",class:"table align-items-center mb-0"},Bs=t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Name"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Institution"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions")])],-1),Is={key:0},Ns=t("td",{colspan:"10"}," No information available. ",-1),Fs=[Ns],Rs={class:"text-sm mb-0"},Us={key:0},Vs={class:"text-sm mb-0"},qs=["onUpdate:modelValue"],Hs={key:1},Ls={class:"text-sm mb-0"},Ys={key:2},js={class:"text-sm mb-0"},Js=["onUpdate:modelValue"],zs=t("option",{value:""},"Select Institution",-1),Gs=["value"],Xs={key:3},Ks={class:"text-sm mb-0"},Ws={class:"text-sm mb-0"},Qs=["onClick"],Zs=t("i",{class:"fa fa-fw fa-edit"},null,-1),xs=[Zs],to=["onClick"],eo=t("i",{class:"fa-solid fa-check"},null,-1),so=[eo],oo=["onClick"],io=t("i",{class:"fa fa-fw fa-trash"},null,-1),no=[io],ro={class:"modal-footer"},lo=["disabled"];function ao(e,s,u,_,d,i){const g=$("modalconfirmacion"),w=$("modalalerta");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",ks,[t("div",Cs,[t("div",Es,[t("div",Os,[t("div",Ds,[C(e.$slots,"header",{},()=>[y(" Edit cotutors ")]),t("a",{class:"btn btn-closed",onClick:s[0]||(s[0]=l=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",Ms,[C(e.$slots,"body",{},()=>[t("div",Ps,[t("table",As,[Bs,t("tbody",null,[u.others1.length==0?(n(),r("tr",Is,Fs)):(n(!0),r(P,{key:1},A(u.others1,(l,S)=>(n(),r("tr",{key:S},[t("td",null,[t("p",Rs,p(S+1),1)]),l.editing?(n(),r("td",Us,[t("p",Vs,[c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":m=>l.name=m},null,8,qs),[[E,l.name]])])])):(n(),r("td",Hs,[t("p",Ls,p(l.name),1)])),l.editing?(n(),r("td",Ys,[t("p",js,[c(t("select",{class:"form-select","onUpdate:modelValue":m=>l.institution=m},[zs,(n(!0),r(P,null,A(e.universities,m=>(n(),r("option",{value:m.name},p(m.name),9,Gs))),256))],8,Js),[[T,l.institution]])])])):(n(),r("td",Xs,[t("p",Ks,p(l.institution),1)])),t("td",null,[t("p",Ws,[l.editing?(n(),r("a",{key:1,class:"btn btn-search-blue btn-xs",title:"Confirm",onClick:m=>i.confirmarDetalle(S)},so,8,to)):(n(),r("a",{key:0,class:"btn btn-alert btn-xs",title:"Edit",onClick:m=>i.editarDetalle(S)},xs,8,Qs)),y("   "),t("a",{class:"btn btn-closed btn-xs",title:"Delete",onClick:m=>i.eliminarDetalle(S)},no,8,oo)])])]))),128))])])])])]),t("div",ro,[C(e.$slots,"footer",{},()=>[t("button",{class:"btn btn-continue float-end",onClick:s[1]||(s[1]=l=>i.editCotutor()),disabled:e.buttonDisable},p(e.buttonText1),9,lo)])]),O(g,{ref:"confirmation"},null,512),O(w,{ref:"alert"},null,512)])])])])]),_:3})}const W=R(Ts,[["render",ao]]),uo={components:{modalProgressYear:Y,Multiselect:j,modalconfirmacion:N,modalalerta:F,modalAutor:J,modalCoautor:z,modalOther:G,modalEditarTutor:X,modalEditarCotutor:K,modalEditarOther:W},mixins:[I],data:()=>({thesisStudent:{studentName:"",identification:"",passport:"",run:"",gender:"",studentMail:"",thesisStatus:"",thesisTitle:"",academicDegree:"",degreeDenomination:"",tutorName:"",tutorInstitution:"",cotutorName:"",cotutorInstitution:"",otherName:"",otherInstitution:"",university:"",yearStart:"",monthStart:"",yearThesisEnd:"",monthEnd:"",researcherInvolved:null,resourcesCenter:null,posteriorArea:"",institutionPosteriorArea:"",progressReport:"",comments:""},options1:["Equipment","Information","Infrastructure","Other"],formData:null,showModalAutor:!1,showModalCoautor:!1,showModalOther:!1,showModalEditTutor:!1,showModalEditCotutor:!1,showModalEditOther:!1,buttonDisable:!1,file:null,draft:!1,showModalProgress:!1,tutors:[],cotutors:[],others:[],errors:[],universities:[],usuarios:[],researchers:[],idResearcher:"",buttonText:"Send Thesis",years:[]}),mounted(){this.calculateYears(),this.getProgressReport(),this.getUsuarios2(),this.getUsuarios();const e=new Date().getFullYear(),s=2e3,u=e+1;this.years=Array.from({length:u-s+1},(_,d)=>s+d),this.selectedYear=e,this.years.sort((_,d)=>d-_),this.fetchData()},methods:{fetchData(){M.get("/api/universities").then(e=>{this.universities=e.data}).catch(e=>{console.error("Error fetching universities:",e)})},getUsuarios(){M.get("api/researchers").then(e=>{this.researchers=e.data}).catch(e=>console.log(e))},handleFormSubmit1(e){this.thesisStudent.progressReport=e},getUsuarios2(){M.get("api/usuarios").then(e=>{this.usuarios=e.data.sort((s,u)=>s.name.localeCompare(u.name))}).catch(e=>console.log(e))},getProgressReport(){M.get("api/showProgressReport").then(e=>{this.thesisStudent.progressReport=e.data}).catch(e=>console.log(e))},handleFormSubmit1(e){this.tutors.push(e)},handleFormSubmit2(e){this.cotutors.push(e)},handleFormSubmit3(e){this.others.push(e)},onInput1(e){const s=e.target;this.thesisStudent.yearStart=s.value.slice(0,4)},onInput2(e){const s=e.target;this.thesisStudent.yearThesisEnd=s.value.slice(0,4)},clearFileInput(){this.file=null,this.$refs.fileInput.value=""},async getFile(e){this.file=e.target.files[0]},calculateYears(){const s=new Date().getFullYear()-20;this.years=Array.from({length:21},(u,_)=>s+_)},checkRut(){if(this.thesisStudent.run!=""){this.thesisStudent.run.replace(".","");var e=this.thesisStudent.run.replace(".","");e=e.replace("-","");var s=e.slice(0,-1),u=e.slice(-1).toUpperCase();this.thesisStudent.run=s+"-"+u}},validateInput(){this.thesisStudent.run=this.thesisStudent.run.replace(/[^0-9Kk\-]/g,"").replace(/(\-)\-+/g,"$1")},isNumberOrDash(e){const s=e.which?e.which:e.keyCode;(s===45&&this.thesisStudent.run.indexOf("-")!==-1||s>31&&s<48||s>57&&s<75||s>75&&s<107||s>107&&s!==109)&&e.preventDefault()},cerrarModal(){const e=this.$refs.closeBtn;this.$emit("recarga"),e.click()},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Save draft",message:"¿Are you sure you want to save this Thesis Student as a draft? this action cannot be undone.",okButton:"Save",cancelButton:"Return"})){var s="";this.thesisStudent.identification=="Run"?s=this.formatoRut(this.thesisStudent.run):s=this.thesisStudent.passport;var u="",_="",d="",i="",g="",w="",l="";this.tutors.length!=0&&(this.tutors.forEach(h=>{u+=h.name+","}),this.tutors.forEach(h=>{_+=h.institution+","})),this.cotutors.length!=0&&(this.cotutors.forEach(h=>{d+=h.name+","}),this.cotutors.forEach(h=>{i+=h.institution+","})),this.others.length!=0&&(this.others.forEach(h=>{g+=h.name+","}),this.others.forEach(h=>{w+=h.institution+","})),this.thesisStudent.resourcesCenter!=null&&this.thesisStudent.resourcesCenter!=[]&&this.thesisStudent.resourcesCenter.forEach(h=>{l+=h.value+","});var S="";this.thesisStudent.researcherInvolved!==null&&this.thesisStudent.researcherInvolved.length!==0&&this.thesisStudent.researcherInvolved.forEach((h,D)=>{S+=h.name,D===this.thesisStudent.researcherInvolved.length-1?S+=".":S+=", "});var m="";this.idResearcher!=""?m=this.idResearcher:m=this.userID;let v={idUsuario:m,status:"Draft",researcherInvolved:S,identification:this.thesisStudent.identification,studentName:this.thesisStudent.studentName,runOrPassport:s,gender:this.thesisStudent.gender,studentMail:this.thesisStudent.studentMail,thesisStatus:this.thesisStudent.thesisStatus,thesisTitle:this.thesisStudent.thesisTitle,academicDegree:this.thesisStudent.academicDegree,degreeDenomination:this.thesisStudent.degreeDenomination,tutorName:u,tutorInstitution:_,cotutorName:d,cotutorInstitution:i,otherName:g,otherInstitution:w,university:this.thesisStudent.university,yearStart:this.thesisStudent.yearStart,monthStart:this.thesisStudent.monthStart,monthEnd:this.thesisStudent.monthEnd,yearThesisEnd:this.thesisStudent.yearThesisEnd,resourcesCenter:l,posteriorArea:this.thesisStudent.posteriorArea,institutionPosteriorArea:this.thesisStudent.institutionPosteriorArea,comments:this.thesisStudent.comments,progressReport:this.thesisStudent.progressReport,file:this.file};M.post("api/thesisStudents",v,{headers:{"Content-Type":"multipart/form-data"}}).then(h=>{this.buttonDisable=!0,this.buttonText="Sending...",this.toast.success("Draft saved successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(h=>{h.response.status==422&&(this.errors=h.response.data.errors,this.toast.warning("There is an invalid value.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}))})}},async crearTesis(){this.errors=[];const e=["yearThesisEnd","posteriorArea","institutionPosteriorArea","comments","monthEnd","run","passport","tutorName","tutorInstitution","cotutorName","cotutorInstitution","otherName","otherInstitution"];for(const a in this.thesisStudent)e.includes(a)||(this.thesisStudent[a]===""||this.thesisStudent[a]===0||this.thesisStudent[a]==null||this.thesisStudent[a]==[])&&this.errors.push(a);if(this.thesisStudent.identification=="Run"&&this.thesisStudent.run==""?this.errors.push("run"):this.thesisStudent.identification=="Passport"&&this.thesisStudent.passport==""&&this.errors.push("passport"),this.tutors.length==0&&this.cotutors.length==0&&this.others.length==0&&this.errors.push("noTutors"),this.thesisStudent.identification=="Run"&&this.thesisStudent.run!=""){var s=this.validarRut(this.thesisStudent.run);s==!1&&this.errors.push("invalidRut")}this.thesisStudent.thesisStatus==1&&this.thesisStudent.yearThesisEnd==""&&this.errors.push("yearThesisEnd"),this.thesisStudent.thesisStatus==1&&this.thesisStudent.monthEnd==""&&this.errors.push("monthEnd"),this.thesisStudent.thesisStatus==1&&this.thesisStudent.yearThesisEnd==""&&this.errors.push("posteriorArea"),this.thesisStudent.thesisStatus==1&&this.thesisStudent.yearThesisEnd==""&&this.errors.push("institutionPosteriorArea");var u="";this.thesisStudent.identification=="Run"?u=this.formatoRut(this.thesisStudent.run):u=this.thesisStudent.passport;let _={idUsuario:D,runOrPassport:u,degreeDenomination:this.thesisStudent.degreeDenomination};var d=await M.post("../api/verifyThesis",_).then((function(a){return a.data}).bind(this)).catch(function(a){console.log(a)});d>0&&this.errors.push("duplicated");var i="";if(this.errors.length!=0&&(this.errors.forEach(a=>{a=="studentName"?i=i+`The field Student Name is required
`:a=="researcherInvolved"?i=i+`The field Researcher Involved is required
`:a=="invalidRut"?i=i+`The entered Run is invalid
`:a=="studentMail"?i=i+`The field Student Mail is required
`:a=="thesisStatus"?i=i+`The field Thesis Status is required
`:a=="thesisTitle"?i=i+`The field Thesis Title is required
`:a=="academicDegree"?i=i+`The field Academic Degree is required
`:a=="degreeDenomination"?i=i+`The field Degree Denomination is required
`:a=="tutorName"?i=i+`The field Tutor Name is required
`:a=="tutorInstitution"?i=i+`The field Tutor Institution is required
`:a=="cotutorName"?i=i+`The field Cotutor Name is required
`:a=="cotutorInstitution"?i=i+`The field Cotutor Institution is required
`:a=="otherName"?i=i+`The field Other Name is required
`:a=="otherInstitution"?i=i+`The field Other Institution is required
`:a=="academicDegree"?i=i+`The field Academic Degree is required
`:a=="yearStart"?i=i+`The field Year which starts is required
`:a=="monthStart"?i=i+`The field Month which starts is required
`:a=="yearThesisEnd"?i=i+`The field Year which thesis ends is required
`:a=="monthEnd"?i=i+`The field Month which thesis ends is required
`:a=="resourcesCenter"?i=i+`The field Resources provided is required
`:a=="posteriorArea"?i=i+`The field Posterior working area is required
`:a=="institutionPosteriorArea"?i=i+`The field Institution posterior area is required
`:a=="noTutors"?i=i+`A minimum of one tutor, co-tutor or other must enter
`:a=="duplicated"?i=i+`There is already a post with the same data, please try again.
`:i=i+"The field "+this.capitalizeFirstLetter(a)+` is required
`}),this.toast.warning(i,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Send Thesis",message:"¿Are you sure you want to send this thesis?.",okButton:"Send",cancelButton:"Return"})){var g="",w="",l="",S="",m="",v="",h="";this.tutors.length!=0&&(this.tutors.forEach(f=>{g+=f.name+","}),this.tutors.forEach(f=>{w+=f.institution+","})),this.cotutors.length!=0&&(this.cotutors.forEach(f=>{l+=f.name+","}),this.cotutors.forEach(f=>{S+=f.institution+","})),this.others.length!=0&&(this.others.forEach(f=>{m+=f.name+","}),this.others.forEach(f=>{v+=f.institution+","})),this.thesisStudent.resourcesCenter.forEach(f=>{h+=f.value+","});var D="";this.idResearcher!=""?D=this.idResearcher:D=this.userID;var B="";this.thesisStudent.researcherInvolved!==null&&this.thesisStudent.researcherInvolved.length!==0&&this.thesisStudent.researcherInvolved.forEach((f,q)=>{B+=f.name,q===this.thesisStudent.researcherInvolved.length-1?B+=".":B+=", "});let o={idUsuario:D,status:"Finished",researcherInvolved:B,identification:this.thesisStudent.identification,studentName:this.thesisStudent.studentName,runOrPassport:u,gender:this.thesisStudent.gender,studentMail:this.thesisStudent.studentMail,thesisStatus:this.thesisStudent.thesisStatus,thesisTitle:this.thesisStudent.thesisTitle,academicDegree:this.thesisStudent.academicDegree,degreeDenomination:this.thesisStudent.degreeDenomination,tutorName:g,tutorInstitution:w,cotutorName:l,cotutorInstitution:S,otherName:m,otherInstitution:v,university:this.thesisStudent.university,yearStart:this.thesisStudent.yearStart,monthStart:this.thesisStudent.monthStart,monthEnd:this.thesisStudent.monthEnd,yearThesisEnd:this.thesisStudent.yearThesisEnd,resourcesCenter:h,posteriorArea:this.thesisStudent.posteriorArea,institutionPosteriorArea:this.thesisStudent.institutionPosteriorArea,comments:this.thesisStudent.comments,progressReport:this.thesisStudent.progressReport,file:this.file};M.post("api/thesisStudents",o,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{this.buttonDisable=!0,this.buttonText="Sending...",this.toast.success("Thesis send successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)}).catch(f=>{f.response?f.response.status===422?this.toast.warning(`Validation error: ${f.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):f.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${f.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):f.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${f.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},ho={name:"modal"},co={class:"modal-mask"},mo={class:"modal-wrapper"},fo={class:"modal-container-xl"},po={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},_o={for:""},bo=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),vo=[bo],So={key:0,class:"col-5 m-0"},go={class:"fw-normal",style:{"font-size":"14px"}},$o=t("option",{disabled:"",value:""},"Select a researcher",-1),yo=["value"],wo={class:"modal-body"},To={class:"row"},ko={class:"col-md-6"},Co=t("label",{for:""},"AC3E researcher involved:",-1),Eo=t("label",{for:"",style:{color:"orange"}},"*",-1),Oo={class:"col-md-3"},Do=t("label",{for:"universitySelect"},"University that gives the Degree:",-1),Mo=t("label",{for:"universitySelect",style:{color:"orange"}},"*",-1),Po=t("br",null,null,-1),Ao=t("option",{value:""},"Select University",-1),Bo=["value"],Io={class:"col-md-3"},No=t("label",{for:""},"Resources provided by the Center: ",-1),Fo=t("label",{for:"",style:{color:"orange"}},"*",-1),Ro=t("br",null,null,-1),Uo=t("br",null,null,-1),Vo={class:"row"},qo={class:"col-md-3"},Ho=t("label",{for:""},"Student Name: ",-1),Lo=t("label",{for:"",style:{color:"orange"}},"*",-1),Yo=t("br",null,null,-1),jo={class:"col-md-3"},Jo=t("label",{for:""},"Gender: ",-1),zo=t("label",{for:"",style:{color:"orange"}},"*",-1),Go=t("br",null,null,-1),Xo=t("option",{disabled:"",value:""},"Select a Gender",-1),Ko=t("option",{value:"Male"},"Male",-1),Wo=t("option",{value:"Female"},"Female",-1),Qo=t("option",{value:"Non binary"},"Non binary",-1),Zo=t("option",{value:"Other"},"Other",-1),xo=[Xo,Ko,Wo,Qo,Zo],ti={class:"col-md-3"},ei=t("label",{for:""},"Identification: ",-1),si=t("label",{for:"",style:{color:"orange"}},"*",-1),oi=t("br",null,null,-1),ii=t("option",{disabled:"",value:""},"Select One",-1),ni=t("option",{value:"Run"},"Run",-1),ri=t("option",{value:"Passport"},"Passport",-1),li=[ii,ni,ri],ai={key:0,class:"col-3"},di=t("label",{for:""},"Run: ",-1),ui=t("label",{for:"",style:{color:"orange"}},"*",-1),hi=t("br",null,null,-1),ci={key:1,class:"col-3"},mi=t("label",{for:""},"Passport: ",-1),fi=t("label",{for:"",style:{color:"orange"}},"*",-1),pi=t("br",null,null,-1),_i=t("br",null,null,-1),bi={class:"row"},vi={class:"col-md-3"},Si=t("label",{for:""},"Student Mail: ",-1),gi=t("label",{for:"",style:{color:"orange"}},"*",-1),$i=t("br",null,null,-1),yi={class:"col-md-5"},wi=t("label",{for:""},"Academic Degree: ",-1),Ti=t("label",{for:"",style:{color:"orange"}},"*",-1),ki=t("br",null,null,-1),Ci=t("option",{disabled:"",value:""},"Select a degree",-1),Ei=t("option",{value:"Undergraduate degree or profesional title"},"Undergraduate degree or profesional title",-1),Oi=t("option",{value:"Master o equivalent"},"Master o equivalent",-1),Di=t("option",{value:"PhD degree"},"PhD degree",-1),Mi=[Ci,Ei,Oi,Di],Pi={class:"col-md-4"},Ai=t("label",{for:""},"Degree Denomination: ",-1),Bi=t("label",{for:"",style:{color:"orange"}},"*",-1),Ii=t("br",null,null,-1),Ni=t("br",null,null,-1),Fi={class:"row"},Ri={class:"col-md-4"},Ui=t("label",{for:""},"Thesis Title: ",-1),Vi=t("label",{for:"",style:{color:"orange"}},"*",-1),qi=t("br",null,null,-1),Hi={class:"col-md-3"},Li=t("label",{for:""},"Thesis Status: ",-1),Yi=t("label",{for:"",style:{color:"orange"}},"*",-1),ji=t("br",null,null,-1),Ji=t("option",{disabled:"",value:""},"Select One",-1),zi=t("option",{value:"1"},"Finished",-1),Gi=t("option",{value:"2"},"In progress",-1),Xi=[Ji,zi,Gi],Ki={key:0,class:"col-4"},Wi={class:"form-group"},Qi=t("label",{for:"archivo"},"Thesis Extract: ",-1),Zi=t("label",{for:"",style:{color:"orange"}},"*",-1),xi={key:1,class:"col-1 pt-2"},tn=t("br",null,null,-1),en=t("i",{class:"fa-solid fa-ban"},null,-1),sn=[en],on=t("hr",{size:"3",class:"separador"},null,-1),nn={class:"row"},rn={class:"col-md-4 d-flex justify-content-center"},ln=t("i",{class:"fa-solid fa-plus"},null,-1),an={class:"col-md-4 d-flex justify-content-center"},dn=t("i",{class:"fa-solid fa-plus"},null,-1),un={class:"col-md-4 d-flex justify-content-centerd-flex justify-content-center"},hn=t("i",{class:"fa-solid fa-plus"},null,-1),cn=t("hr",{size:"3",class:"separador"},null,-1),mn={class:"row"},fn={class:"col-md-3"},pn=t("label",{for:""},"Year in which student starts: ",-1),_n=t("label",{for:"",style:{color:"orange"}},"*",-1),bn=t("br",null,null,-1),vn=t("option",{disabled:"",value:""},"Select a year",-1),Sn=["value"],gn={class:"col-md-3"},$n=t("label",{for:"selectMonth"},"Month in which student starts:",-1),yn=t("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),wn=t("br",null,null,-1),Tn=t("option",{disabled:"",value:""},"Select a month",-1),kn=t("option",{value:"January"},"January",-1),Cn=t("option",{value:"February"},"February",-1),En=t("option",{value:"March"},"March",-1),On=t("option",{value:"April"},"April",-1),Dn=t("option",{value:"May"},"May",-1),Mn=t("option",{value:"June"},"June",-1),Pn=t("option",{value:"July"},"July",-1),An=t("option",{value:"August"},"August",-1),Bn=t("option",{value:"September"},"September",-1),In=t("option",{value:"October"},"October",-1),Nn=t("option",{value:"November"},"November",-1),Fn=t("option",{value:"December"},"December",-1),Rn=[Tn,kn,Cn,En,On,Dn,Mn,Pn,An,Bn,In,Nn,Fn],Un={class:"col-md-3"},Vn=t("label",{for:""},"Year in which the thesis ends: ",-1),qn={key:0,for:"",style:{color:"orange"}},Hn=t("br",null,null,-1),Ln=t("option",{disabled:"",value:""},"Select a year",-1),Yn=["value"],jn={class:"col-md-3"},Jn=t("label",{for:"selectMonth"},"Month in which the thesis ends:",-1),zn={key:0,for:"selectMonth",style:{color:"orange"}},Gn=t("br",null,null,-1),Xn=t("option",{disabled:"",value:""},"Select a month",-1),Kn=t("option",{value:"January"},"January",-1),Wn=t("option",{value:"February"},"February",-1),Qn=t("option",{value:"March"},"March",-1),Zn=t("option",{value:"April"},"April",-1),xn=t("option",{value:"May"},"May",-1),tr=t("option",{value:"June"},"June",-1),er=t("option",{value:"July"},"July",-1),sr=t("option",{value:"August"},"August",-1),or=t("option",{value:"September"},"September",-1),ir=t("option",{value:"October"},"October",-1),nr=t("option",{value:"November"},"November",-1),rr=t("option",{value:"December"},"December",-1),lr=[Xn,Kn,Wn,Qn,Zn,xn,tr,er,sr,or,ir,nr,rr],ar=t("br",null,null,-1),dr={class:"row"},ur={key:0,class:"col-md-3"},hr=t("label",{for:""},"Posterior working area: ",-1),cr=t("label",{for:"",style:{color:"orange"}},"*",-1),mr=t("br",null,null,-1),fr=t("option",{disabled:"",value:""},"Select an area",-1),pr=t("option",{value:"Private Education"},"Private Education",-1),_r=t("option",{value:"Business"},"Business",-1),br=t("option",{value:"Own entrepreneurship"},"Own entrepreneurship",-1),vr=t("option",{value:"Government"},"Government",-1),Sr=t("option",{value:"Public Education"},"Public Education",-1),gr=t("option",{value:"Social-ONG"},"Social-ONG",-1),$r=t("option",{value:"In the Center"},"In the Center",-1),yr=t("option",{value:"None of the above"},"None of the above",-1),wr=[fr,pr,_r,br,vr,Sr,gr,$r,yr],Tr={key:1,class:"col-md-4"},kr=t("label",{for:""},"Institution of Posterior working area: ",-1),Cr=t("label",{for:"",style:{color:"orange"}},"*",-1),Er=t("br",null,null,-1),Or={class:"col-md-5"},Dr=t("label",{for:""},"Comments: ",-1),Mr=t("br",null,null,-1),Pr={class:"modal-footer"},Ar={class:"form-check-label"},Br=["disabled"],Ir=["disabled"];function Nr(e,s,u,_,d,i){const g=$("Multiselect"),w=$("modalOther"),l=$("modalCoautor"),S=$("modalAutor"),m=$("modalEditarTutor"),v=$("modalEditarCotutor"),h=$("modalEditarOther"),D=$("modalconfirmacion"),B=$("modalalerta"),a=$("modalProgressYear");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",ho,[t("div",co,[t("div",mo,[t("div",fo,[t("div",po,[C(e.$slots,"header",{},()=>[y(" New Thesis ")]),t("label",_o,[y("Progress year: "+p(e.thesisStudent.progressReport)+"    ",1),t("a",{class:"btn",onClick:s[0]||(s[0]=o=>e.showModalProgress=!0)},vo)]),e.is("Administrator")?(n(),r("label",So,[y(" Researcher: "),t("label",go,[c(t("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=o=>e.idResearcher=o)},[$o,(n(!0),r(P,null,A(e.usuarios,o=>(n(),r("option",{key:o.id,value:o.id},p(o.name),9,yo))),128))],512),[[T,e.idResearcher]])])])):b("",!0),t("a",{class:"btn btn-closed",onClick:s[2]||(s[2]=o=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",wo,[C(e.$slots,"body",{},()=>[t("div",To,[t("div",ko,[Co,Eo,O(g,{placeholder:"Select the participants",modelValue:e.thesisStudent.researcherInvolved,"onUpdate:modelValue":s[3]||(s[3]=o=>e.thesisStudent.researcherInvolved=o),searchable:!0,"close-on-select":!1,createTag:!0,options:e.researchers,mode:"tags",label:"name",trackBy:"id",object:!0},null,8,["modelValue","options"])]),t("div",Oo,[Do,Mo,Po,c(t("select",{id:"universitySelect",class:"form-select","onUpdate:modelValue":s[4]||(s[4]=o=>e.thesisStudent.university=o)},[Ao,(n(!0),r(P,null,A(e.universities,o=>(n(),r("option",{value:o.name},p(o.name),9,Bo))),256))],512),[[T,e.thesisStudent.university]])]),t("div",Io,[No,Fo,Ro,t("div",null,[O(g,{placeholder:"Select the options",modelValue:e.thesisStudent.resourcesCenter,"onUpdate:modelValue":s[5]||(s[5]=o=>e.thesisStudent.resourcesCenter=o),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:e.options1,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])])]),Uo,t("div",Vo,[t("div",qo,[Ho,Lo,Yo,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>e.thesisStudent.studentName=o)},null,512),[[E,e.thesisStudent.studentName]])]),t("div",jo,[Jo,zo,Go,c(t("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=o=>e.thesisStudent.gender=o)},xo,512),[[T,e.thesisStudent.gender]])]),t("div",ti,[ei,si,oi,c(t("select",{class:"form-select",onChange:s[8]||(s[8]=o=>{e.thesisStudent.run="",e.thesisStudent.passport=""}),"onUpdate:modelValue":s[9]||(s[9]=o=>e.thesisStudent.identification=o)},li,544),[[T,e.thesisStudent.identification]])]),e.thesisStudent.identification=="Run"?(n(),r("div",ai,[di,ui,hi,c(t("input",{type:"text",class:"form-control",onInput:s[10]||(s[10]=(...o)=>i.validateInput&&i.validateInput(...o)),onKeypress:s[11]||(s[11]=(...o)=>i.isNumberOrDash&&i.isNumberOrDash(...o)),onKeyup:s[12]||(s[12]=o=>i.checkRut()),"onUpdate:modelValue":s[13]||(s[13]=o=>e.thesisStudent.run=o)},null,544),[[E,e.thesisStudent.run]])])):b("",!0),e.thesisStudent.identification=="Passport"?(n(),r("div",ci,[mi,fi,pi,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=o=>e.thesisStudent.passport=o)},null,512),[[E,e.thesisStudent.passport]])])):b("",!0)]),_i,t("div",bi,[t("div",vi,[Si,gi,$i,c(t("input",{type:"email",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=o=>e.thesisStudent.studentMail=o)},null,512),[[E,e.thesisStudent.studentMail]])]),t("div",yi,[wi,Ti,ki,c(t("select",{class:"form-select","onUpdate:modelValue":s[16]||(s[16]=o=>e.thesisStudent.academicDegree=o)},Mi,512),[[T,e.thesisStudent.academicDegree]])]),t("div",Pi,[Ai,Bi,Ii,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[17]||(s[17]=o=>e.thesisStudent.degreeDenomination=o)},null,512),[[E,e.thesisStudent.degreeDenomination]])])]),Ni,t("div",Fi,[t("div",Ri,[Ui,Vi,qi,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[18]||(s[18]=o=>e.thesisStudent.thesisTitle=o)},null,512),[[E,e.thesisStudent.thesisTitle]])]),t("div",Hi,[Li,Yi,ji,c(t("select",{class:"form-select","onUpdate:modelValue":s[19]||(s[19]=o=>e.thesisStudent.thesisStatus=o)},Xi,512),[[T,e.thesisStudent.thesisStatus]])]),e.thesisStudent.thesisStatus=="1"?(n(),r("div",Ki,[t("div",Wi,[Qi,Zi,t("input",{type:"file",ref:"fileInput",accept:".pdf",class:"form-control",onChange:s[20]||(s[20]=(...o)=>i.getFile&&i.getFile(...o))},null,544)])])):b("",!0),e.thesisStudent.thesisStatus=="1"?(n(),r("div",xi,[tn,t("a",{class:"btn btn-closed",title:"Clear Input",onClick:s[21]||(s[21]=(...o)=>i.clearFileInput&&i.clearFileInput(...o))},sn)])):b("",!0)]),on,t("div",nn,[t("div",rn,[e.tutors.length!=0?(n(),r("a",{key:0,class:"btn btn-continue",onClick:s[22]||(s[22]=o=>e.showModalEditTutor=!0)},p(e.tutors.length),1)):b("",!0),y("   "),t("a",{class:"btn btn-search-blue",onClick:s[23]||(s[23]=o=>e.showModalAutor=!0)},[ln,y(" Add Tutor ")])]),t("div",an,[e.cotutors.length!=0?(n(),r("a",{key:0,class:"btn btn-continue",onClick:s[24]||(s[24]=o=>e.showModalEditCotutor=!0)},p(e.cotutors.length),1)):b("",!0),y("   "),t("a",{class:"btn btn-search-blue",onClick:s[25]||(s[25]=o=>e.showModalCoautor=!0)},[dn,y(" Add Cotutor ")])]),t("div",un,[e.others.length!=0?(n(),r("a",{key:0,class:"btn btn-continue",onClick:s[26]||(s[26]=o=>e.showModalEditOther=!0)},p(e.others.length),1)):b("",!0),y("   "),t("a",{class:"btn btn-search-blue",onClick:s[27]||(s[27]=o=>e.showModalOther=!0)},[hn,y(" Add Other ")])])]),cn,t("div",mn,[t("div",fn,[pn,_n,bn,c(t("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":s[28]||(s[28]=o=>e.thesisStudent.yearStart=o)},[vn,(n(!0),r(P,null,A(e.years,o=>(n(),r("option",{key:o,value:o},p(o),9,Sn))),128))],512),[[T,e.thesisStudent.yearStart]])]),t("div",gn,[$n,yn,wn,c(t("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":s[29]||(s[29]=o=>e.thesisStudent.monthStart=o)},Rn,512),[[T,e.thesisStudent.monthStart]])]),t("div",Un,[Vn,e.thesisStudent.thesisStatus==1?(n(),r("label",qn,"*")):b("",!0),Hn,c(t("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":s[30]||(s[30]=o=>e.thesisStudent.yearThesisEnd=o)},[Ln,(n(!0),r(P,null,A(e.years,o=>(n(),r("option",{key:o,value:o},p(o),9,Yn))),128))],512),[[T,e.thesisStudent.yearThesisEnd]])]),t("div",jn,[Jn,e.thesisStudent.thesisStatus==1?(n(),r("label",zn,"*")):b("",!0),Gn,c(t("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":s[31]||(s[31]=o=>e.thesisStudent.monthEnd=o)},lr,512),[[T,e.thesisStudent.monthEnd]])])]),ar,t("div",dr,[e.thesisStudent.thesisStatus==1?(n(),r("div",ur,[hr,cr,mr,c(t("select",{class:"form-select","onUpdate:modelValue":s[32]||(s[32]=o=>e.thesisStudent.posteriorArea=o)},wr,512),[[T,e.thesisStudent.posteriorArea]])])):b("",!0),e.thesisStudent.thesisStatus==1?(n(),r("div",Tr,[kr,Cr,Er,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[33]||(s[33]=o=>e.thesisStudent.institutionPosteriorArea=o)},null,512),[[E,e.thesisStudent.institutionPosteriorArea]])])):b("",!0),t("div",Or,[Dr,Mr,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[34]||(s[34]=o=>e.thesisStudent.comments=o)},null,512),[[E,e.thesisStudent.comments]])])])])]),t("div",Pr,[C(e.$slots,"footer",{},()=>[t("label",Ar,[c(t("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":s[35]||(s[35]=o=>e.draft=o)},null,512),[[L,e.draft]]),y(" Save as a draft")]),e.draft==!1?(n(),r("a",{key:0,class:"btn btn-continue float-end",onClick:s[36]||(s[36]=o=>i.crearTesis()),disabled:e.buttonDisable},p(e.buttonText),9,Br)):(n(),r("a",{key:1,class:"btn btn-continue float-end",onClick:s[37]||(s[37]=o=>i.guardarBorrador()),disabled:e.buttonDisable}," Save draft ",8,Ir))])]),e.showModalOther?(n(),k(w,{key:0,onClose:s[38]||(s[38]=o=>e.showModalOther=!1),onSubmit:i.handleFormSubmit3},null,8,["onSubmit"])):b("",!0),e.showModalCoautor?(n(),k(l,{key:1,onClose:s[39]||(s[39]=o=>e.showModalCoautor=!1),onSubmit:i.handleFormSubmit2},null,8,["onSubmit"])):b("",!0),e.showModalAutor?(n(),k(S,{key:2,onClose:s[40]||(s[40]=o=>e.showModalAutor=!1),onSubmit:i.handleFormSubmit1},null,8,["onSubmit"])):b("",!0),e.showModalEditTutor?(n(),k(m,{key:3,tutors1:e.tutors,onClose:s[41]||(s[41]=o=>e.showModalEditTutor=!1)},null,8,["tutors1"])):b("",!0),e.showModalEditCotutor?(n(),k(v,{key:4,cotutors1:e.cotutors,onClose:s[42]||(s[42]=o=>e.showModalEditCotutor=!1)},null,8,["cotutors1"])):b("",!0),e.showModalEditOther?(n(),k(h,{key:5,others1:e.others,onClose:s[43]||(s[43]=o=>e.showModalEditOther=!1)},null,8,["others1"])):b("",!0),O(D,{ref:"confirmation"},null,512),O(B,{ref:"alert"},null,512),e.showModalProgress?(n(),k(a,{key:6,progressYear:e.thesisStudent.progressReport,onClose:s[44]||(s[44]=o=>e.showModalProgress=!1),onSubmit:i.handleFormSubmit1},null,8,["progressYear","onSubmit"])):b("",!0)])])])])]),_:3})}const Fr=R(uo,[["render",Nr]]),Rr={components:{modalProgressYear:Y,Multiselect:j,modalconfirmacion:N,modalalerta:F,modalAutor:J,modalCoautor:z,modalOther:G,modalEditarTutor:X,modalEditarCotutor:K,modalEditarOther:W},mixins:[I],data:()=>({thesisStudent:{studentName:"",identification:"",passport:"",run:"",gender:"",studentMail:"",thesisStatus:"",thesisTitle:"",academicDegree:"",degreeDenomination:"",tutorName:"",tutorInstitution:"",cotutorName:"",cotutorInstitution:"",otherName:"",otherInstitution:"",university:"",yearStart:"",monthStart:"",monthEnd:"",yearThesisEnd:"",resourcesCenter:null,researcherInvolved:null,posteriorArea:"",institutionPosteriorArea:"",progressReport:"",comments:""},options1:["Equipment","Information","Infrastructure","Other"],formData:null,showModalAutor:!1,showModalCoautor:!1,showModalOther:!1,showModalEditTutor:!1,showModalEditCotutor:!1,showModalEditOther:!1,buttonDisable:!1,file:null,draft:!1,showModalProgress:!1,tutors:[],cotutors:[],others:[],errors:[],universities:[],id:"",user:"",researchers:[],usuarios:[],idResearcher:"",buttonText:"Edit Thesis",years:[]}),mounted(){this.calculateYears(),this.fetchData()},props:{thesisStudent1:Object},created(){if(this.getUsuarios(),this.getUsuarios2(),this.id=this.thesisStudent1.id,this.idResearcher=this.thesisStudent1.idUsuario,this.user=this.thesisStudent1.usuario.name,this.thesisStudent.studentName=this.thesisStudent1.studentName,this.thesisStudent.progressReport=this.thesisStudent1.progressReport,this.thesisStudent.identification=this.thesisStudent1.identification,this.thesisStudent.monthStart=this.thesisStudent1.monthStart,this.thesisStudent.monthEnd=this.thesisStudent1.monthEnd,this.thesisStudent1.identification=="Run"?this.thesisStudent.run=this.thesisStudent1.runOrPassport:this.thesisStudent.passport=this.thesisStudent1.runOrPassport,this.thesisStudent1.resourcesCenter!=null&&this.thesisStudent1.resourcesCenter!=[]){const _=this.thesisStudent1.resourcesCenter.split(",");this.thesisStudent.resourcesCenter=_.slice(0,-1).map(d=>({value:d,name:d}))}if(this.thesisStudent1.tutorName!=null){const _=this.thesisStudent1.tutorName.split(","),d=this.thesisStudent1.tutorInstitution.split(",");this.tutors=_.slice(0,-1).map((i,g)=>({name:i,institution:d[g]}))}if(this.thesisStudent1.cotutorName!=null){const _=this.thesisStudent1.cotutorName.split(","),d=this.thesisStudent1.cotutorInstitution.split(",");this.cotutors=_.slice(0,-1).map((i,g)=>({name:i,institution:d[g]}))}if(this.thesisStudent1.otherName!=null){const _=this.thesisStudent1.otherName.split(","),d=this.thesisStudent1.otherInstitution.split(",");this.others=_.slice(0,-1).map((i,g)=>({name:i,institution:d[g]}))}this.thesisStudent.thesisStatus=this.thesisStudent1.thesisStatus,this.thesisStudent.gender=this.thesisStudent1.gender,this.thesisStudent.studentMail=this.thesisStudent1.studentMail,this.thesisStudent.thesisTitle=this.thesisStudent1.thesisTitle,this.thesisStudent.academicDegree=this.thesisStudent1.academicDegree,this.thesisStudent.degreeDenomination=this.thesisStudent1.degreeDenomination,this.thesisStudent.tutorInstitution=this.thesisStudent1.tutorInstitution,this.thesisStudent.cotutorName=this.thesisStudent1.cotutorName,this.thesisStudent.cotutorInstitution=this.thesisStudent1.cotutorInstitution,this.thesisStudent.otherName=this.thesisStudent1.otherName,this.thesisStudent.otherInstitution=this.thesisStudent1.otherInstitution,this.thesisStudent.university=this.thesisStudent1.university,this.thesisStudent.yearStart=this.thesisStudent1.yearStart,this.thesisStudent.yearThesisEnd=this.thesisStudent1.yearThesisEnd,this.thesisStudent.posteriorArea=this.thesisStudent1.posteriorArea,this.thesisStudent.institutionPosteriorArea=this.thesisStudent1.institutionPosteriorArea,this.thesisStudent.comments=this.thesisStudent1.comments;const e=new Date().getFullYear(),s=2e3,u=e+1;if(this.years=Array.from({length:u-s+1},(_,d)=>s+d),this.selectedYear=e,this.years.sort((_,d)=>d-_),this.thesisStudent1.researcherInvolved!=null){const _=this.thesisStudent1.researcherInvolved.split(",");this.thesisStudent.researcherInvolved=_.map((d,i)=>(d=d.trim(),d.endsWith(".")&&(d=d.slice(0,-1)),{value:d,name:d}))}},methods:{fetchData(){M.get("/api/universities").then(e=>{this.universities=e.data}).catch(e=>{console.error("Error fetching universities:",e)})},getUsuarios2(){M.get("api/usuarios").then(e=>{this.usuarios=e.data.sort((s,u)=>s.name.localeCompare(u.name))}).catch(e=>console.log(e))},getUsuarios(){M.get("api/researchers").then(e=>{this.researchers=e.data}).catch(e=>console.log(e))},handleFormSubmit1(e){this.thesisStudent.progressReport=e},descargarExtracto(e,s){M({url:`api/thesisDownload/${e}`,method:"GET",responseType:"arraybuffer"}).then(u=>{let _=new Blob([u.data],{type:u.headers["content-type"]}),d=document.createElement("a");if(d.href=window.URL.createObjectURL(_),_.type.includes("pdf"))d.download=`Thesis-${s}.pdf`;else if(_.type.includes("image"))d.download=`Thesis-${s}.png`;else{console.error("Tipo de archivo no compatible");return}d.click()})},handleFormSubmit1(e){this.tutors.push(e)},handleFormSubmit2(e){this.cotutors.push(e)},handleFormSubmit3(e){this.others.push(e)},onInput1(e){const s=e.target;this.thesisStudent.yearStart=s.value.slice(0,4)},onInput2(e){const s=e.target;this.thesisStudent.yearThesisEnd=s.value.slice(0,4)},clearFileInput(){this.file=null,this.$refs.fileInput.value=""},async getFile(e){this.file=e.target.files[0]},calculateYears(){const s=new Date().getFullYear()-20;this.years=Array.from({length:21},(u,_)=>s+_)},checkRut(){if(this.thesisStudent.run!=""){this.thesisStudent.run.replace(".","");var e=this.thesisStudent.run.replace(".","");e=e.replace("-","");var s=e.slice(0,-1),u=e.slice(-1).toUpperCase();this.thesisStudent.run=s+"-"+u}},validateInput(){this.thesisStudent.run=this.thesisStudent.run.replace(/[^0-9Kk\-]/g,"").replace(/(\-)\-+/g,"$1")},isNumberOrDash(e){const s=e.which?e.which:e.keyCode;(s===45&&this.thesisStudent.run.indexOf("-")!==-1||s>31&&s<48||s>57&&s<75||s>75&&s<107||s>107&&s!==109)&&e.preventDefault()},cerrarModal(){const e=this.$refs.closeBtn;this.$emit("recarga"),e.click()},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},async guardarBorrador(){if(await this.$refs.confirmation.show({title:"Edit draft",message:"¿Are you sure you want to edit this Thesis Student as a draft? this action cannot be undone.",okButton:"Edit",cancelButton:"Return"})){var s="";this.thesisStudent.identification=="Run"?s=this.formatoRut(this.thesisStudent.run):s=this.thesisStudent.passport;var u="",_="",d="",i="",g="",w="",l="";this.tutors.length!=0&&(this.tutors.forEach(h=>{u+=h.name+","}),this.tutors.forEach(h=>{_+=h.institution+","})),this.cotutors.length!=0&&(this.cotutors.forEach(h=>{d+=h.name+","}),this.cotutors.forEach(h=>{i+=h.institution+","})),this.others.length!=0&&(this.others.forEach(h=>{g+=h.name+","}),this.others.forEach(h=>{w+=h.institution+","})),this.thesisStudent.resourcesCenter!=null&&this.thesisStudent.resourcesCenter!=[]&&this.thesisStudent.resourcesCenter.forEach(h=>{l+=h.value+","});var S="";this.thesisStudent.researcherInvolved!==null&&this.thesisStudent.researcherInvolved.length!==0&&this.thesisStudent.researcherInvolved.forEach((h,D)=>{S+=h.name,D===this.thesisStudent.researcherInvolved.length-1?S+=".":S+=", "});var m="";this.idResearcher!=""?m=this.idResearcher:m=this.userID;let v={idUsuario:m,status:"Draft",researcherInvolved:S,identification:this.thesisStudent.identification,studentName:this.thesisStudent.studentName,runOrPassport:s,gender:this.thesisStudent.gender,studentMail:this.thesisStudent.studentMail,thesisStatus:this.thesisStudent.thesisStatus,thesisTitle:this.thesisStudent.thesisTitle,academicDegree:this.thesisStudent.academicDegree,degreeDenomination:this.thesisStudent.degreeDenomination,tutorName:u,tutorInstitution:_,cotutorName:d,cotutorInstitution:i,otherName:g,otherInstitution:w,university:this.thesisStudent.university,yearStart:this.thesisStudent.yearStart,monthStart:this.thesisStudent.monthStart,monthEnd:this.thesisStudent.monthEnd,yearThesisEnd:this.thesisStudent.yearThesisEnd,resourcesCenter:l,posteriorArea:this.thesisStudent.posteriorArea,institutionPosteriorArea:this.thesisStudent.institutionPosteriorArea,comments:this.thesisStudent.comments,progressReport:this.thesisStudent.progressReport};console.log(v),M.put(`api/thesisStudents/${this.id}`,v,{headers:{"Content-Type":"multipart/form-data"}}).then(h=>{this.buttonDisable=!0,this.buttonText="Sending...",console.log(h.data),this.toast.success("Draft edited successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1});const D=new FormData;D.append("id",this.id),D.append("file",this.file),M.post("api/thesisStudents/addFile",D,{headers:{"Content-Type":"multipart/form-data"}}).then(B=>{console.log(B.data),this.toast.success("File added successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)})}).catch(h=>{h.response.status==422&&(this.errors=h.response.data.errors,this.toast.warning("There is an invalid value.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}))})}},async crearTesis(){this.errors=[];const e=["yearThesisEnd","posteriorArea","institutionPosteriorArea","comments","monthEnd","run","passport","tutorName","tutorInstitution","cotutorName","cotutorInstitution","otherName","otherInstitution"];for(const a in this.thesisStudent)e.includes(a)||(this.thesisStudent[a]===""||this.thesisStudent[a]===0||this.thesisStudent[a]==null||this.thesisStudent[a]==[])&&this.errors.push(a);if(this.thesisStudent.identification=="Run"&&this.thesisStudent.run==""?this.errors.push("run"):this.thesisStudent.identification=="Passport"&&this.thesisStudent.passport==""&&this.errors.push("passport"),this.tutors.length==0&&this.cotutors.length==0&&this.others.length==0&&this.errors.push("noTutors"),this.thesisStudent.identification=="Run"&&this.thesisStudent.run!=""){var s=this.validarRut(this.thesisStudent.run);s==!1&&this.errors.push("invalidRut")}this.thesisStudent.thesisStatus==1&&this.thesisStudent.yearThesisEnd==""&&this.errors.push("yearThesisEnd"),this.thesisStudent.thesisStatus==1&&this.thesisStudent.monthEnd==""&&this.errors.push("monthEnd"),this.thesisStudent.thesisStatus==1&&this.thesisStudent.yearThesisEnd==""&&this.errors.push("posteriorArea"),this.thesisStudent.thesisStatus==1&&this.thesisStudent.yearThesisEnd==""&&this.errors.push("institutionPosteriorArea");var u="";this.thesisStudent.identification=="Run"?u=this.formatoRut(this.thesisStudent.run):u=this.thesisStudent.passport;let _={id:this.id,runOrPassport:u,degreeDenomination:this.thesisStudent.degreeDenomination};var d=await M.post("../api/verifyThesis",_).then((function(a){return a.data}).bind(this)).catch(function(a){console.log(a)});d>0&&this.errors.push("duplicated");var i="";if(this.errors.length!=0&&(this.errors.forEach(a=>{a=="studentName"?i=i+`The field Student Name is required
`:a=="invalidRut"?i=i+`The entered run is invalid
`:a=="studentMail"?i=i+`The field Student Mail is required
`:a=="thesisStatus"?i=i+`The field Thesis Status is required
`:a=="thesisTitle"?i=i+`The field Thesis Title is required
`:a=="academicDegree"?i=i+`The field Academic Degree is required
`:a=="degreeDenomination"?i=i+`The field Degree Denomination is required
`:a=="tutorName"?i=i+`The field Tutor Name is required
`:a=="tutorInstitution"?i=i+`The field Tutor Institution is required
`:a=="cotutorName"?i=i+`The field Cotutor Name is required
`:a=="cotutorInstitution"?i=i+`The field Cotutor Institution is required
`:a=="otherName"?i=i+`The field Other Name is required
`:a=="otherInstitution"?i=i+`The field Other Institution is required
`:a=="academicDegree"?i=i+`The field Academic Degree is required
`:a=="yearStart"?i=i+`The field Year when starts is required
`:a=="yearThesisEnd"?i=i+`The field Year when thesis ends is required
`:a=="resourcesCenter"?i=i+`The field Resources provided is required
`:a=="posteriorArea"?i=i+`The field Posterior working area is required
`:a=="institutionPosteriorArea"?i=i+`The field Institution posterior area is required
`:a=="noTutors"?i=i+`A minimum of one tutor, co-tutor or other must enter
`:a=="duplicated"?i=i+`There is already a post with the same data, please try again.
`:i=i+"The field "+this.capitalizeFirstLetter(a)+` is required
`}),this.toast.warning(i,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})),this.errors.length===0&&await this.$refs.confirmation.show({title:"Edit Thesis",message:"¿Are you sure you want to edit this thesis?.",okButton:"Edit",cancelButton:"Return"})){var g="",w="",l="",S="",m="",v="",h="";this.tutors.length!=0&&(this.tutors.forEach(f=>{g+=f.name+","}),this.tutors.forEach(f=>{w+=f.institution+","})),this.cotutors.length!=0&&(this.cotutors.forEach(f=>{l+=f.name+","}),this.cotutors.forEach(f=>{S+=f.institution+","})),this.others.length!=0&&(this.others.forEach(f=>{m+=f.name+","}),this.others.forEach(f=>{v+=f.institution+","})),this.thesisStudent.resourcesCenter.forEach(f=>{h+=f.value+","});var D="";this.thesisStudent.researcherInvolved!==null&&this.thesisStudent.researcherInvolved.length!==0&&this.thesisStudent.researcherInvolved.forEach((f,q)=>{D+=f.name,q===this.thesisStudent.researcherInvolved.length-1?D+=".":D+=", "});var B="";this.idResearcher!=""?B=this.idResearcher:B=this.userID;let o={idUsuario:B,status:"Finished",researcherInvolved:D,identification:this.thesisStudent.identification,studentName:this.thesisStudent.studentName,runOrPassport:u,gender:this.thesisStudent.gender,studentMail:this.thesisStudent.studentMail,thesisStatus:this.thesisStudent.thesisStatus,thesisTitle:this.thesisStudent.thesisTitle,academicDegree:this.thesisStudent.academicDegree,degreeDenomination:this.thesisStudent.degreeDenomination,tutorName:g,tutorInstitution:w,cotutorName:l,cotutorInstitution:S,otherName:m,otherInstitution:v,university:this.thesisStudent.university,yearStart:this.thesisStudent.yearStart,yearThesisEnd:this.thesisStudent.yearThesisEnd,monthStart:this.thesisStudent.monthStart,monthEnd:this.thesisStudent.monthEnd,resourcesCenter:h,posteriorArea:this.thesisStudent.posteriorArea,institutionPosteriorArea:this.thesisStudent.institutionPosteriorArea,comments:this.thesisStudent.comments,progressReport:this.thesisStudent.progressReport};M.put(`api/thesisStudents/${this.id}`,o).then(f=>{if(this.buttonDisable=!0,this.buttonText="Sending...",this.toast.success("Thesis send successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.file!=null){const q=new FormData;q.append("id",this.id),q.append("file",this.file),M.post("api/thesisStudents/addFile",q,{headers:{"Content-Type":"multipart/form-data"}}).then(Q=>{console.log(Q.data),this.toast.success("File added successfully!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),setTimeout(()=>{this.cerrarModal()},1500)})}else setTimeout(()=>{this.cerrarModal()},1500)}).catch(f=>{f.response?f.response.status===422?this.toast.warning(`Validation error: ${f.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):f.response.status===404?this.toast.error("Resource not found.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${f.response.data.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):f.request?this.toast.error("No response from server.",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}):this.toast.error(`An error occurred: ${f.message}`,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})})}}}},Ur={name:"modal"},Vr={class:"modal-mask"},qr={class:"modal-wrapper"},Hr={class:"modal-container-xl"},Lr={class:"modal-header pb-1 fw-bold",style:{color:"#444444"}},Yr={for:""},jr=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),Jr=[jr],zr={key:0,class:"col-5 m-0"},Gr={class:"fw-normal",style:{"font-size":"14px"}},Xr=t("option",{disabled:"",value:""},"Select a researcher",-1),Kr=["value"],Wr={class:"modal-body"},Qr={class:"row"},Zr={class:"col-md-6"},xr=t("label",{for:""},"AC3E researcher involved:",-1),tl=t("label",{for:"",style:{color:"orange"}},"*",-1),el={class:"col-md-3"},sl=t("label",{for:"universitySelect"},"University that gives the Degree:",-1),ol=t("label",{for:"universitySelect",style:{color:"orange"}},"*",-1),il=t("br",null,null,-1),nl=t("option",{value:""},"Select University",-1),rl=["value"],ll={class:"col-md-3"},al=t("label",{for:""},"Resources provided by the Center: ",-1),dl=t("label",{for:"",style:{color:"orange"}},"*",-1),ul=t("br",null,null,-1),hl=t("br",null,null,-1),cl={class:"row"},ml={class:"col-md-3"},fl=t("label",{for:""},"Student Name: ",-1),pl=t("label",{for:"",style:{color:"orange"}},"*",-1),_l=t("br",null,null,-1),bl={class:"col-md-3"},vl=t("label",{for:""},"Gender: ",-1),Sl=t("label",{for:"",style:{color:"orange"}},"*",-1),gl=t("br",null,null,-1),$l=t("option",{disabled:"",value:null},"Select a Gender",-1),yl=t("option",{value:"Male"},"Male",-1),wl=t("option",{value:"Female"},"Female",-1),Tl=t("option",{value:"Non binary"},"Non binary",-1),kl=[$l,yl,wl,Tl],Cl={class:"col-md-3"},El=t("label",{for:""},"Identification: ",-1),Ol=t("label",{for:"",style:{color:"orange"}},"*",-1),Dl=t("br",null,null,-1),Ml=t("option",{disabled:"",value:null},"Select One",-1),Pl=t("option",{value:"Run"},"Run",-1),Al=t("option",{value:"Passport"},"Passport",-1),Bl=[Ml,Pl,Al],Il={key:0,class:"col-md-3"},Nl=t("label",{for:""},"Run: ",-1),Fl=t("label",{for:"",style:{color:"orange"}},"*",-1),Rl=t("br",null,null,-1),Ul={key:1,class:"col-md-3"},Vl=t("label",{for:""},"Passport: ",-1),ql=t("label",{for:"",style:{color:"orange"}},"*",-1),Hl=t("br",null,null,-1),Ll=t("br",null,null,-1),Yl={class:"row"},jl={class:"col-md-3"},Jl=t("label",{for:""},"Student Mail: ",-1),zl=t("label",{for:"",style:{color:"orange"}},"*",-1),Gl=t("br",null,null,-1),Xl={class:"col-md-5"},Kl=t("label",{for:""},"Academic Degree: ",-1),Wl=t("label",{for:"",style:{color:"orange"}},"*",-1),Ql=t("br",null,null,-1),Zl=t("option",{disabled:"",value:null},"Select a degree",-1),xl=t("option",{value:"Undergraduate degree or profesional title"},"Undergraduate degree or profesional title",-1),ta=t("option",{value:"Master o equivalent"},"Master o equivalent",-1),ea=t("option",{value:"PhD degree"},"PhD degree",-1),sa=[Zl,xl,ta,ea],oa={class:"col-md-4"},ia=t("label",{for:""},"Degree Denomination: ",-1),na=t("label",{for:"",style:{color:"orange"}},"*",-1),ra=t("br",null,null,-1),la=t("br",null,null,-1),aa={class:"row"},da={class:"col-md-4"},ua=t("label",{for:""},"Thesis Title: ",-1),ha=t("label",{for:"",style:{color:"orange"}},"*",-1),ca=t("br",null,null,-1),ma={class:"col-md-3"},fa=t("label",{for:""},"Thesis Status: ",-1),pa=t("label",{for:"",style:{color:"orange"}},"*",-1),_a=t("br",null,null,-1),ba=t("option",{disabled:"",value:""},"Select One",-1),va=t("option",{value:"1"},"Finished",-1),Sa=t("option",{value:"2"},"In progress",-1),ga=[ba,va,Sa],$a={key:0,class:"col-md-3"},ya={class:"form-group"},wa=t("label",{for:"archivo"},"File:",-1),Ta=t("label",{for:"",style:{color:"orange"}},"*",-1),ka={key:0,title:"This record already has a file, if you want to change add a new one, otherwise leave this field empty.",style:{color:"#0A95FF"}},Ca=t("i",{class:"fa-solid fa-circle-info"},null,-1),Ea=[Ca],Oa={key:1,class:"col-md-2 pt-2"},Da=t("br",null,null,-1),Ma=t("i",{class:"fa-solid fa-ban"},null,-1),Pa=[Ma],Aa=t("i",{class:"fa-solid fa-download"},null,-1),Ba=[Aa],Ia=t("hr",{size:"3",class:"separador"},null,-1),Na={class:"row"},Fa={class:"col-md-4 d-flex justify-content-center"},Ra=t("i",{class:"fa-solid fa-plus"},null,-1),Ua={class:"col-md-4 d-flex justify-content-center"},Va=t("i",{class:"fa-solid fa-plus"},null,-1),qa={class:"col-md-4 d-flex justify-content-centerd-flex justify-content-center"},Ha=t("i",{class:"fa-solid fa-plus"},null,-1),La=t("hr",{size:"3",class:"separador"},null,-1),Ya={class:"row"},ja={class:"col-md-3"},Ja=t("label",{for:""},"Year in which student starts: ",-1),za=t("label",{for:"",style:{color:"orange"}},"*",-1),Ga=t("br",null,null,-1),Xa=t("option",{disabled:"",value:null},"Select a year",-1),Ka=["value"],Wa={class:"col-md-3"},Qa=t("label",{for:"selectMonth"},"Month in which student starts:",-1),Za=t("label",{for:"selectMonth",style:{color:"orange"}},"*",-1),xa=t("br",null,null,-1),td=t("option",{disabled:"",value:null},"Select a month",-1),ed=t("option",{value:"January"},"January",-1),sd=t("option",{value:"February"},"February",-1),od=t("option",{value:"March"},"March",-1),id=t("option",{value:"April"},"April",-1),nd=t("option",{value:"May"},"May",-1),rd=t("option",{value:"June"},"June",-1),ld=t("option",{value:"July"},"July",-1),ad=t("option",{value:"August"},"August",-1),dd=t("option",{value:"September"},"September",-1),ud=t("option",{value:"October"},"October",-1),hd=t("option",{value:"November"},"November",-1),cd=t("option",{value:"December"},"December",-1),md=[td,ed,sd,od,id,nd,rd,ld,ad,dd,ud,hd,cd],fd={class:"col-md-3"},pd=t("label",{for:""},"Year in which the thesis ends: ",-1),_d={key:0,for:"",style:{color:"orange"}},bd=t("br",null,null,-1),vd=t("option",{disabled:"",value:null},"Select a year",-1),Sd=["value"],gd={class:"col-md-3"},$d=t("label",{for:"selectMonth"},"Month in which the thesis ends:",-1),yd={key:0,for:"selectMonth",style:{color:"orange"}},wd=t("br",null,null,-1),Td=t("option",{disabled:"",value:null},"Select a month",-1),kd=t("option",{value:"January"},"January",-1),Cd=t("option",{value:"February"},"February",-1),Ed=t("option",{value:"March"},"March",-1),Od=t("option",{value:"April"},"April",-1),Dd=t("option",{value:"May"},"May",-1),Md=t("option",{value:"June"},"June",-1),Pd=t("option",{value:"July"},"July",-1),Ad=t("option",{value:"August"},"August",-1),Bd=t("option",{value:"September"},"September",-1),Id=t("option",{value:"October"},"October",-1),Nd=t("option",{value:"November"},"November",-1),Fd=t("option",{value:"December"},"December",-1),Rd=[Td,kd,Cd,Ed,Od,Dd,Md,Pd,Ad,Bd,Id,Nd,Fd],Ud=t("br",null,null,-1),Vd={class:"row"},qd={class:"col-md-3"},Hd=t("label",{for:""},"Posterior working area: ",-1),Ld={key:0,for:"",style:{color:"orange"}},Yd=t("br",null,null,-1),jd=t("option",{disabled:"",value:null},"Select an area",-1),Jd=t("option",{value:"Private Education"},"Private Education",-1),zd=t("option",{value:"Business"},"Business",-1),Gd=t("option",{value:"Own entrepreneurship"},"Own entrepreneurship",-1),Xd=t("option",{value:"Government"},"Government",-1),Kd=t("option",{value:"Public Education"},"Public Education",-1),Wd=t("option",{value:"Social-ONG"},"Social-ONG",-1),Qd=t("option",{value:"In the Center"},"In the Center",-1),Zd=t("option",{value:"None of the above"},"None of the above",-1),xd=[jd,Jd,zd,Gd,Xd,Kd,Wd,Qd,Zd],tu={class:"col-md-4"},eu=t("label",{for:""},"Institution of Posterior working area: ",-1),su={key:0,for:"",style:{color:"orange"}},ou=t("br",null,null,-1),iu={class:"col-md-5"},nu=t("label",{for:""},"Comments: ",-1),ru=t("br",null,null,-1),lu={class:"modal-footer"},au={class:"form-check-label"},du=["disabled"],uu=["disabled"];function hu(e,s,u,_,d,i){const g=$("Multiselect"),w=$("modalOther"),l=$("modalCoautor"),S=$("modalAutor"),m=$("modalEditarTutor"),v=$("modalEditarCotutor"),h=$("modalEditarOther"),D=$("modalconfirmacion"),B=$("modalalerta"),a=$("modalProgressYear");return n(),k(V,{name:"modalcrear"},{default:U(()=>[t("div",Ur,[t("div",Vr,[t("div",qr,[t("div",Hr,[t("div",Lr,[C(e.$slots,"header",{},()=>[y(" Edit Thesis ")]),t("label",Yr,[y("Progress year: "+p(e.thesisStudent.progressReport)+"    ",1),t("a",{class:"btn",onClick:s[0]||(s[0]=o=>e.showModalProgress=!0)},Jr)]),e.is("Administrator")?(n(),r("label",zr,[y(" Researcher: "),t("label",Gr,[c(t("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=o=>e.idResearcher=o)},[Xr,(n(!0),r(P,null,A(e.usuarios,o=>(n(),r("option",{key:o.id,value:o.id},p(o.name),9,Kr))),128))],512),[[T,e.idResearcher]])])])):b("",!0),t("a",{class:"btn btn-closed",onClick:s[2]||(s[2]=o=>e.$emit("close")),ref:"closeBtn"},"X",512)]),t("div",Wr,[C(e.$slots,"body",{},()=>[t("div",Qr,[t("div",Zr,[xr,tl,O(g,{placeholder:"Select the participants",modelValue:e.thesisStudent.researcherInvolved,"onUpdate:modelValue":s[3]||(s[3]=o=>e.thesisStudent.researcherInvolved=o),searchable:!0,"close-on-select":!1,createTag:!0,options:e.researchers,mode:"tags",label:"name",trackBy:"id",object:!0},null,8,["modelValue","options"])]),t("div",el,[sl,ol,il,c(t("select",{id:"universitySelect",class:"form-select","onUpdate:modelValue":s[4]||(s[4]=o=>e.thesisStudent.university=o)},[nl,(n(!0),r(P,null,A(e.universities,o=>(n(),r("option",{value:o.name},p(o.name),9,rl))),256))],512),[[T,e.thesisStudent.university]])]),t("div",ll,[al,dl,ul,t("div",null,[O(g,{placeholder:"Select the options",modelValue:e.thesisStudent.resourcesCenter,"onUpdate:modelValue":s[5]||(s[5]=o=>e.thesisStudent.resourcesCenter=o),limit:"4",searchable:!0,"close-on-select":!1,createTag:!0,options:e.options1,mode:"tags",label:"name",trackBy:"name",object:!0},null,8,["modelValue","options"])])])]),hl,t("div",cl,[t("div",ml,[fl,pl,_l,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>e.thesisStudent.studentName=o)},null,512),[[E,e.thesisStudent.studentName]])]),t("div",bl,[vl,Sl,gl,c(t("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=o=>e.thesisStudent.gender=o)},kl,512),[[T,e.thesisStudent.gender]])]),t("div",Cl,[El,Ol,Dl,c(t("select",{class:"form-select",onChange:s[8]||(s[8]=o=>{e.thesisStudent.run="",e.thesisStudent.passport=""}),"onUpdate:modelValue":s[9]||(s[9]=o=>e.thesisStudent.identification=o)},Bl,544),[[T,e.thesisStudent.identification]])]),e.thesisStudent.identification=="Run"?(n(),r("div",Il,[Nl,Fl,Rl,c(t("input",{type:"text",class:"form-control",onInput:s[10]||(s[10]=(...o)=>i.validateInput&&i.validateInput(...o)),onKeypress:s[11]||(s[11]=(...o)=>i.isNumberOrDash&&i.isNumberOrDash(...o)),onKeyup:s[12]||(s[12]=o=>i.checkRut()),"onUpdate:modelValue":s[13]||(s[13]=o=>e.thesisStudent.run=o)},null,544),[[E,e.thesisStudent.run]])])):b("",!0),e.thesisStudent.identification=="Passport"?(n(),r("div",Ul,[Vl,ql,Hl,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=o=>e.thesisStudent.passport=o)},null,512),[[E,e.thesisStudent.passport]])])):b("",!0)]),Ll,t("div",Yl,[t("div",jl,[Jl,zl,Gl,c(t("input",{type:"email",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=o=>e.thesisStudent.studentMail=o)},null,512),[[E,e.thesisStudent.studentMail]])]),t("div",Xl,[Kl,Wl,Ql,c(t("select",{class:"form-select","onUpdate:modelValue":s[16]||(s[16]=o=>e.thesisStudent.academicDegree=o)},sa,512),[[T,e.thesisStudent.academicDegree]])]),t("div",oa,[ia,na,ra,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[17]||(s[17]=o=>e.thesisStudent.degreeDenomination=o)},null,512),[[E,e.thesisStudent.degreeDenomination]])])]),la,t("div",aa,[t("div",da,[ua,ha,ca,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[18]||(s[18]=o=>e.thesisStudent.thesisTitle=o)},null,512),[[E,e.thesisStudent.thesisTitle]])]),t("div",ma,[fa,pa,_a,c(t("select",{class:"form-select","onUpdate:modelValue":s[19]||(s[19]=o=>e.thesisStudent.thesisStatus=o)},ga,512),[[T,e.thesisStudent.thesisStatus]])]),e.thesisStudent.thesisStatus==1?(n(),r("div",$a,[t("div",ya,[wa,Ta,u.thesisStudent1.file!=null?(n(),r("label",ka,Ea)):b("",!0),t("input",{type:"file",ref:"fileInput",accept:".pdf, .jpg, .jpeg, .png,",class:"form-control",onChange:s[20]||(s[20]=(...o)=>i.getFile&&i.getFile(...o))},null,544)])])):b("",!0),e.thesisStudent.thesisStatus==1?(n(),r("div",Oa,[Da,t("a",{class:"btn btn-closed",title:"Clear Input",onClick:s[21]||(s[21]=(...o)=>i.clearFileInput&&i.clearFileInput(...o))},Pa),y("   "),u.thesisStudent1.file!=null?(n(),r("a",{key:0,class:"btn btn-search-blue",title:"Download",onClick:s[22]||(s[22]=o=>i.descargarExtracto(e.id,e.user))},Ba)):b("",!0)])):b("",!0)]),Ia,t("div",Na,[t("div",Fa,[e.tutors.length!=0?(n(),r("a",{key:0,class:"btn btn-continue",onClick:s[23]||(s[23]=o=>e.showModalEditTutor=!0)},p(e.tutors.length),1)):b("",!0),y("   "),t("a",{class:"btn btn-search-blue",onClick:s[24]||(s[24]=o=>e.showModalAutor=!0)},[Ra,y(" Add Tutor ")])]),t("div",Ua,[e.cotutors.length!=0?(n(),r("a",{key:0,class:"btn btn-continue",onClick:s[25]||(s[25]=o=>e.showModalEditCotutor=!0)},p(e.cotutors.length),1)):b("",!0),y("   "),t("a",{class:"btn btn-search-blue",onClick:s[26]||(s[26]=o=>e.showModalCoautor=!0)},[Va,y(" Add Cotutor ")])]),t("div",qa,[e.others.length!=0?(n(),r("a",{key:0,class:"btn btn-continue",onClick:s[27]||(s[27]=o=>e.showModalEditOther=!0)},p(e.others.length),1)):b("",!0),y("   "),t("a",{class:"btn btn-search-blue",onClick:s[28]||(s[28]=o=>e.showModalOther=!0)},[Ha,y(" Add Other ")])])]),La,t("div",Ya,[t("div",ja,[Ja,za,Ga,c(t("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":s[29]||(s[29]=o=>e.thesisStudent.yearStart=o)},[Xa,(n(!0),r(P,null,A(e.years,o=>(n(),r("option",{key:o,value:o},p(o),9,Ka))),128))],512),[[T,e.thesisStudent.yearStart]])]),t("div",Wa,[Qa,Za,xa,c(t("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":s[30]||(s[30]=o=>e.thesisStudent.monthStart=o)},md,512),[[T,e.thesisStudent.monthStart]])]),t("div",fd,[pd,e.thesisStudent.thesisStatus==1?(n(),r("label",_d,"*")):b("",!0),bd,c(t("select",{class:"form-select",id:"selectYear","onUpdate:modelValue":s[31]||(s[31]=o=>e.thesisStudent.yearThesisEnd=o)},[vd,(n(!0),r(P,null,A(e.years,o=>(n(),r("option",{key:o,value:o},p(o),9,Sd))),128))],512),[[T,e.thesisStudent.yearThesisEnd]])]),t("div",gd,[$d,e.thesisStudent.thesisStatus==1?(n(),r("label",yd,"*")):b("",!0),wd,c(t("select",{class:"form-select",id:"selectMonth","onUpdate:modelValue":s[32]||(s[32]=o=>e.thesisStudent.monthEnd=o)},Rd,512),[[T,e.thesisStudent.monthEnd]])])]),Ud,t("div",Vd,[t("div",qd,[Hd,e.thesisStudent.thesisStatus==1?(n(),r("label",Ld,"*")):b("",!0),Yd,c(t("select",{class:"form-select","onUpdate:modelValue":s[33]||(s[33]=o=>e.thesisStudent.posteriorArea=o)},xd,512),[[T,e.thesisStudent.posteriorArea]])]),t("div",tu,[eu,e.thesisStudent.thesisStatus==1?(n(),r("label",su,"*")):b("",!0),ou,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[34]||(s[34]=o=>e.thesisStudent.institutionPosteriorArea=o)},null,512),[[E,e.thesisStudent.institutionPosteriorArea]])]),t("div",iu,[nu,ru,c(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[35]||(s[35]=o=>e.thesisStudent.comments=o)},null,512),[[E,e.thesisStudent.comments]])])])])]),t("div",lu,[C(e.$slots,"footer",{},()=>[t("label",au,[c(t("input",{type:"checkbox",class:"form-check-","onUpdate:modelValue":s[36]||(s[36]=o=>e.draft=o)},null,512),[[L,e.draft]]),y(" Edit as a draft")]),e.draft==!1?(n(),r("a",{key:0,class:"btn btn-continue float-end",onClick:s[37]||(s[37]=o=>i.crearTesis()),disabled:e.buttonDisable},p(e.buttonText),9,du)):(n(),r("a",{key:1,class:"btn btn-continue float-end",onClick:s[38]||(s[38]=o=>i.guardarBorrador()),disabled:e.buttonDisable}," Edit draft ",8,uu))])]),e.showModalOther?(n(),k(w,{key:0,onClose:s[39]||(s[39]=o=>e.showModalOther=!1),onSubmit:i.handleFormSubmit3},null,8,["onSubmit"])):b("",!0),e.showModalCoautor?(n(),k(l,{key:1,onClose:s[40]||(s[40]=o=>e.showModalCoautor=!1),onSubmit:i.handleFormSubmit2},null,8,["onSubmit"])):b("",!0),e.showModalAutor?(n(),k(S,{key:2,onClose:s[41]||(s[41]=o=>e.showModalAutor=!1),onSubmit:i.handleFormSubmit1},null,8,["onSubmit"])):b("",!0),e.showModalEditTutor?(n(),k(m,{key:3,tutors1:e.tutors,onClose:s[42]||(s[42]=o=>e.showModalEditTutor=!1)},null,8,["tutors1"])):b("",!0),e.showModalEditCotutor?(n(),k(v,{key:4,cotutors1:e.cotutors,onClose:s[43]||(s[43]=o=>e.showModalEditCotutor=!1)},null,8,["cotutors1"])):b("",!0),e.showModalEditOther?(n(),k(h,{key:5,others1:e.others,onClose:s[44]||(s[44]=o=>e.showModalEditOther=!1)},null,8,["others1"])):b("",!0),O(D,{ref:"confirmation"},null,512),O(B,{ref:"alert"},null,512),e.showModalProgress?(n(),k(a,{key:6,progressYear:e.thesisStudent.progressReport,onClose:s[45]||(s[45]=o=>e.showModalProgress=!1),onSubmit:i.handleFormSubmit1},null,8,["progressYear","onSubmit"])):b("",!0)])])])])]),_:3})}const cu=R(Rr,[["render",hu]]),mu={components:{modaleditar:cu,modalcrear:Fr,modalver:Z,modalconfirmacion:N,modalalerta:F},mixins:[I],data(){return{thesisStudents:null,thesisStudent:null,showNewThesisStudent:!1,showDetailsThesis:!1,showEditThesisStudent:!1,thesisStudentEdit:null,mostrarTabla:!1,mostrarCarga:!0,table:null}},created(){this.getThesisStudents(this.userID)},methods:{descargarExtracto(e,s){M({url:`api/thesisDownload/${e}`,method:"GET",responseType:"arraybuffer"}).then(u=>{let _=new Blob([u.data],{type:u.headers["content-type"]}),d=document.createElement("a");if(d.href=window.URL.createObjectURL(_),_.type.includes("pdf"))d.download=`Thesis-${s}.pdf`;else if(_.type.includes("image"))d.download=`Thesis-${s}.png`;else{console.error("Tipo de archivo no compatible");return}d.click()})},verThesis(e){this.thesisStudent=e,this.showDetailsThesis=!0},getThesisStudents(e){M.get(`api/thesisStudents/${e}`).then(s=>{this.thesisStudents=s.data,this.table!=null&&(this.table.clear(),this.table.destroy()),this.crearTabla("#MyTableThesisStudents")}).catch(s=>console.log(s))},recargarTabla(e){this.mostrarCarga=!0,e=="General"?(this.thesisStudents=null,this.getThesisStudents(this.userID)):this.crearTabla("#MyTableThesisStudents")},editThesisStudent(e){this.thesisStudentEdit=e,this.showEditThesisStudent=!0},async deleteThesisStudent(e){await this.$refs.confirmation.show({title:"Delete Thesis",message:"¿Are you sure you want to delete this Thesis?.",okButton:"Delete",cancelButton:"Return"})&&M.delete(`api/thesisStudents/${e}`).then(u=>{this.toast.success("Thesis successfully removed!",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),this.recargarTabla("General")}).catch(u=>console.log(u))}}},fu={class:"row mt-4 mx-4"},pu={class:"col-12"},_u={class:"card mb-4"},bu={class:"row pb-0 p-4"},vu={class:"col-12"},Su={class:"d-flex justify-content-end"},gu=t("i",{class:"fa-solid fa-rotate"},null,-1),$u=[gu],yu={class:"card-body px-0 pt-0 pb-2",style:{"min-height":"400px"}},wu={class:"container"},Tu={class:"table-responsive p-0"},ku={class:"loader-sm"},Cu={class:"table align-items-center mb-0",id:"MyTableThesisStudents"},Eu=t("thead",null,[t("tr",{style:{color:"black"}},[t("th",{style:{"min-width":"16px"}}),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"ID"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Actions"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Status"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"User"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Thesis Title"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Student Name"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Tutor Name"),t("th",{class:"text-uppercase text-xs font-weight-bolder"},"Academic Degree")])],-1),Ou=t("td",null,null,-1),Du={class:"text-sm font-weight-bolder mb-0",style:{color:"black"}},Mu={class:"align-middle text-end"},Pu={class:"d-flex px-3 py-1 justify-content-center align-items-center"},Au=["onClick"],Bu=t("i",{class:"fa-solid fa-download"},null,-1),Iu=[Bu],Nu={key:1,class:"btn btn-grey btn-xs"},Fu=t("i",{class:"fa-solid fa-download"},null,-1),Ru=[Fu],Uu=["onClick"],Vu=t("i",{class:"fa-regular fa-eye"},null,-1),qu=[Vu],Hu=["onClick"],Lu=t("i",{class:"fa fa-fw fa-edit"},null,-1),Yu=[Lu],ju=["onClick"],Ju=t("i",{class:"fa fa-fw fa-trash"},null,-1),zu=[Ju],Gu={key:0,class:"text-sm font-weight-bolder mb-0",style:{color:"#878686"}},Xu={key:1,class:"text-sm font-weight-bolder mb-0",style:{color:"#28A745"}},Ku={class:"text-sm mb-0"},Wu={key:0,class:"text-sm mb-0"},Qu={key:1,class:"text-sm mb-0 truncate-text"},Zu={key:0,class:"text-sm mb-0"},xu={key:1,class:"text-sm mb-0"},th={key:0,class:"text-sm mb-0"},eh={key:1,class:"text-sm mb-0"},sh={key:0,class:"text-sm mb-0"},oh={key:1,class:"text-sm mb-0"},ih=x('<div class="row"><div class="col-3"><label style="font-weight:500;"> These buttons use the elements selected in the table, if none exist, it will select all the records. </label></div><div class="col-auto"><label title="To select a single record from the table, just do \r Click on the box in the first column to select \r several consecutive hold SHIFT, to select several \r non-consecutive hold CTRL."><span class="badge bg-dark-grey fs-10">?</span></label></div></div>',1);function nh(e,s,u,_,d,i){const g=$("modalconfirmacion"),w=$("modalalerta"),l=$("modalver"),S=$("modaleditar"),m=$("modalcrear");return n(),r("div",fu,[t("div",pu,[t("div",_u,[t("div",bu,[t("div",vu,[t("div",Su,[t("a",{class:"btn btn-spacing btn-continue",id:"show-modal1",onClick:s[0]||(s[0]=v=>d.showNewThesisStudent=!0)},"New Thesis"),y("   "),t("a",{class:"btn btn-spacing btn-search-blue",onClick:s[1]||(s[1]=v=>i.recargarTabla("General"))},$u)])])]),t("div",yu,[t("div",wu,[t("div",Tu,[c(t("div",ku,null,512),[[H,d.mostrarCarga]]),c(t("table",Cu,[Eu,t("tbody",null,[(n(!0),r(P,null,A(d.thesisStudents,v=>(n(),r("tr",{key:v.id},[Ou,t("td",null,[t("p",Du,p(v.id),1)]),t("td",Mu,[t("div",Pu,[v.file!=null?(n(),r("a",{key:0,class:"btn btn-search-blue btn-xs",title:"Download Thesis Extract",onClick:h=>i.descargarExtracto(v.id,v.usuario.name)},Iu,8,Au)):(n(),r("a",Nu,Ru)),y("   "),t("a",{class:"btn btn-success btn-xs",title:"Details",onClick:h=>i.verThesis(v)},qu,8,Uu),y("   "),t("a",{class:"btn btn-alert btn-xs",title:"Edit",onClick:h=>i.editThesisStudent(v)},Yu,8,Hu),y("   "),t("a",{class:"btn btn-closed btn-xs",title:"Delete",onClick:h=>i.deleteThesisStudent(v.id)},zu,8,ju)])]),t("td",null,[v.status=="Draft"?(n(),r("p",Gu,p(v.status),1)):b("",!0),v.status=="Finished"?(n(),r("p",Xu,p(v.status),1)):b("",!0)]),t("td",null,[t("p",Ku,p(v.usuario.name),1)]),t("td",null,[v.thesisTitle==null?(n(),r("p",Wu,"---")):(n(),r("p",Qu,p(v.thesisTitle),1))]),t("td",null,[v.studentName==null?(n(),r("p",Zu,"---")):(n(),r("p",xu,p(v.studentName),1))]),t("td",null,[v.tutorName==null?(n(),r("p",th,"---")):(n(),r("p",eh,p(v.tutorName),1))]),t("td",null,[v.academicDegree==null?(n(),r("p",sh,"---")):(n(),r("p",oh,p(v.academicDegree),1))])]))),128))])],512),[[H,d.mostrarTabla]]),ih])])])]),O(g,{ref:"confirmation"},null,512),O(w,{ref:"alert"},null,512),d.showDetailsThesis?(n(),k(l,{key:0,thesisStudent1:d.thesisStudent,onClose:s[2]||(s[2]=v=>d.showDetailsThesis=!1)},null,8,["thesisStudent1"])):b("",!0),d.showEditThesisStudent?(n(),k(S,{key:1,thesisStudent1:d.thesisStudentEdit,onClose:s[3]||(s[3]=v=>d.showEditThesisStudent=!1),onRecarga:s[4]||(s[4]=v=>i.recargarTabla("General"))},null,8,["thesisStudent1"])):b("",!0),d.showNewThesisStudent?(n(),k(m,{key:2,onClose:s[5]||(s[5]=v=>d.showNewThesisStudent=!1),onRecarga:s[6]||(s[6]=v=>i.recargarTabla("General"))})):b("",!0)])])}const fh=R(mu,[["render",nh]]);export{fh as default};
